/*! For license information please see bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.magicChatCore=t():e.magicChatCore=t()}(this,(()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var s={},a=[],i=0;i<e.length;i++){var c=e[i],l=o.base?c[0]+o.base:c[0],d=s[l]||0,p="".concat(l," ").concat(d);s[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=r(h,o);o.byIndex=i,t.splice(i,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var i=n(s[a]);t[i].references--}for(var c=o(e,r),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},153:(e,t,n)=>{n.d(t,{Ay:()=>X,C$:()=>S,CL:()=>Y,CX:()=>_,DW:()=>F,FW:()=>E,Ht:()=>y,Iv:()=>i,JW:()=>m,JY:()=>I,Om:()=>G,QQ:()=>h,SZ:()=>l,So:()=>p,UI:()=>v,Vj:()=>g,W1:()=>w,W8:()=>B,XB:()=>H,Xs:()=>U,YL:()=>c,Yw:()=>L,ZT:()=>A,ZX:()=>V,Zg:()=>x,_3:()=>z,av:()=>q,bw:()=>R,cw:()=>T,d6:()=>C,dQ:()=>f,fP:()=>d,hD:()=>u,l3:()=>W,lj:()=>J,mJ:()=>N,py:()=>M,r1:()=>k,tz:()=>P,u9:()=>D,us:()=>j,vE:()=>O,vI:()=>b});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,"/* .chat_screen_top_wrapper {\n  background: var(--white-color);\n  flex: 1;\n  border-radius: 0px 10px 10px 0px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n.chat_screen_top_wrapper img {\n  width: 300px;\n} */\n._2M7XwOsIDD7uBf1F_a1g {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  right: 10px;\n  border: none;\n  background: var(--primary-gradient);\n  border-radius: 50%;\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  z-index: 1;\n  padding: 6px;\n}\n._2M7XwOsIDD7uBf1F_a1g:hover .NumVdf2_0CbFLkpj_Jus {\n  visibility: visible;\n  opacity: 1;\n}\n._2M7XwOsIDD7uBf1F_a1g svg {\n  padding: 3px;\n}\n.Fu_8IJ1ayd53X4aFqjVG {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.35);\n  background-color: rgb(163, 112, 206);\n  width: 100%;\n  height: 68px;\n  padding-left: 15px;\n  --r: 32px;\n  --s: 35px;\n  border-radius: 0 var(--r) 0 0;\n  --_m: /calc(1.5 * var(--r)) calc(1.5 * var(--r)) radial-gradient(\n      #000 72%,\n      #0000 74%\n    ) no-repeat;\n  mask: right calc(var(--s) + var(--r)) top 0 var(--_m),\n    right calc(var(--s) + var(--r)) var(--_m),\n    radial-gradient(var(--s) at 100% 0, #0000 99%, #000 101%)\n      calc(-1 * var(--r)) var(--r) no-repeat,\n    conic-gradient(\n      at calc(100% - var(--s) - 2 * var(--r)) calc(var(--s) + 2 * var(--r)),\n      #0000 25%,\n      #000 0\n    );\n}\n.Fu_8IJ1ayd53X4aFqjVG h3 {\n  font-size: 18px;\n  font-weight: 500;\n  color: white;\n}\n.uUOxFe9Xywq2g3pt0Bnu {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n}\n\n.OHABpb_2J3A2pZkUgzT4 {\n  width: 100%;\n  padding: 16px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n}\n.OHABpb_2J3A2pZkUgzT4:focus {\n  border: 1px solid #4a7feb;\n}\n\n.anPnJc3Oug8esGW7coOl {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n.anPnJc3Oug8esGW7coOl:hover button {\n  background-color: transparent !important;\n}\n.mOxY1_6eBs1n5bRF95av {\n  position: absolute;\n  right: 18%;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0px;\n}\n.mOxY1_6eBs1n5bRF95av svg {\n  width: 38px;\n  height: 38px;\n}\n._IRnj_ndqz1wKxSP6wQ2 {\n  margin-left: 10px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  outline: none;\n  border: none;\n  border-radius: 50%;\n  padding: 0px;\n  background-color: transparent;\n}\n._IRnj_ndqz1wKxSP6wQ2 svg {\n  width: 50px;\n  height: 50px;\n}\n.hhcLPgl5fkEIxYaKAwan {\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n.LM4VKcXmg6vGBia7YE02 {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.qgDC7rrHWnDv1NF0OHUK {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.BJmYOwUAgpBqq6zPOPC1 {\n  color: var(--dark-text);\n  background: var(--subSecondary);\n  border-radius: 10px 10px 10px 0px;\n  max-width: 115px;\n  margin-left: 20px;\n  margin-bottom: 10px;\n  padding: 0px 10px;\n  width: 80%;\n}\n.uEoZpVLjCAU1yjB1Blyy {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n.uEoZpVLjCAU1yjB1Blyy {\n  position: relative;\n}\n.jeuF8Ezax0MfTvJ9RK0O .uEoZpVLjCAU1yjB1Blyy {\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.nNOvPS4pXzWVJ0CTXAcT .uEoZpVLjCAU1yjB1Blyy {\n  flex-direction: row-reverse;\n  justify-content: flex-end;\n}\n.j2RpmITBYwMTjmNmM9Ax {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--white-color);\n  font-size: 40px;\n  padding-bottom: 7px;\n  visibility: hidden;\n  cursor: pointer;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  background-color: rgb(219, 219, 219);\n  position: relative;\n  z-index: 1;\n}\n.xzFQl9HBTHTzr06VueZx {\n  padding: 15px;\n  max-width: 350px;\n  position: relative;\n}\n\n.jeuF8Ezax0MfTvJ9RK0O {\n  margin-bottom: 20px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n.nNOvPS4pXzWVJ0CTXAcT {\n  margin-bottom: 20px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n.jeuF8Ezax0MfTvJ9RK0O .xzFQl9HBTHTzr06VueZx {\n  color: var(--white-color);\n  background: var(--primary-color);\n  border-radius: 18px 18px 0px 18px;\n}\n.nNOvPS4pXzWVJ0CTXAcT .xzFQl9HBTHTzr06VueZx {\n  color: var(--dark-text);\n  background: var(--subSecondary);\n  border-radius: 18px 18px 18px 0px;\n}\n.jfJ2Gr9JbL9WpDGqrlTG {\n  font-size: 20px;\n  cursor: pointer;\n  visibility: hidden;\n  position: absolute;\n  right: 10px;\n  top: 2px;\n  padding-top: 5px;\n}\n.jeuF8Ezax0MfTvJ9RK0O .jfJ2Gr9JbL9WpDGqrlTG {\n  color: var(--white-color);\n}\n.nNOvPS4pXzWVJ0CTXAcT .jfJ2Gr9JbL9WpDGqrlTG {\n  color: var(--dark-text);\n}\n.QeqJtCF5SEqvWjuMaGOQ {\n  display: block;\n  align-items: flex-start;\n}\n.XQ82h2laLgTIusTNMK3F {\n  padding-bottom: 5px;\n}\n.yhwZEl3OhJ8fH8lGmhQb {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 6px;\n}\n.Equ3RPaKZlAdMyANH5fD {\n  position: absolute;\n  bottom: -14px;\n  right: 10px;\n  transform: translateX(0);\n  font-size: 20px;\n  background: #fff;\n  padding: 5px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  z-index: 1;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 2px;\n}\n.jeuF8Ezax0MfTvJ9RK0O .Equ3RPaKZlAdMyANH5fD {\n  right: 10px;\n}\n.nNOvPS4pXzWVJ0CTXAcT .Equ3RPaKZlAdMyANH5fD {\n  left: 10px;\n}\n.wj3ePMgQjbh0MHrcrY3Q {\n  position: absolute;\n  top: -10px;\n  background: rgb(225, 225, 225);\n  padding: 10px;\n  border-radius: 20px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 4px;\n  z-index: 100;\n  cursor: pointer;\n  display: inline-flex;\n}\n\n.jeuF8Ezax0MfTvJ9RK0O .wj3ePMgQjbh0MHrcrY3Q {\n  right: 100%;\n  transform: translateX(155px);\n}\n.nNOvPS4pXzWVJ0CTXAcT .wj3ePMgQjbh0MHrcrY3Q {\n  left: 100%;\n  transform: translateX(-165px);\n}\n.SQUzyuUduDqNwF_1ap5g {\n  width: 100%;\n  border-left: 5px solid #003299;\n  border-radius: 6px;\n  padding: 8px;\n  margin-bottom: 12px;\n}\n.nNOvPS4pXzWVJ0CTXAcT .SQUzyuUduDqNwF_1ap5g {\n  background: #cfe0ff;\n}\n.jeuF8Ezax0MfTvJ9RK0O .SQUzyuUduDqNwF_1ap5g {\n  background: #1b61f0;\n}\n.f8RFkCyHLI4aU8DZNgMn {\n  position: absolute;\n  bottom: -14px;\n  right: 10px;\n  transform: translateX(0);\n  font-size: 20px;\n  background: #fff;\n  padding: 5px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  z-index: 1;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.NumVdf2_0CbFLkpj_Jus {\n  position: absolute;\n  top: 100%;\n  right: 0%;\n  background: black;\n  color: white;\n  padding: 5px 10px;\n  border-radius: 5px;\n  font-size: 14px;\n  white-space: nowrap;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  pointer-events: none;\n  z-index: 10;\n  margin-top: 10px;\n}\n.D2HanxagzC0dW3EhJy3C {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  right: 10px;\n  border: none;\n  background: var(--primary-gradient);\n  border-radius: 50%;\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  padding: 10px;\n  z-index: 1;\n}\n.D2HanxagzC0dW3EhJy3C svg {\n  padding: 5px;\n}\n\n.u8qiGCpzFb_DMLOlktZi {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.35);\n  background-color: rgb(163, 112, 206);\n  width: 100%;\n  height: 68px;\n  flex-shrink: 0;\n  padding-left: 15px;\n  --r: 32px;\n  --s: 35px;\n  border-radius: 0 var(--r) 0 0;\n  --_m: /calc(1.5 * var(--r)) calc(1.5 * var(--r)) radial-gradient(\n      #000 72%,\n      #0000 74%\n    ) no-repeat;\n  mask: right calc(var(--s) + var(--r)) top 0 var(--_m),\n    right calc(var(--s) + var(--r)) var(--_m),\n    radial-gradient(var(--s) at 100% 0, #0000 99%, #000 101%)\n      calc(-1 * var(--r)) var(--r) no-repeat,\n    conic-gradient(\n      at calc(100% - var(--s) - 2 * var(--r)) calc(var(--s) + 2 * var(--r)),\n      #0000 25%,\n      #000 0\n    );\n}\n.u8qiGCpzFb_DMLOlktZi h3 {\n  font-size: 18px;\n  font-weight: 500;\n  color: white;\n}\n.V8yeGmN1uUIXy9YM6Yys {\n  padding: 10px;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  flex-grow: 1;\n  background: var(--white-color);\n}\n\n.V8yeGmN1uUIXy9YM6Yys::-webkit-scrollbar {\n  display: none;\n}\n\n.wd_h5hUVEZmU1MI1NShG {\n  position: relative;\n  width: 100%;\n  height: 80px;\n  flex-shrink: 0;\n  display: flex;\n}\n.T57jHeJG3JjRrvQXqynw {\n  display: flex;\n  width: 100%;\n  background-color: rgb(237, 242, 251);\n  border-radius: 18px 18px 18px 0px;\n  max-width: 110px;\n  margin-left: 20px;\n}\n.JhmwtY_sbyYpJoOxvbVT {\n  display: flex;\n  padding: 15px 10px;\n  border-top: 1px solid #ccc;\n  flex-shrink: 0;\n  flex-direction: column;\n  background-color: white;\n}\n.ifj0eDYlR1bmXAUM4ZQ1 {\n  width: 100%;\n  padding: 16px 65px 16px 16px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n  outline: none;\n}\n.ifj0eDYlR1bmXAUM4ZQ1:focus {\n  border: 1px solid #4a7feb;\n}\n.XS4fsL1GuPbrd6jUjeFZ {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  min-height: 0;\n  width: 100%;\n  flex: 1;\n  overflow: hidden;\n}\n.k5CKuT5A4wgny2gKNxk4 {\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  flex-grow: 1;\n  width: 100%;\n  border-radius: 0px 0px 8px 8px;\n}\n.M4G2y62k4Kqsn72BHr3W {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n}\n.gl2naCpQtCwKiD8s3DY7 {\n  overflow-y: auto;\n  flex: 1;\n  padding: 20px;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.jp_UEOdcpTs0AGsUOlqI {\n  display: flex;\n  flex-direction: column;\n  padding: 15px 10px;\n  border-top: 1px solid #ccc;\n  box-shadow: rgba(17, 17, 26, 0.25) 0px 1px 0px,\n    rgba(17, 17, 26, 0.25) 0px 0px 8px;\n  max-height: 300px;\n  flex-shrink: 0;\n}\n.c93GGYb3pmLDoYknHFGg {\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n  max-height: 200px;\n  margin-bottom: 10px;\n}\n.QeqJtCF5SEqvWjuMaGOQ {\n  display: block;\n  align-items: flex-start;\n}\n.XQ82h2laLgTIusTNMK3F {\n  padding-bottom: 5px;\n}\n.yhwZEl3OhJ8fH8lGmhQb {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 6px;\n}\n.zLXRc4DljwE_sLXFyqIh {\n  background-color: #fff;\n  padding: 5px;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 14px;\n  margin-right: 5px;\n  display: none;\n}\n.JzkdoEO8PrgSNMgD2T72 {\n  border-radius: 20px;\n  padding: 10px 20px;\n  align-items: center;\n  text-align: center;\n  box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px,\n    rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n  font-size: 14px;\n  font-weight: 500;\n  margin: 10px 20px;\n  min-width: 250px;\n  max-width: 400px;\n  margin: 10px auto;\n}\n.yTjUS3ZDtzcXVtLYKvJi {\n  opacity: 0;\n  animation: pUX_H5gxJOjdvq3CZ3Vw 1.4s infinite;\n}\n\n.yTjUS3ZDtzcXVtLYKvJi:nth-child(1) {\n  animation-delay: 0s;\n}\n.yTjUS3ZDtzcXVtLYKvJi:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.yTjUS3ZDtzcXVtLYKvJi:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes pUX_H5gxJOjdvq3CZ3Vw {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n.O6PbaoqDURSWILSSNyem {\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n  max-height: 700px;\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  max-height: 700px;\n  max-width: 500px;\n  border-radius: 10px;\n  max-width: 500px;\n  border-radius: 10px;\n}\n\n@media (max-width: 600px) {\n .O6PbaoqDURSWILSSNyem {\n  bottom: 70px;\n  right: 0px;\n }\n}",""]);var i="_2M7XwOsIDD7uBf1F_a1g",c="NumVdf2_0CbFLkpj_Jus",l="Fu_8IJ1ayd53X4aFqjVG",d="uUOxFe9Xywq2g3pt0Bnu",p="OHABpb_2J3A2pZkUgzT4",u="anPnJc3Oug8esGW7coOl",h="mOxY1_6eBs1n5bRF95av",f="_IRnj_ndqz1wKxSP6wQ2",g="hhcLPgl5fkEIxYaKAwan",m="LM4VKcXmg6vGBia7YE02",y="qgDC7rrHWnDv1NF0OHUK",v="BJmYOwUAgpBqq6zPOPC1",_="uEoZpVLjCAU1yjB1Blyy",b="jeuF8Ezax0MfTvJ9RK0O",w="nNOvPS4pXzWVJ0CTXAcT",x="j2RpmITBYwMTjmNmM9Ax",C="xzFQl9HBTHTzr06VueZx",E="jfJ2Gr9JbL9WpDGqrlTG",k="QeqJtCF5SEqvWjuMaGOQ",S="XQ82h2laLgTIusTNMK3F",O="yhwZEl3OhJ8fH8lGmhQb",T="Equ3RPaKZlAdMyANH5fD",L="wj3ePMgQjbh0MHrcrY3Q",A="SQUzyuUduDqNwF_1ap5g",N="f8RFkCyHLI4aU8DZNgMn",I="D2HanxagzC0dW3EhJy3C",j="u8qiGCpzFb_DMLOlktZi",B="V8yeGmN1uUIXy9YM6Yys",M="wd_h5hUVEZmU1MI1NShG",P="T57jHeJG3JjRrvQXqynw",R="JhmwtY_sbyYpJoOxvbVT",U="ifj0eDYlR1bmXAUM4ZQ1",D="XS4fsL1GuPbrd6jUjeFZ",q="k5CKuT5A4wgny2gKNxk4",F="M4G2y62k4Kqsn72BHr3W",z="gl2naCpQtCwKiD8s3DY7",H="jp_UEOdcpTs0AGsUOlqI",J="c93GGYb3pmLDoYknHFGg",W="zLXRc4DljwE_sLXFyqIh",V="JzkdoEO8PrgSNMgD2T72",G="yTjUS3ZDtzcXVtLYKvJi",Y="O6PbaoqDURSWILSSNyem";const X=a},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},600:(e,t,n)=>{n.d(t,{Ay:()=>d,KY:()=>l,bb:()=>c,ic:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".KH8FrmzJWg_4Qo0AEz74 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.ldkXnBkrsQXIQfftKeP4 {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  max-width: 300px;\n  text-align: center;\n}\n\n.ab2BTASskwQmqlO4bg7W {\n  width: 40px;\n  height: 40px;\n  position: relative;\n  transform: rotateZ(45deg);\n}\n\n.ab2BTASskwQmqlO4bg7W div {\n  position: absolute;\n  width: 50%;\n  height: 50%;\n  background: #4779c4;\n  animation: UxDYG3okyXRXGNlcfa8D 2.4s infinite linear;\n  transform-origin: 100% 100%;\n}\n\n.ab2BTASskwQmqlO4bg7W div:nth-child(1) {\n  top: 0;\n  left: 0;\n  animation-delay: 0s;\n}\n\n.ab2BTASskwQmqlO4bg7W div:nth-child(2) {\n  top: 0;\n  left: 50%;\n  animation-delay: 0.3s;\n}\n\n.ab2BTASskwQmqlO4bg7W div:nth-child(3) {\n  top: 50%;\n  left: 0;\n  animation-delay: 0.6s;\n}\n\n.ab2BTASskwQmqlO4bg7W div:nth-child(4) {\n  top: 50%;\n  left: 50%;\n  animation-delay: 0.9s;\n}\n.ldkXnBkrsQXIQfftKeP4 .ab2BTASskwQmqlO4bg7W {\n  width: 70px;\n  height: 70px;\n  margin-bottom: 30px;\n}\n.ldkXnBkrsQXIQfftKeP4 .OGJk8HBF1JB5UjdA1uVu {\n  font-size: 18px;\n  \n}\n@keyframes UxDYG3okyXRXGNlcfa8D {\n  0%,\n  10% {\n    transform: perspective(140px) rotateX(-180deg);\n    opacity: 0;\n  }\n  25%,\n  75% {\n    transform: perspective(140px) rotateX(0deg);\n    opacity: 1;\n  }\n  90%,\n  100% {\n    transform: perspective(140px) rotateY(180deg);\n    opacity: 0;\n  }\n}\n\n.qb1vlaqKeMUvvr61Tpk0 {\n  color: black;\n  font-size: 16px;\n  margin-top: 16px;\n  display: flex;\n  /* align-items: center;\n  font-family: sans-serif;\n  justify-content: center; */\n}\n\n.OGJk8HBF1JB5UjdA1uVu {\n  animation: J74PagquMTiHThSTeA0K 1.4s infinite;\n  opacity: 0;\n  margin-left: 2px;\n  font-size: 28px;\n}\n\n.OGJk8HBF1JB5UjdA1uVu:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.OGJk8HBF1JB5UjdA1uVu:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n.OGJk8HBF1JB5UjdA1uVu:nth-child(4) {\n  animation-delay: 0.6s;\n}\n\n@keyframes J74PagquMTiHThSTeA0K {\n  0%,\n  80%,\n  100% {\n    opacity: 0;\n  }\n  40% {\n    opacity: 1;\n  }\n}\n",""]);var i="KH8FrmzJWg_4Qo0AEz74",c="ldkXnBkrsQXIQfftKeP4",l="ab2BTASskwQmqlO4bg7W";const d=a},601:e=>{e.exports=function(e){return e[1]}},635:(e,t,n)=>{n.d(t,{Ay:()=>y,Kf:()=>g,LF:()=>u,QN:()=>i,Tn:()=>p,Yq:()=>c,ZF:()=>d,o1:()=>l,qe:()=>h,xL:()=>m,xg:()=>f});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".dbdlM5PtzibANwV_MeSo {\n  padding: 10px;\n  color: white;\n  background-color: #03142a;\n  font-size: 15px;\n  border-radius: 4px;\n  outline: none;\n  border: none;\n}\n.JC1D8ZzqZd2lEJNOZ__N {\n  padding: 10px 14px;\n  background-color: #d8eee5;\n  color: #03142a;\n  border: none;\n  cursor: pointer;\n  border-radius: 20px;\n  word-wrap: break-word;\n  white-space: normal;\n  max-width: 335px;\n}\n.Z5bh_v84paozEWpWDZAm {\n  width: 20%;\n  padding: 10px;\n  border-radius: 20px;\n  background: #d8eee5;\n  color: black;\n  text-align: center;\n  font-size: 16px;\n  /* margin-bottom: 10px; */\n  cursor: pointer;\n}\n.Z5bh_v84paozEWpWDZAm:hover {\n  background-color: #d3f7e8;\n}\n.r5CvZDeJxw4o87O9eMYh {\n  align-self: flex-start;\n  display: inline-block;\n  background-color: var(--subSecondary);\n  color: var(--dark-text);\n  padding: 12px 16px;\n  border-radius: 18px 18px 18px 0px;\n  max-width: 350px;\n  word-wrap: break-word;\n}\n.owZIF8417lNAJC2tWmgw {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.owZIF8417lNAJC2tWmgw label {\n  font-size: 12px;\n  font-weight: 500;\n  min-width: 100px;\n}\n.owZIF8417lNAJC2tWmgw input {\n  width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n}\n\n.owZIF8417lNAJC2tWmgw input:focus {\n  border: 1px solid rgb(76, 76, 255);\n}\n.GuHe6OTebliPM_cYaMAk{\n    width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n  background: transparent;\n\n}\n.GuHe6OTebliPM_cYaMAk:focus {\n  border: 1px solid rgb(76, 76, 255);\n}\n\n.NzuIGZyCJugexs6n8zIF {\n  font-size: 20px;\n  font-weight: 600;\n  margin-bottom: 10px;\n}\n.xvkLec1DDs6rzeEuagyc {\n  align-self: flex-end;\n  display: inline-block;\n  background: var(--primary-color);\n  color: var(--white-color);\n  padding: 12px 16px;\n  border-radius: 18px 18px 0px;\n  max-width: 350px;\n  word-wrap: break-word;\n}\n.NegVH2GvpWzrSnfhFmkZ {\n overflow-y: auto;\n  /* flex: 1; */\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.zOEjTsdgAHiGncjpGMTZ {\n  padding: 10px;\n  color: white;\n  background-color: #4a7feb;\n  font-size: 15px;\n  border-radius: 4px;\n  outline: none;\n  border: none;\n  align-self: flex-end;\n}\n",""]);var i="dbdlM5PtzibANwV_MeSo",c="JC1D8ZzqZd2lEJNOZ__N",l="Z5bh_v84paozEWpWDZAm",d="r5CvZDeJxw4o87O9eMYh",p="owZIF8417lNAJC2tWmgw",u="GuHe6OTebliPM_cYaMAk",h="NzuIGZyCJugexs6n8zIF",f="xvkLec1DDs6rzeEuagyc",g="NegVH2GvpWzrSnfhFmkZ",m="zOEjTsdgAHiGncjpGMTZ";const y=a},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},860:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".close-btn {\n  width: 32px;\n  height: 32px;\n  aspect-ratio: 1 / 1;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: 1px solid #b71c1c;\n  font-size: 16px;\n  color: #b71c1c;\n  background-color: #ffc7c7;\n}\n.close-btn:hover {\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n}\n\n.editConent {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgb(255, 255, 255);\n  border: 1px solid rgb(204, 204, 204);\n  text-align: center;\n  width: 440px;\n  border-radius: 10px;\n  z-index: 105;\n}\n.editOverlay {\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 104;\n  width: 100%;\n  max-width: 500px;\n  height: 100%;\n  max-height: 700px;\n  border-radius: 10px;\n}\n\n.reply_input_box .attachBtns {\n  right: 0%;\n  top: 35%;\n}\n\n.welcomemsg {\n  /* border: 1px solid red;\n    padding: 16px;\n    margin: 16px;\n    border-radius: 25px;\n    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n    text-align: center; */\n\n  background: rgb(226, 190, 255);\n  color: black;\n  padding: 8px;\n  border-radius: 25px;\n  text-align: center;\n  margin: 10px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  margin-bottom: 10px;\n  opacity: 0;\n  animation: slideInOut 4s ease-in-out forwards;\n}\n\n.popup-send-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  border: none;\n  font-size: 20px;\n  background: var(--primary-color);\n  color: var(--white-color);\n  cursor: pointer;\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  transform: rotate(12deg);\n  padding: 0;\n  position: absolute;\n  right: 30px;\n}\n.popup-input {\n  flex: 1;\n  padding: 24px 10px;\n  font-size: 16px;\n  box-sizing: border-box;\n  border: 0;\n  border-radius: 6px;\n  outline: none;\n  transition: border-color 0.2s ease;\n}\n.popup-input:focus {\n  border-color: var(--primary-color);\n  border: 2px solid var(--subSecondary);\n}\n.popup-container {\n  position: relative;\n  padding-top: 30px;\n}\n\n.popup-close-btn {\n  position: absolute;\n  top: -15px;\n  right: -10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n  font-size: 16px;\n  font-weight: 500;\n  background: #d1d1d1;\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  border-radius: 50%;\n}\n\n.popup-title {\n  font-size: 28px;\n  font-weight: 600;\n  margin-bottom: 20px;\n}\n\n.popup-input-wrap {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-top: 20px;\n  padding: 20px;\n  box-shadow: rgba(0, 0, 0, 0.1) 20px 0px 12px;\n}\n/* .showMsgWrap {\n  display: block;\n  align-items: flex-start;\n  border: 3px solid green;\n} */\n/* .mine_message {\n  padding-bottom: 5px;\n\n}\n.time_status {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 6px;\n} */\n\n/* .dot {\n  opacity: 0;\n  animation: blink 1.4s infinite;\n}\n\n.dot:nth-child(1) {\n  animation-delay: 0s;\n}\n.dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n} */\n\n@media (max-width: 600px) {\n  .attchementBtn {\n    right: 20%;\n  }\n}\n\n@media (min-width: 601px) and (max-width: 1024px) {\n  .attchementBtn {\n    right: 22%;\n  }\n}\n.editable-input {\n  border: 1px solid rgb(221, 221, 221);\n  padding: 10px;\n  border-radius: 4px;\n  margin: 10px 0px;\n  overflow: auto;\n  max-height: 120px;\n  outline: none;\n}\n/* [contenteditable]:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n} */\n.editable-input:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n}\n.editable-input:focus {\n  border: 1px solid #4a7feb;\n}\n\n.editable-input:empty:focus:before {\n  color: lightgray;\n}\n\n.typing-indicator-dots {\n  display: inline-block;\n}\n\n.typing-indicator-dots span {\n  animation: blink 1.4s infinite;\n  font-weight: bold;\n  font-size: 18px;\n  padding: 0 2px;\n  color: #666;\n  opacity: 0;\n}\n\n.typing-indicator-dots span:nth-child(1) {\n  animation-delay: 0s;\n}\n.typing-indicator-dots span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.typing-indicator-dots span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0;\n  }\n  20% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""]);const i=a}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0;var o={};n.r(o),n.d(o,{default:()=>kt});var r={};n.r(r),n.d(r,{Yw:()=>b.Yw,QQ:()=>b.QQ,l3:()=>b.l3,UI:()=>b.UI,lj:()=>b.lj,XB:()=>b.XB,Vj:()=>b.Vj,JW:()=>b.JW,ZX:()=>b.ZX,W8:()=>b.W8,av:()=>b.av,u9:()=>b.u9,_3:()=>b._3,DW:()=>b.DW,fP:()=>b.fP,bw:()=>b.bw,SZ:()=>b.SZ,us:()=>b.us,py:()=>b.py,So:()=>b.So,JY:()=>b.JY,Om:()=>b.Om,FW:()=>b.FW,Zg:()=>b.Zg,Ht:()=>b.Ht,Xs:()=>b.Xs,hD:()=>b.hD,vI:()=>b.vI,C$:()=>b.C$,d6:()=>b.d6,cw:()=>b.cw,W1:()=>b.W1,CX:()=>b.CX,mJ:()=>b.mJ,ZT:()=>b.ZT,dQ:()=>b.dQ,r1:()=>b.r1,vE:()=>b.vE,Iv:()=>b.Iv,YL:()=>b.YL,CL:()=>b.CL,tz:()=>b.tz});var s={};n.r(s),n.d(s,{Decoder:()=>rt,Encoder:()=>nt,PacketType:()=>tt,protocol:()=>et});var a=n(72),i=n.n(a),c=n(825),l=n.n(c),d=n(659),p=n.n(d),u=n(56),h=n.n(u),f=n(540),g=n.n(f),m=n(113),y=n.n(m),v=n(635),_={};_.styleTagTransform=y(),_.setAttributes=h(),_.insert=p().bind(null,"head"),_.domAPI=l(),_.insertStyleElement=g(),i()(v.Ay,_),v.Ay&&v.Ay.locals&&v.Ay.locals;var b=n(153),w={};function x(){x=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),i=new I(o||[]);return r(a,"_invoke",{value:T(e,n,i)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",h="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function _(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(j([])));E&&E!==n&&o.call(E,a)&&(b=E);var k=_.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(r,s,a,i){var c=p(e[r],e,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==C(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,i)}),(function(e){n("throw",e,a,i)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,i)}))}i(c.arg)}var s;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return s=s?s.then(r,r):r()}})}function T(t,n,o){var r=u;return function(s,a){if(r===f)throw Error("Generator is already running");if(r===g){if("throw"===s)throw a;return{value:e,done:!0}}for(o.method=s,o.arg=a;;){var i=o.delegate;if(i){var c=L(i,o);if(c){if(c===m)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===u)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var l=p(t,n,o);if("normal"===l.type){if(r=o.done?g:h,l.arg===m)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(r=g,o.method="throw",o.arg=l.arg)}}}function L(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var s=p(r,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(C(t)+" is not iterable")}return v.prototype=_,r(k,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:v,configurable:!0}),v.displayName=l(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,i,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,o,r,s){void 0===s&&(s=Promise);var a=new O(d(e,n,o,r),s);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(k),l(k,c,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=j,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return i.type="throw",i.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;N(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:j(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function E(e,t,n,o,r,s,a){try{var i=e[s](a),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(o,r)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var s=e.apply(t,n);function a(e){E(s,o,r,a,i,"next",e)}function i(e){E(s,o,r,a,i,"throw",e)}a(void 0)}))}}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}w.styleTagTransform=y(),w.setAttributes=h(),w.insert=p().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=g(),i()(b.Ay,w),b.Ay&&b.Ay.locals&&b.Ay.locals;var L=[],A=[],N=null;function I(){var e=document.getElementById("input-act-bot-wrap");e?e.style.display="none":setTimeout(I,100)}function j(){var e=document.getElementById("input-act-bot-wrap");e?e.style.display="":setTimeout(j,100)}function B(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(console.log("Rendering QNA node:",e),e){var n=document.querySelector(".".concat(b.av," .").concat(b.XB," .").concat(b.lj)),o=document.querySelector(".".concat(b.av," .").concat(b._3));if(n&&o)if(n.innerHTML="",t){var r,s;if(N=e,L=[],A=[],o.innerHTML="",(null===(r=e.answers)||void 0===r?void 0:r.length)>0||(null===(s=e.subQuestions)||void 0===s?void 0:s.length)>0){var a,i;console.log("sadfsdfsdfnode.subQuestions?.length",e.subQuestions);var c=[];(null===(a=e.answers)||void 0===a?void 0:a.length)>0&&e.answers.forEach((function(e){c.push(O(O({},e),{},{onClick:function(){I(),B(e,!1)}}))})),(null===(i=e.subQuestions)||void 0===i?void 0:i.length)>0&&e.subQuestions.forEach((function(e){c.push(O(O({},e),{},{onClick:function(){I(),B(e,!1)}}))})),M(c)}else P()}else{var l,d,p;if(e.text&&!A.includes(e.text)&&(A.push(e.text),R()),function(e){var t,n;return 1===(null===(t=e.answers)||void 0===t?void 0:t.length)&&0===(null===(n=e.subQuestions)||void 0===n?void 0:n.length)}(e)){var u=e.answers[0];return A.push(u.text),R(),void P()}if("User Input"===e.type&&(null===(l=e.subQuestions)||void 0===l?void 0:l.length)>0)!function(e){var t=document.querySelector(".".concat(b.av," .").concat(b.XB," .").concat(b.lj));t.innerHTML="";var n=document.createElement("div");n.classList.add(v.Kf);var o=document.createElement("div");o.textContent=e.text,o.classList.add(v.qe),n.appendChild(o);var r=[],s=[];e.subQuestions.forEach((function(e){var t;if("User Input"!==e.type||(null===(t=e.subQuestions)||void 0===t?void 0:t.length)>0)console.warn("Skipping invalid sub-question inside User Input group: ".concat(e.text));else{var o=document.createElement("div");o.classList.add(v.Tn);var a,i=document.createElement("label");i.textContent=e.text;var c=document.createElement("div");switch(c.className="error-message",c.style.color="red",c.style.display="none",c.style.fontSize="0.8rem",c.style.marginTop="2px",e.inputType){case"boolean":var l=document.createElement("select");l.classList.add(v.LF);var d=document.createElement("option");d.value="",d.textContent="Select ".concat(e.text),d.disabled=!0,d.selected=!0,l.appendChild(d);var p=document.createElement("option");p.value="Yes",p.textContent="Yes",l.appendChild(p);var u=document.createElement("option");u.value="No",u.textContent="No",l.appendChild(u),a=l;break;case"date":(a=document.createElement("input")).type="date",a.classList.add(v.LF);break;case"time":(a=document.createElement("input")).type="time",a.classList.add(v.LF);break;case"datetime":(a=document.createElement("input")).type="datetime-local",a.classList.add(v.LF);break;case"email":(a=document.createElement("input")).type="email",a.placeholder="example@domain.com",a.classList.add(v.LF);break;case"tel":(a=document.createElement("input")).type="tel",a.placeholder="(123) 456-7890",a.classList.add(v.LF);break;case"textarea":(a=document.createElement("textarea")).placeholder="Type your response...",a.classList.add(v.LF),a.style.height="80px",a.style.resize="vertical";break;case"number":(a=document.createElement("input")).type="number",a.placeholder=e.text,a.min="0",a.step="any",a.classList.add(v.LF);break;default:(a=document.createElement("input")).type="text",a.placeholder=e.text,a.classList.add(v.LF)}o.appendChild(i),o.appendChild(a),o.appendChild(c),n.appendChild(o),r.push({field:e,input:a}),s.push(c)}}));var a=document.createElement("button");a.textContent="Submit",a.classList.add(v.xL),a.addEventListener("click",(function(){var n=[],o=!0;if(r.forEach((function(e,t){var r=e.field,a=e.input,i=s[t],c=a.value.trim();if(a.style.border="",i.style.display="none",i.textContent="",!c)return o=!1,a.style.border="1px solid red",i.textContent="This field is required",void(i.style.display="block");switch(r.inputType){case"number":isNaN(c)?(o=!1,a.style.border="1px solid red",i.textContent="Please enter a valid number",i.style.display="block"):Number(c)<0&&(o=!1,a.style.border="1px solid red",i.textContent="Number must be positive",i.style.display="block");break;case"boolean":["Yes","No"].includes(c)||(o=!1,a.style.border="1px solid red",i.textContent="Please select an option",i.style.display="block");break;case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||(o=!1,a.style.border="1px solid red",i.textContent="Please enter a valid email address",i.style.display="block");break;case"tel":/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(c)||(o=!1,a.style.border="1px solid red",i.textContent="Please enter a valid phone number",i.style.display="block")}o&&n.push("".concat(r.text,": ").concat(c))})),o&&n.length===r.length){var a=document.querySelector(".".concat(b.av," .").concat(b._3)),i=document.createElement("div"),c="".concat(e.text),l="".concat(n.join("\n")),d="".concat(c,"\n").concat(l);i.textContent=d,i.className=v.ZF,a.appendChild(i);var p=d;A.push(p),R(),t.innerHTML="";var u=JSON.parse(localStorage.getItem("tezkit_app_data"));fetch("https://autobot.".concat("magicchat.io","/").concat("prod","/add_lead"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:u.tenant_id,app_name:u.app_name,lead_data:d})}).then((function(e){return e.json()})).then((function(e){return console.log("Success:",e)})).catch((function(e){return console.error("Error:",e)})),P()}})),n.appendChild(a),t.appendChild(n)}(e);else if("User Input"===e.type)!function(e){var t=document.querySelector(".".concat(b.av," .").concat(b.XB," .").concat(b.lj));t.innerHTML="";var n=document.createElement("div");n.classList.add(v.Kf);var o,r=document.createElement("div");r.textContent=e.text,r.style.marginBottom="6px",r.style.display="block";var s=document.createElement("div");switch(s.className="error-message",s.style.color="red",s.style.display="none",s.style.fontSize="0.8rem",s.style.marginTop="2px",e.inputType){case"boolean":var a=document.createElement("select");a.classList.add(v.LF);var i=document.createElement("option");i.value="",i.textContent="Select ".concat(e.text),i.disabled=!0,i.selected=!0,a.appendChild(i);var c=document.createElement("option");c.value="Yes",c.textContent="Yes",a.appendChild(c);var l=document.createElement("option");l.value="No",l.textContent="No",a.appendChild(l),o=a;break;case"date":(o=document.createElement("input")).type="date",o.classList.add(v.LF);break;case"time":(o=document.createElement("input")).type="time",o.classList.add(v.LF);break;case"datetime":(o=document.createElement("input")).type="datetime-local",o.classList.add(v.LF);break;case"email":(o=document.createElement("input")).type="email",o.placeholder="example@domain.com",o.classList.add(v.LF);break;case"tel":(o=document.createElement("input")).type="tel",o.placeholder="(123) 456-7890",o.classList.add(v.LF);break;case"textarea":(o=document.createElement("textarea")).placeholder="Type your response...",o.classList.add(v.LF),o.style.height="80px",o.style.resize="vertical";break;case"number":(o=document.createElement("input")).type="number",o.placeholder="Enter a number",o.min="0",o.step="any",o.classList.add(v.LF);break;default:(o=document.createElement("input")).type="text",o.placeholder="Type your response...",o.classList.add(v.LF)}var d=document.createElement("button");d.textContent="Submit",d.classList.add(v.xL),d.addEventListener("click",(function(){var n=o.value.trim(),r=!0;if(o.style.border="",s.style.display="none",s.textContent="",n)switch(e.inputType){case"number":isNaN(n)?(r=!1,o.style.border="1px solid red",s.textContent="Please enter a valid number",s.style.display="block"):Number(n)<0&&(r=!1,o.style.border="1px solid red",s.textContent="Number must be positive",s.style.display="block");break;case"boolean":["Yes","No"].includes(n)||(r=!1,o.style.border="1px solid red",s.textContent="Please select an option",s.style.display="block");break;case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(r=!1,o.style.border="1px solid red",s.textContent="Please enter a valid email address",s.style.display="block");break;case"tel":/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(n)||(r=!1,o.style.border="1px solid red",s.textContent="Please enter a valid phone number",s.style.display="block")}else r=!1,o.style.border="1px solid red",s.textContent="This field is required",s.style.display="block";if(r){var a=document.querySelector(".".concat(b.av," .").concat(b._3)),i=document.createElement("div");i.textContent="".concat(e.text,": ").concat(n),i.className=v.ZF,a.appendChild(i);var c="".concat(e.text,": ").concat(n);A.push(c),R(),t.innerHTML="",P()}})),n.appendChild(r),n.appendChild(o),n.appendChild(s),n.appendChild(d),t.appendChild(n)}(e);else if((null===(d=e.answers)||void 0===d?void 0:d.length)>0||(null===(p=e.subQuestions)||void 0===p?void 0:p.length)>0){var h,f;A.includes(e.text)||(A.push(e.text),R()),L.push(e);var g=[];(null===(h=e.answers)||void 0===h?void 0:h.length)>0&&e.answers.forEach((function(e){g.push(O(O({},e),{},{onClick:function(){I(),B(e,!1)}}))})),(null===(f=e.subQuestions)||void 0===f?void 0:f.length)>0&&e.subQuestions.forEach((function(e){g.push(O(O({},e),{},{onClick:function(){I(),B(e,!1)}}))})),M(g)}else P()}}}function M(e){var t=document.querySelector(".".concat(b.av," .").concat(b.XB," .").concat(b.lj));if(t.innerHTML="",e.length>0){var n=document.createElement("div");e.forEach((function(e){var t=document.createElement("button");t.textContent=e.text||e.statement,t.className=v.Yq,t.addEventListener("click",e.onClick),n.appendChild(t)})),t.appendChild(n)}else P()}function P(){var e=document.querySelector(".".concat(b.av," .").concat(b.XB," .").concat(b.lj));e.innerHTML="";var t=document.createElement("button");t.textContent="Start Over",t.className=v.QN,j(),t.addEventListener("click",(function(){B(N,!0)})),e.appendChild(t)}function R(){var e=document.querySelector(".".concat(b.av," .").concat(b._3));e.innerHTML="",A.forEach((function(t){var n=document.createElement("div");n.textContent=t,n.classList.add(v.xg),e.appendChild(n)}))}var U="j7hD9nXt3QpLvFz1uY6j7m2";function D(e){return q.apply(this,arguments)}function q(){return q=k(x().mark((function e(t){var n,o,r,s,a,i,c,l,d,p=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,e.prev=1,o=localStorage.getItem("tezkit_token"),r=localStorage.getItem("tezkit_app_data"),s=JSON.parse(r),console.log("srrsedfsdfsdtezkit_app_pdata",s),a=new Headers,i=null,t.version=s.settings.version,t.app_type=s.settings.app_type,t.tenant=s.tenant_id,console.log("can we add new requirments to  new_rply_msg_obj"),"V1"===s.settings.version?(a.append("Authorization",o),i=JSON.stringify({data:t,uid:n.id})):i=JSON.stringify({data:t,uid:n.uid}),a.append("Content-Type","application/json"),c={method:"POST",headers:a,body:i,redirect:"follow"},e.next=17,fetch("https://chats.".concat("magicchat.io","/").concat("prod","/add_chat"),c);case 17:return l=e.sent,e.next=20,l.text();case 20:d=e.sent,console.log(d),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[1,24]])}))),q.apply(this,arguments)}var F=function(){var e=k(x().mark((function e(t,n,o,r){var s,a,i,c,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new Headers).append("X-API-Key",t),a={method:"GET",headers:s,redirect:"follow"},e.prev=3,e.next=6,fetch("https://auth.".concat("magicchat.io","/").concat("prod","/does_user_exist?app_name=").concat(n,"&uid=").concat(o,"&tenant=").concat(r),a);case 6:return i=e.sent,e.next=9,i.text();case 9:return c=e.sent,console.log("result",c,C(c)),l=JSON.parse(c),console.log("Parsed result",l),e.abrupt("return",l);case 16:throw e.prev=16,e.t0=e.catch(3),console.error("Error:",e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n,o,r){return e.apply(this,arguments)}}();function z(e,t){console.log("hwomanytimes",t);var n="".concat(Date.now().toString().slice(-5)).concat(Math.floor(10*Math.random()));return console.log(n),"msg_id__"+n}n.p,n.p;var H=n(860),J={};J.styleTagTransform=y(),J.setAttributes=h(),J.insert=p().bind(null,"head"),J.domAPI=l(),J.insertStyleElement=g(),i()(H.A,J),H.A&&H.A.locals&&H.A.locals;var W=n(600),V={};V.styleTagTransform=y(),V.setAttributes=h(),V.insert=p().bind(null,"head"),V.domAPI=l(),V.insertStyleElement=g(),i()(W.Ay,V),W.Ay&&W.Ay.locals&&W.Ay.locals;const G=Object.create(null);G.open="0",G.close="1",G.ping="2",G.pong="3",G.message="4",G.upgrade="5",G.noop="6";const Y=Object.create(null);Object.keys(G).forEach((e=>{Y[G[e]]=e}));const X={type:"error",data:"parser error"},Z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Q="function"==typeof ArrayBuffer,K=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$=({type:e,data:t},n,o)=>Z&&t instanceof Blob?n?o(t):ee(t,o):Q&&(t instanceof ArrayBuffer||K(t))?n?o(t):ee(new Blob([t]),o):o(G[e]+(t||"")),ee=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function te(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ne;const oe="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)oe["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const re="function"==typeof ArrayBuffer,se=(e,t)=>{if("string"!=typeof e)return{type:"message",data:ie(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:ae(e.substring(1),t)}:Y[n]?e.length>1?{type:Y[n],data:e.substring(1)}:{type:Y[n]}:X},ae=(e,t)=>{if(re){const n=(e=>{let t,n,o,r,s,a=.75*e.length,i=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<i;t+=4)n=oe[e.charCodeAt(t)],o=oe[e.charCodeAt(t+1)],r=oe[e.charCodeAt(t+2)],s=oe[e.charCodeAt(t+3)],d[c++]=n<<2|o>>4,d[c++]=(15&o)<<4|r>>2,d[c++]=(3&r)<<6|63&s;return l})(e);return ie(n,t)}return{base64:!0,data:e}},ie=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ce=String.fromCharCode(30);let le;function de(e){return e.reduce(((e,t)=>e+t.length),0)}function pe(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let r=0;r<t;r++)n[r]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function ue(e){if(e)return function(e){for(var t in ue.prototype)e[t]=ue.prototype[t];return e}(e)}ue.prototype.on=ue.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ue.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},ue.prototype.off=ue.prototype.removeListener=ue.prototype.removeAllListeners=ue.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<o.length;r++)if((n=o[r])===t||n.fn===t){o.splice(r,1);break}return 0===o.length&&delete this._callbacks["$"+e],this},ue.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){o=0;for(var r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t)}return this},ue.prototype.emitReserved=ue.prototype.emit,ue.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ue.prototype.hasListeners=function(e){return!!this.listeners(e).length};const he="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),fe="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ge(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const me=fe.setTimeout,ye=fe.clearTimeout;function ve(e,t){t.useNativeTimers?(e.setTimeoutFn=me.bind(fe),e.clearTimeoutFn=ye.bind(fe)):(e.setTimeoutFn=fe.setTimeout.bind(fe),e.clearTimeoutFn=fe.clearTimeout.bind(fe))}function _e(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class be extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class we extends ue{constructor(e){super(),this.writable=!1,ve(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new be(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=se(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class xe extends we{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(ce),o=[];for(let e=0;e<n.length;e++){const r=se(n[e],t);if(o.push(r),"error"===r.type)break}return o})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,o=new Array(n);let r=0;e.forEach(((e,s)=>{$(e,!1,(e=>{o[s]=e,++r===n&&t(o.join(ce))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=_e()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Ce=!1;try{Ce="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const Ee=Ce;function ke(){}class Se extends xe{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Oe extends ue{constructor(e,t,n){super(),this.createRequest=e,ve(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=ge(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=Oe.requestsCount++,Oe.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=ke,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Oe.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function Te(){for(let e in Oe.requests)Oe.requests.hasOwnProperty(e)&&Oe.requests[e].abort()}Oe.requestsCount=0,Oe.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Te):"function"==typeof addEventListener&&addEventListener("onpagehide"in fe?"pagehide":"unload",Te,!1));const Le=function(){const e=Ae({xdomain:!1});return e&&null!==e.responseType}();function Ae(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Ee))return new XMLHttpRequest}catch(e){}if(!t)try{return new(fe[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const Ne="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Ie extends we{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Ne?{}:ge(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],o=t===e.length-1;$(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}o&&he((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=_e()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const je=fe.WebSocket||fe.MozWebSocket,Be={websocket:class extends Ie{createSocket(e,t,n){return Ne?new je(e,t,n):t?new je(e,t):new je(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends we{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){le||(le=new TextDecoder);const n=[];let o=0,r=-1,s=!1;return new TransformStream({transform(a,i){for(n.push(a);;){if(0===o){if(de(n)<1)break;const e=pe(n,1);s=!(128&~e[0]),r=127&e[0],o=r<126?3:126===r?1:2}else if(1===o){if(de(n)<2)break;const e=pe(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),o=3}else if(2===o){if(de(n)<8)break;const e=pe(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){i.enqueue(X);break}r=s*Math.pow(2,32)+t.getUint32(4),o=3}else{if(de(n)<r)break;const e=pe(n,r);i.enqueue(se(s?e:le.decode(e),t)),o=0}if(0===r||r>e){i.enqueue(X);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),o=new TransformStream({transform(e,t){!function(e,t){Z&&e.data instanceof Blob?e.data.arrayBuffer().then(te).then(t):Q&&(e.data instanceof ArrayBuffer||K(e.data))?t(te(e.data)):$(e,!1,(e=>{ne||(ne=new TextEncoder),t(ne.encode(e))}))}(e,(n=>{const o=n.length;let r;if(o<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,o);else if(o<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,o)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(o))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}});o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const r=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),r())})).catch((e=>{}))};r();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],o=t===e.length-1;this._writer.write(n).then((()=>{o&&he((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Se{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Le&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Oe(Ae,this.uri(),e)}}},Me=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Pe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Re(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let r=Me.exec(e||""),s={},a=14;for(;a--;)s[Pe[a]]=r[a]||"";return-1!=n&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,o){t&&(n[t]=o)})),n}(0,s.query),s}const Ue="function"==typeof addEventListener&&"function"==typeof removeEventListener,De=[];Ue&&addEventListener("offline",(()=>{De.forEach((e=>e()))}),!1);class qe extends ue{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=Re(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Re(t.host).host);ve(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,o=n.length;e<o;e++){let o=n[e].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),Ue&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},De.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&qe.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",qe.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(e+="string"==typeof(t=o)?function(e){let t=0,n=0;for(let o=0,r=e.length;o<r;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,he((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(qe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ue&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=De.indexOf(this._offlineEventListener);-1!==e&&De.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}qe.protocol=4;class Fe extends qe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;qe.priorWebsocketSuccess=!1;const o=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;qe.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,l(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function a(){s("transport closed")}function i(){s("socket closed")}function c(e){t&&e.name!==t.name&&r()}const l=()=>{t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",a),this.off("close",i),this.off("upgrading",c)};t.once("open",o),t.once("error",s),t.once("close",a),this.once("close",i),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class ze extends Fe{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>Be[e])).filter((e=>!!e))),super(e,n)}}const He="function"==typeof ArrayBuffer,Je=Object.prototype.toString,We="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Je.call(Blob),Ve="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Je.call(File);function Ge(e){return He&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||We&&e instanceof Blob||Ve&&e instanceof File}function Ye(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Ye(e[t]))return!0;return!1}if(Ge(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Ye(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Ye(e[t]))return!0;return!1}function Xe(e){const t=[],n=e.data,o=e;return o.data=Ze(n,t),o.attachments=t.length,{packet:o,buffers:t}}function Ze(e,t){if(!e)return e;if(Ge(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=Ze(e[o],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=Ze(e[o],t));return n}return e}function Qe(e,t){return e.data=Ke(e.data,t),delete e.attachments,e}function Ke(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ke(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ke(e[n],t));return e}const $e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],et=5;var tt;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(tt||(tt={}));class nt{constructor(e){this.replacer=e}encode(e){return e.type!==tt.EVENT&&e.type!==tt.ACK||!Ye(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===tt.EVENT?tt.BINARY_EVENT:tt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==tt.BINARY_EVENT&&e.type!==tt.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Xe(e),n=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(n),o}}function ot(e){return"[object Object]"===Object.prototype.toString.call(e)}class rt extends ue{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===tt.BINARY_EVENT;n||t.type===tt.BINARY_ACK?(t.type=n?tt.EVENT:tt.ACK,this.reconstructor=new st(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Ge(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===tt[n.type])throw new Error("unknown packet type "+n.type);if(n.type===tt.BINARY_EVENT||n.type===tt.BINARY_ACK){const o=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(o,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const o=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(o,t)}else n.nsp="/";const o=e.charAt(t+1);if(""!==o&&Number(o)==o){const o=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(!rt.isPayloadValid(n.type,o))throw new Error("invalid payload");n.data=o}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case tt.CONNECT:return ot(t);case tt.DISCONNECT:return void 0===t;case tt.CONNECT_ERROR:return"string"==typeof t||ot(t);case tt.EVENT:case tt.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===$e.indexOf(t[0]));case tt.ACK:case tt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class st{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Qe(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function at(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const it=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ct extends ue{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[at(e,"open",this.onopen.bind(this)),at(e,"packet",this.onpacket.bind(this)),at(e,"error",this.onerror.bind(this)),at(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,o,r;if(it.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:tt.EVENT,data:t,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),s.id=e}const a=null===(o=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===o?void 0:o.writable,i=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!a||(i?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var n;const o=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===o)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),o),s=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...t){return new Promise(((n,o)=>{const r=(e,t)=>e?o(e):n(t);r.withError=!0,t.push(r),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...o)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...o)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case tt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case tt.EVENT:case tt.BINARY_EVENT:this.onevent(e);break;case tt.ACK:case tt.BINARY_ACK:this.onack(e);break;case tt.DISCONNECT:this.ondisconnect();break;case tt.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...o){n||(n=!0,t.packet({type:tt.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function lt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}lt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},lt.prototype.reset=function(){this.attempts=0},lt.prototype.setMin=function(e){this.ms=e},lt.prototype.setMax=function(e){this.max=e},lt.prototype.setJitter=function(e){this.jitter=e};class dt extends ue{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ve(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new lt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const o=t.parser||s;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ze(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=at(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=at(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{o(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(o),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(at(e,"ping",this.onping.bind(this)),at(e,"data",this.ondata.bind(this)),at(e,"error",this.onerror.bind(this)),at(e,"close",this.onclose.bind(this)),at(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){he((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new ct(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const pt={};function ut(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),o=Re(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const r=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port+t,o.href=o.protocol+"://"+r+(n&&n.port===o.port?"":":"+o.port),o}(e,(t=t||{}).path||"/socket.io"),o=n.source,r=n.id,s=n.path,a=pt[r]&&s in pt[r].nsps;let i;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?i=new dt(o,t):(pt[r]||(pt[r]=new dt(o,t)),i=pt[r]),n.query&&!t.query&&(t.query=n.queryKey),i.socket(n.path,t)}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(){mt=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),i=new A(o||[]);return r(a,"_invoke",{value:S(e,n,i)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",h="suspendedYield",f="executing",g="completed",m={};function y(){}function v(){}function _(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(N([])));x&&x!==n&&o.call(x,a)&&(b=x);var C=_.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,s,a,i){var c=p(e[r],e,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==_t(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,i)}),(function(e){n("throw",e,a,i)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,i)}))}i(c.arg)}var s;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return s=s?s.then(r,r):r()}})}function S(t,n,o){var r=u;return function(s,a){if(r===f)throw Error("Generator is already running");if(r===g){if("throw"===s)throw a;return{value:e,done:!0}}for(o.method=s,o.arg=a;;){var i=o.delegate;if(i){var c=O(i,o);if(c){if(c===m)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===u)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var l=p(t,n,o);if("normal"===l.type){if(r=o.done?g:h,l.arg===m)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(r=g,o.method="throw",o.arg=l.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var s=p(r,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(_t(t)+" is not iterable")}return v.prototype=_,r(C,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:v,configurable:!0}),v.displayName=l(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,o,r,s){void 0===s&&(s=Promise);var a=new k(d(e,n,o,r),s);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return i.type="throw",i.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;L(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:N(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function yt(e,t,n,o,r,s,a){try{var i=e[s](a),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(o,r)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var s=e.apply(t,n);function a(e){yt(s,o,r,a,i,"next",e)}function i(e){yt(s,o,r,a,i,"throw",e)}a(void 0)}))}}function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function bt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,xt(o.key),o)}}function wt(e,t,n){return(t=xt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){var t=function(e){if("object"!=_t(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_t(t)?t:t+""}Object.assign(ut,{Manager:dt,Socket:ct,io:ut,connect:ut}),console.log("laodededc the coreupdatedhis?dsd");var Ct=null,Et=JSON.parse(localStorage.getItem("global_settings"));Et&&(Ct=Et.multi_admin.settings.feature.enable);var kt=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wt(this,"MOBILE_WIDTH",769),wt(this,"closeChatBox",(function(){if(console.log("does this happen only on close?",n.state.is_chat_content_modal_open),n.state.is_chat_content_modal_open){n.state.is_chat_content_modal_open=!1;var e=JSON.parse(localStorage.getItem("tezkit_app_data")),t=n.state.p2a_connection_with;if(Ct&&"P2A"==e.settings.app_type&&t){console.log(t,"tezkit_app_dsdfatasdfsdf",n.state.loggedInUser);var o={tenant_name:e.tenant_id,app_name:e.app_name,version:e.settings.version,client_id:n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id,support_id:t.user_id,user_type:t.user_type};console.log(o,"tezkit_app_datasdfsdf"),fetch("https://auth.".concat("magicchat.io","/").concat("prod","/remove_p2a_user_id"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.text()})).then((function(e){console.log("Remove API Success:",e),e&&n.state.socket.emit("REQUEST_FOR_AGENT_AVAILIBILTY",{room:"support_for__"+t.user_id,status:"CONNECTION_DISCONNECTED"})})).catch((function(e){console.error("Remove API Error:",e)}))}}})),wt(this,"incrementNotificationsCount",(function(){console.log("being called isnt it?");var e=document.getElementById("unread_chat_msgs_num");e.textContent=Number(e.textContent)+1})),wt(this,"updateAdminLSStatusAtClient",(function(e){var t=document.querySelector("#statusElement > .user_status_cir");if(console.log("gota trigger ls",t,e,_t(e)),t)if(t.style.width="16px",t.style.height="16px",t.style.borderRadius="50%","ONLINE"===e&&(t.textContent="",t.style.background="green"),"AWAY"===e)t.textContent="",t.style.background="yellow";else if("OFFLINE"===e){t.textContent="",t.style.background="#a99bbe";var n="chatModal__"+U;document.getElementById(n).querySelector(".chat_notice").textContent=""}})),wt(this,"updateUserListLSStatusAtClient",(function(e){if(console.log("does it ran when user went away?",this),this.state.activeWindowObj)if(console.log(e,_t(e),e.live_status,this.state.activeWindowObj,"will see if the right window is open and will update the cir in it's header"),e&&e.hasOwnProperty("frm_user")&&e.hasOwnProperty("live_status")){console.log("sdfsdfsdfsfdata.frm_user1",e);var t=e.frm_user.hasOwnProperty("uid")?e.frm_user.uid:e.frm_user.id;console.log("asfhasdgsadf?");var n=this.state.activeWindowObj.hasOwnProperty("uid")?this.state.activeWindowObj.uid:this.state.activeWindowObj.id;if(console.log(n,"frm_user_idcrnt_window_id",t),t==n){var o=document.querySelector("#statusElement > .user_status_cir");console.log(e.live_status,"statusElemensdftsdfsdsdf",o),"AWAY"===e.live_status?(o.textContent="",o.style.background="yellow"):"ONLINE"===e.live_status?(o.textContent="",o.style.background="green"):"OFFLINE"===e.live_status&&(o.textContent="",o.style.background="grey")}}else console.error("Both are mandatory",e,_t(e),!e.frm_user,e.frm_user);else console.log("window was not opened!")})),wt(this,"showNoticeMsg",(function(e,t){var n=document.createElement("div");n.textContent=e||"Feel Free to Shoot what's on your mind!",t.appendChild(n),t.style.opacity="1",t.style.display="block",t.classList.add("welcomemsg");var o=0,r=setInterval((function(){o>=1?clearInterval(r):(o+=.05,t.style.opacity=o)}),50);setTimeout((function(){var e=1,n=setInterval((function(){e<=0?(clearInterval(n),t.style.display="none"):(e-=.05,t.style.opacity=e)}),50)}),5e3)})),wt(this,"setglobalMsgsBucketInput",function(){var e=vt(mt().mark((function e(t,n){var o,r=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.length>2&&void 0!==r[2]?r[2]:"input",console.log("what is in is it running!!",t,n,o,chat_core.state.globalMsgsBucket),"input"==o?chat_core.state.globalMsgsBucket["user__"+n].input=t:console.error("nothing matched! - "+o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"updateLiveStatus",function(){var e=vt(mt().mark((function e(t,n){var o,r,s,a,i=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=localStorage.getItem("tezkit_app_data"),console.log("edrgndgndfgtezkit_app_datafdg",o),r=null,o&&(r=JSON.parse(o)),console.log("chat_core.stateGTFHDFGHvsdfsd",r.tenant_info.id),s=JSON.parse(t),console.log("chat_core.asgassdfsdbodyObjfsadf",this.state.p2a_connection_with),a=gt({app_name:r.app_name,version:r.settings.version,app_type:r.settings.app_type,tenant_id:r.tenant_info.id,connected_with:this.state.p2a_connection_with},s),this.state.socket&&(this.state.socket.connected?this.state.socket.emit("ON_USER_LIVE_STATUS",a):this.state.socket.once("connect",(function(){i.state.socket.emit("ON_USER_LIVE_STATUS",a)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"setAdminLSData",function(){var e=vt(mt().mark((function e(t,n){var o,r,s,a,i,c,l,d,p,u,h,f,g;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.tenantName,r=t.otherUserId,s=t.user_type,a=t.api_key,i=t.appName,c=t.version,l=t.current_apptype,null,d="P2A"==l?new URLSearchParams({user_type:s,tenant_name:o,user_id:r}):new URLSearchParams({user_type:s,tenant_name:o,user_id:r,app_name:i,version:c,app_type:l}),p="https://livestatus.".concat("magicchat.io","/").concat("prod","/get_app"),u="".concat(p,"?").concat(d),localStorage.getItem("tezkit_token"),h={method:"GET",headers:{Accept:"*/*","x-api-key":a},redirect:"follow"},e.prev=8,e.next=11,fetch(u,h);case 11:if((f=e.sent).ok){e.next=14;break}throw new Error("HTTP error! Status: ".concat(f.status));case 14:return e.next=16,f.json();case 16:return g=e.sent,console.log("Result:",g),n(g),e.abrupt("return",g);case 22:throw e.prev=22,e.t0=e.catch(8),console.error("Error fetching data:",e.t0),e.t0;case 26:case"end":return e.stop()}}),e,null,[[8,22]])})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"init",(function(e,t){console.log("here is incoing in init?",e,t);var o=localStorage.getItem("tezkit_app_data");if(console.log("initialized1111111",o),o){var r,s=JSON.parse(o);console.log("initializetezkit_app_p_datad2222222",n.state.loggedInUser.email),r=JSON.stringify({live_status:"ONLINE",version:s.settings.version,tenant:s.tenant_id,frm_user:{id:n.state.loggedInUser.uid?n.state.loggedInUser.uid:n.state.loggedInUser.id}});var a={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":s.auth_key,"Content-Type":"application/json"};if(n.isFeatureEnabled(s.feature,"live_status","client_push_admin")){console.log("arewer erewrsdfsd?",s),console.log(n.state.loggedInUser,"arewer erewrupda?",s.settings.version),console.log(n.state.loggedInUser,"sdfsdarewer erewr?",n.state.loggedInUser.id);var i=n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id,c={app_type:s.settings.app_type,app_name:s.app_name,version:s.settings.version,user_id:i};"P2P"==s.settings.app_type?console.log("arewe heredyContent in away handler",r):"P2A"==s.settings.app_type&&(c.tenant_id=n.state.loggedInUser.tenant_info.id,console.log("here is updatedls_payload",c)),n.updateLiveStatus(r,a,c)}console.log("arwerhere?sdfsadfasd"),n.initializeSocketConnection(e,s,{name_idn:"V1"!=s.settings.version?"uid":"id"}),console.log("exit intit????")}})),wt(this,"createUserChatHeader",(function(e){var t=localStorage.getItem("tezkit_app_data");if(t)return JSON.parse(t),n.createChatUserHeader()})),wt(this,"createChatUserHeader",(function(){var e=document.createElement("div");e.className=b.us;var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center";var n=document.createElement("button");n.id="backButton",n.classList=b.l3,n.textContent=" Back";var o=document.createElement("h3");o.id="loginMessage";var r=document.createElement("span");r.id="statusElement",r.style.marginLeft="10px";var s=document.createElement("div");s.className="user_status_cir",s.style.backgroundColor="white",s.style.border="1px solid grey";var a=document.createElement("div");a.className="user_status_text",r.appendChild(s),r.appendChild(a);var i=document.createElement("span");return i.id="typingStatusElm",t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(i),e.appendChild(t),e})),wt(this,"createChatBotHeader",(function(){var e=document.createElement("div");e.className=b.SZ,e.style.flexShrink="0";var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center";var n=document.createElement("h3");return n.id="loginMessage",n.textContent="AI Bot",t.appendChild(n),e.appendChild(t),e})),wt(this,"createToggleOrCloseButton",(function(e,t,o){console.log("logout_modefsdfsfsdf",o);var r=null;if("P2A"===e.settings.app_type)if(o)(r=document.createElement("button")).className=b.JY,r.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.2995 14L27.3164 3.98307C28.2279 3.07161 28.2279 1.59505 27.3164 0.683594C26.4049 -0.227865 24.9284 -0.227865 24.0169 0.683594L14 10.7005L3.98307 0.683594C3.07161 -0.227865 1.59505 -0.227865 0.683594 0.683594C-0.227865 1.59505 -0.227865 3.07161 0.683594 3.98307L10.7005 14L0.683594 24.0169C-0.227865 24.9284 -0.227865 26.4049 0.683594 27.3164C1.13932 27.7721 1.73633 28 2.33333 28C2.93034 28 3.52734 27.7721 3.98307 27.3164L14 17.2995L24.0169 27.3164C24.4727 27.7721 25.0697 28 25.6667 28C26.2637 28 26.8607 27.7721 27.3164 27.3164C28.2279 26.4049 28.2279 24.9284 27.3164 24.0169L17.2995 14Z" fill="white"/>\n</svg>',r.addEventListener("click",(function(){console.log("Closing Chat Modal",n),n.minimizeChatModal()}));else{console.log("Initial viewType:",n.state.viewType),(r=document.createElement("button")).id="close-btn__".concat(t),r.className=b.Iv;var s=document.createElement("div");s.setAttribute("id","bi_wrapper"),s.innerHTML='<svg width="36" height="34" viewBox="0 0 36 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.5792 26.2122C15.5759 25.0376 15.8056 23.8741 16.2551 22.789C16.7046 21.7038 17.3649 20.7187 18.1979 19.8906C18.9905 19.069 19.945 18.4208 21.0011 17.9872C20.9094 17.9499 20.8105 17.9336 20.7116 17.9396C20.6128 17.9456 20.5166 17.9737 20.4301 18.0218C18.9267 18.9604 17.19 19.458 15.4177 19.458C13.6454 19.458 11.9087 18.9604 10.4054 18.0218C10.3374 17.979 10.2611 17.9513 10.1815 17.9403C10.1019 17.9294 10.0209 17.9355 9.94394 17.9583C9.84588 17.9583 3.96258 19.9598 3.778 20.0002C2.678 20.3657 1.72103 21.0684 1.04289 22.0084C0.364745 22.9485 -0.000141409 24.0782 4.11101e-08 25.2374V30.3304C4.11101e-08 32.0262 1.3324 33.9988 3.05124 33.9988H20.1417C19.4258 33.6051 18.7694 33.1118 18.1921 32.5337C17.3606 31.7049 16.7015 30.7195 16.253 29.6344C15.8046 28.5494 15.5756 27.3862 15.5792 26.2122Z" fill="white"/>\n        <path d="M17.3325 18.0794C21.7959 17.021 24.5562 12.5448 23.4978 8.0814C22.4394 3.61804 17.9631 0.857764 13.4997 1.91615C9.03628 2.97453 6.27597 7.45078 7.33437 11.9141C8.39277 16.3775 12.8691 19.1378 17.3325 18.0794Z" fill="white"/>\n        <path d="M30.0218 20.7097C29.0054 19.6928 27.7274 18.9772 26.3294 18.6422C24.9313 18.3071 23.4678 18.3656 22.1009 18.8113C20.7341 19.257 19.5174 20.0724 18.5855 21.1671C17.6537 22.2619 17.0431 23.5933 16.8216 25.0138C16.6 26.4342 16.776 27.8883 17.3301 29.2148C17.8843 30.5414 18.7949 31.6886 19.961 32.5294C21.1272 33.3702 22.5034 33.8717 23.9371 33.9784C25.3708 34.085 26.806 33.7926 28.0837 33.1336L31.2273 33.5835C31.3158 33.595 31.4058 33.586 31.4904 33.5574C31.575 33.5288 31.6519 33.4813 31.7154 33.4184C31.7788 33.3555 31.827 33.279 31.8564 33.1947C31.8857 33.1104 31.8955 33.0204 31.8848 32.9318L31.4349 29.7825C32.1864 28.3145 32.4544 26.6464 32.2006 25.0168C31.9468 23.3872 31.1841 21.8796 30.0218 20.7097ZM20.4758 27.0774C20.2463 27.0774 20.0263 26.9862 19.864 26.824C19.7018 26.6617 19.6106 26.4417 19.6106 26.2122C19.6106 25.9827 19.7018 25.7627 19.864 25.6004C20.0263 25.4382 20.2463 25.347 20.4758 25.347C20.7053 25.347 20.9253 25.4382 21.0876 25.6004C21.2498 25.7627 21.341 25.9827 21.341 26.2122C21.341 26.4417 21.2498 26.6617 21.0876 26.824C20.9253 26.9862 20.7053 27.0774 20.4758 27.0774ZM24.5134 27.0774C24.2839 27.0774 24.0638 26.9862 23.9016 26.824C23.7393 26.6617 23.6482 26.4417 23.6482 26.2122C23.6482 25.9827 23.7393 25.7627 23.9016 25.6004C24.0638 25.4382 24.2839 25.347 24.5134 25.347C24.7428 25.347 24.9629 25.4382 25.1252 25.6004C25.2874 25.7627 25.3786 25.9827 25.3786 26.2122C25.3786 26.4417 25.2874 26.6617 25.1252 26.824C24.9629 26.9862 24.7428 27.0774 24.5134 27.0774ZM28.5509 27.0774C28.3215 27.0774 28.1014 26.9862 27.9392 26.824C27.7769 26.6617 27.6857 26.4417 27.6857 26.2122C27.6857 25.9827 27.7769 25.7627 27.9392 25.6004C28.1014 25.4382 28.3215 25.347 28.5509 25.347C28.7804 25.347 29.0005 25.4382 29.1627 25.6004C29.325 25.7627 29.4161 25.9827 29.4161 26.2122C29.4161 26.4417 29.325 26.6617 29.1627 26.824C29.0005 26.9862 28.7804 27.0774 28.5509 27.0774Z" fill="white"/>\n        </svg>\n              ';var a=document.createElement("div");a.setAttribute("id","ui_wrapper"),a.innerHTML='<svg width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M34.8535 17.25V26.907C35.5448 26.3068 36.0992 25.565 36.4792 24.732C36.8591 23.899 37.0557 22.9941 37.0557 22.0785C37.0557 21.1629 36.8591 20.258 36.4792 19.425C36.0992 18.592 35.5448 17.8502 34.8535 17.25ZM17.7332 5.43292V8.54467H19.3447V5.43292C19.9818 5.2397 20.5282 4.82399 20.8844 4.26156C21.2406 3.69914 21.3828 3.02745 21.2851 2.36892C21.1874 1.7104 20.8564 1.1089 20.3523 0.674062C19.8482 0.239222 19.2047 0 18.5389 0C17.8732 0 17.2296 0.239222 16.7256 0.674062C16.2215 1.1089 15.8904 1.7104 15.7928 2.36892C15.6951 3.02745 15.8373 3.69914 16.1935 4.26156C16.5497 4.82399 17.0961 5.2397 17.7332 5.43292ZM33.2331 16.2345C33.1351 14.5919 32.4142 13.0486 31.2174 11.9192C30.0206 10.7899 28.4381 10.1596 26.7926 10.157H10.2845C8.63897 10.1596 7.05643 10.7899 5.85965 11.9192C4.66286 13.0486 3.94197 14.5919 3.844 16.2345C3.83594 16.3555 3.83594 27.5515 3.83594 27.5515C3.83914 29.2607 4.51956 30.8991 5.7282 32.1077C6.93685 33.3164 8.5752 33.9968 10.2845 34H26.7926C28.4381 33.9974 30.0206 33.3671 31.2174 32.2378C32.4142 31.1084 33.1351 29.5651 33.2331 27.9225C33.2411 27.8015 33.2411 16.3579 33.2331 16.2345ZM9.39886 18.58C9.41748 17.7576 9.75724 16.9752 10.3454 16.4002C10.9336 15.8252 11.7235 15.5032 12.5461 15.5032C13.3687 15.5032 14.1586 15.8252 14.7468 16.4002C15.335 16.9752 15.6747 17.7576 15.6933 18.58C15.6801 19.4061 15.3427 20.1939 14.7538 20.7734C14.165 21.3529 13.3719 21.6777 12.5457 21.6777C11.7195 21.6777 10.9264 21.3529 10.3376 20.7734C9.74872 20.1939 9.41209 19.4061 9.39886 18.58ZM26.107 26.9869C25.1728 28.0872 24.0141 28.9751 22.7087 29.591C21.4034 30.207 19.9814 30.5368 18.5381 30.5584C17.0949 30.5365 15.673 30.2066 14.3677 29.5906C13.0624 28.9747 11.9037 28.0869 10.9693 26.9869C10.8425 26.8214 10.7849 26.6131 10.8085 26.406C10.8322 26.1989 10.9353 26.009 11.0962 25.8763C11.2571 25.7437 11.4631 25.6787 11.6709 25.6949C11.8788 25.7111 12.0722 25.8073 12.2106 25.9633C12.9921 26.8823 13.9609 27.6238 15.0521 28.1382C16.1434 28.6526 17.3319 28.928 18.5381 28.946C19.7446 28.9292 20.9335 28.6543 22.0249 28.1398C23.1163 27.6253 24.0849 26.8832 24.8657 25.9633C25.0034 25.8049 25.1975 25.7065 25.4068 25.6892C25.616 25.6718 25.8237 25.7369 25.9856 25.8705C26.1475 26.0041 26.2508 26.1957 26.2735 26.4044C26.2962 26.6131 26.2364 26.8216 26.107 26.9869ZM24.535 21.7321C20.3779 21.6272 20.3795 15.5328 24.535 15.4287C25.3621 15.442 26.1509 15.7798 26.7312 16.3695C27.3114 16.9591 27.6366 17.7532 27.6366 18.5804C27.6366 19.4077 27.3114 20.2017 26.7312 20.7914C26.1509 21.381 25.3621 21.7188 24.535 21.7321Z" fill="white"/>\n        <path d="M14.082 18.58C14.0728 18.1789 13.907 17.7974 13.6201 17.5169C13.3332 17.2365 12.9479 17.0795 12.5467 17.0795C12.1455 17.0795 11.7602 17.2365 11.4733 17.5169C11.1864 17.7974 11.0206 18.1789 11.0114 18.58C11.0206 18.9811 11.1864 19.3627 11.4733 19.6431C11.7602 19.9235 12.1455 20.0805 12.5467 20.0805C12.9479 20.0805 13.3332 19.9235 13.6201 19.6431C13.907 19.3627 14.0728 18.9811 14.082 18.58ZM24.5368 17.0403C24.1284 17.0403 23.7368 17.2025 23.448 17.4913C23.1593 17.78 22.997 18.1717 22.997 18.58C22.997 18.9884 23.1593 19.38 23.448 19.6688C23.7368 19.9575 24.1284 20.1198 24.5368 20.1198C24.9452 20.1198 25.3368 19.9575 25.6256 19.6688C25.9143 19.38 26.0765 18.9884 26.0765 18.58C26.0765 18.1717 25.9143 17.78 25.6256 17.4913C25.3368 17.2025 24.9452 17.0403 24.5368 17.0403ZM7.62995e-05 22.0789C-0.00445002 22.9974 0.192462 23.9058 0.576943 24.7399C0.961424 25.5741 1.52412 26.3139 2.22541 26.907V17.25C1.52615 17.8451 0.964821 18.5853 0.580399 19.4192C0.195977 20.2531 -0.0015168 21.1607 7.62995e-05 22.0789Z" fill="white"/>\n        </svg>\n              ';var i=document.createElement("div");i.className=b.YL;var c=function(e){var t="bot_chat"===e;s.style.display=t?"block":"none",a.style.display=t?"none":"block",i.innerText=t?"Talk to live user":"Talk to bot"};c(n.state.viewType),r.appendChild(s),r.appendChild(a),r.appendChild(i),r.addEventListener("click",(function(){var e="bot_chat"===n.state.viewType?"user_chat":"bot_chat";n.toggleChatView(e,t),c(e)}))}else"P2P"===e.settings.app_type&&((r=document.createElement("button")).className=b.JY,r.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.2995 14L27.3164 3.98307C28.2279 3.07161 28.2279 1.59505 27.3164 0.683594C26.4049 -0.227865 24.9284 -0.227865 24.0169 0.683594L14 10.7005L3.98307 0.683594C3.07161 -0.227865 1.59505 -0.227865 0.683594 0.683594C-0.227865 1.59505 -0.227865 3.07161 0.683594 3.98307L10.7005 14L0.683594 24.0169C-0.227865 24.9284 -0.227865 26.4049 0.683594 27.3164C1.13932 27.7721 1.73633 28 2.33333 28C2.93034 28 3.52734 27.7721 3.98307 27.3164L14 17.2995L24.0169 27.3164C24.4727 27.7721 25.0697 28 25.6667 28C26.2637 28 26.8607 27.7721 27.3164 27.3164C28.2279 26.4049 28.2279 24.9284 27.3164 24.0169L17.2995 14Z" fill="white"/>\n</svg>',r.addEventListener("click",(function(){console.log("Closing P2P Chat Modal",n),n.minimizeChatModal()})));return r})),wt(this,"createChatNotice",(function(){var e=document.createElement("div");return e.className="chat_notice",e.id="chatNotice",e.style.display="none",e})),wt(this,"toggleChatView",function(){var e=vt(mt().mark((function e(t,o){var r,s,a,i,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("arewryo9u9thit?",t),document.querySelector(".".concat(b.u9)),document.querySelector(".".concat(b.av)),r=document.querySelector(".".concat(b.fP)),s=document.querySelector(".".concat(b.DW)),"user_chat"!==t){e.next=12;break}console.log("Switching to User Chat..."),r.style.display="flex",s.style.display="none",n.state.unread_messages&&n.informPeerSysAboutBULKMsgsStatus(n.state.socket,n.state.unread_messages,"READ",n.state.loggedInUser.app_name,n.state.loggedInUser.tenant_info.id),e.next=31;break;case 12:if("bot_chat"!==t){e.next=27;break}if(console.log("Switching to Bot Chat"),r.style.display="none",s.style.display="flex",i=JSON.parse(localStorage.getItem("tezkit_app_data")),1!=(null===(a=i.feature)||void 0===a||null===(a=a.live_status)||void 0===a?void 0:a.enable)){e.next=25;break}if(console.log("live_status.enable is not strictly boolean",n.state.activeWindowObj.hasOwnProperty("id")?n.state.activeWindowObj.id:n.state.activeWindowObj.uid),c=n.state.activeWindowObj.hasOwnProperty("id")?n.state.activeWindowObj.id:n.state.activeWindowObj.uid,console.log("sdfhsdfsdafsdfsdf",n.state.loggedInUser,JSON.parse(JSON.stringify(n.state.viewType))),!n.state.loggedInUser){e.next=25;break}return e.next=25,n.processAdminLiveStatus(i,c);case 25:e.next=31;break;case 27:console.log("Hiding both chat views"),r.style.display="none",s.style.display="none",console.error("Unknown viewType!");case 31:n.state.viewType=t;case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"createChatHeaderLogout",(function(e){if(console.log("aerw here?"),localStorage.getItem("tezkit_app_data")){var t=document.createElement("div");t.className=b.py;var o=n.createLogoutChatHeader();t.appendChild(o);var r=document.createElement("button");r.id="close-btn__".concat(e),r.className=b.JY,r.innerHTML='\n    <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M23.9704 1.5702C25.0639 0.476722 26.8363 0.476722 27.9298 1.5702C29.0233 2.66368 29.0233 4.43613 27.9298 5.5296L18.7094 14.75L27.9298 23.9704L28.1223 24.1826C29.0194 25.2823 28.955 26.9046 27.9298 27.9298C26.9046 28.9549 25.2824 29.0194 24.1826 28.1223L23.9704 27.9298L14.75 18.7094L5.52963 27.9298C4.43616 29.0232 2.66371 29.0232 1.57023 27.9298C0.476753 26.8363 0.476753 25.0638 1.57023 23.9704L10.7906 14.75L1.57023 5.5296C0.476753 4.43613 0.476753 2.66368 1.57023 1.5702C2.66371 0.476722 4.43616 0.476722 5.52963 1.5702L14.75 10.7906L23.9704 1.5702Z" fill="white"/>\n    </svg>\n  ',r.addEventListener("click",(function(){n.minimizeChatModal()})),t.appendChild(r);var s=document.createElement("div");return s.className="chat_notice",s.id="chatNotice",s.style.display="none",t.appendChild(s),t}})),wt(this,"showAnnouncementMessages",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,o=void 0===n?3e3:n,r=t.persistent,s=void 0!==r&&r,a=t.showCloseButton,i=void 0!==a&&a,c=t.type,l=void 0===c?"info":c,d=document.querySelector("#chat_announcement");if(d){var p={success:{backgroundColor:"#e6f4ea",color:"#1b5e20",border:"1px solid #81c784"},error:{backgroundColor:"#ffebee",color:"#b71c1c",border:"1px solid #ef9a9a"},warning:{backgroundColor:"#fff8e1",color:"#e65100",border:"1px solid #ffcc80"},info:{backgroundColor:"#f0f4ff",color:"#1a237e",border:"1px solid #90caf9"}},u=p[l]||p.info;d.innerHTML="",d.style.display="flex",d.style.backgroundColor=u.backgroundColor,d.style.justifyContent=i?"space-between":"center";var h=document.createElement("p");if(h.textContent=e,d.appendChild(h),i){var f=document.createElement("button");f.classList.add("close-btn"),f.textContent="",f.style.color=u.color,f.onclick=function(){d.style.display="none"},d.appendChild(f)}s||setTimeout((function(){d.style.display="none"}),o)}})),wt(this,"addAIPopUp",(function(e,t){var o=document.createElement("div");o.setAttribute("id","tranferChat_popup"),o.className=b.CL;var r=document.createElement("div");r.style.background="#fff",r.style.padding="20px",r.style.borderRadius="10px",r.style.textAlign="center",r.style.maxHeight="185px",r.style.maxWidth="320px";var s=document.createElement("p"),a=3==t?"I am not sure about this, Would you like me tranfer you to Live Agent?":"Would you like me tranfer you to Live Agent?";s.textContent=a,r.appendChild(s);var i={type:"BOT",message:{message:a,status:"SENT",timestamp:Date.now()}},c=JSON.parse(localStorage.getItem("tezkit_app_data"));console.log("do you have self",n),n.botAIMsgsHandler(JSON.stringify(i),c,"INCOMING");var l=document.createElement("div");l.style.display="flex",l.style.justifyContent="space-evenly",l.style.marginTop="30px";var d=document.createElement("button");d.textContent="Yes",d.style.padding="8px 16px",d.style.background="#a370ce",d.style.color="#fff",d.style.border="none",d.style.borderRadius="5px",d.onclick=function(){console.log("arewrjyou the one?",n.state.loggedInUser,c);var t=c.settings.version;if(n.state.loggedInUser){console.log("arewrwdsferwer?");var r={type:"BOT",message:{message:"Yes",status:"SENT",timestamp:Date.now()}};n.botAIMsgsHandler(JSON.stringify(r),c);var s="user_chat";n.toggleChatView(s,U),function(){var e=document.querySelector("#ui_wrapper"),t=document.querySelector("#bi_wrapper"),n=document.querySelector(".tooltip");console.log("tipsdsadfsdf",n);t.style.display="none",e.style.display="block"}(),e.removeChild(o)}else"V4"==t?(e.removeChild(o),window.magicchat_io.renderErrorPopup(["something went wrong!"],void 0,"error")):(e.removeChild(o),window.magicchat_io.renderErrorPopup(["Kindly Login First"],void 0,"error"))};var p=document.createElement("button");p.textContent="No",p.style.padding="8px 16px",p.style.background="#ccc",p.style.color="#121212",p.style.border="none",p.style.borderRadius="5px",p.onclick=function(){var t=c.settings.version;if(n.state.loggedInUser){var r={type:"BOT",message:{message:"No",status:"SENT",timestamp:Date.now()}};n.botAIMsgsHandler(JSON.stringify(r),c),e.removeChild(o)}else"V4"==t?window.magicchat_io.renderErrorPopup(["something went wrong!"],void 0,"error"):(console.error("Kindly Login First"),window.magicchat_io.renderErrorPopup(["Kindly Login First"],void 0,"error"))},l.appendChild(d),l.appendChild(p),r.appendChild(l),o.appendChild(r),e.appendChild(o)})),wt(this,"createMiddleCBWrappers",(function(){console.log("here is the middle wrapper?");var e=localStorage.getItem("tezkit_app_data");if(console.log(status,"initialized1111111",e),e){var t=JSON.parse(e);if(console.log("tezkit_app_pdatasdf  do we have na app_type",t.settings.app_type),"P2A"==t.settings.app_type){console.log("arewrwerwer?",n.state);var o=document.createElement("div");o.className=b.av;var s=document.createElement("div"),a=document.createElement("div");a.setAttribute("id","bot_thinking"),a.className=b.UI,a.innerHTML='Thinking<span class="'.concat(b.Om," ").concat(r.dot1,'">.</span>\n  <span class="').concat(b.Om," ").concat(r.dot2,'">.</span>\n  <span class="').concat(b.Om," ").concat(r.dot3,'">.</span>'),a.style.display="none",s.className=b._3,o.appendChild(s),o.appendChild(a);var i=document.createElement("div");i.className=b.u9,console.log("dssdarewhere here?");var c=document.createElement("div");c.className=b.ZX,c.id="chat_announcement",c.style.display="none",i.appendChild(c);var l=document.createElement("div");l.className=b.W8,l.id="chatBody",i.appendChild(l);var d=document.createElement("div");d.className=b.tz,d.id="typingStatusWrapper",i.appendChild(d);var p=document.createElement("div");p.className=b.bw;var u=document.createElement("button");u.className="togglerBtn",u.textContent="Toggler";var h=document.createElement("div");h.className=b.XB;var f=document.createElement("div");return f.className=b.lj,h.appendChild(f),console.log("botHistoryfdsfsf",h),o.appendChild(h),{chatBodyUserWrapper:i,chatBodyBotWrapper:o,chatFooter1:p}}if("P2P"==t.settings.app_type){console.log("arewrwerwer?",n.state);var g=document.createElement("div");g.className=b.u9;var m=document.createElement("div");m.className=b.W8,m.id="chatBody",g.appendChild(m);var y=document.createElement("div");return y.className=b.bw,{chatBodyUserWrapper:g,undefined:void 0,chatFooter1:y}}}})),wt(this,"setupUserInfo",function(){var e=vt(mt().mark((function e(t){var o,r,s,a,i,c,l,d,p,u,h,f,g,m;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=function(e){try{var t=localStorage.getItem("theme");if(!t)return;var n=JSON.parse(t).chat_box_theme;null!=n&&n.textColor&&(e.style.color=n.textColor),null!=n&&n.backgroundColor&&(e.style.backgroundColor=n.backgroundColor)}catch(e){console.error("Invalid theme in localStorage",e)}},g=function(){a.textContent="Error Loading User",i.textContent="";var e=document.createElement("div");e.textContent="Invalid User",e.style.color="red",i.appendChild(e);var t=document.querySelector(".chat_modal__j7hD9nXt3QpLvFz1uY6j7m2"),n=null==t?void 0:t.querySelector("#sendButton");n&&(n.disabled=!0,n.setAttribute("title"," disabled"))},o=document.querySelector(".chat_modal__".concat(U))){e.next=5;break}return e.abrupt("return");case 5:if(r=n.state.loggedInUser,console.log("loggedInUsersdfsdf",r),r){e.next=9;break}return e.abrupt("return");case 9:if(s=o.querySelector(".".concat(b.us)),a=s.querySelector("h3"),i=o.querySelector(".".concat(b.W8)),m(s),null!=(c=null==t?void 0:t.settings)&&c.version){e.next=16;break}return e.abrupt("return");case 16:if(l=JSON.parse(localStorage.getItem("tezkit_me")||"{}"),null,d="P2A"==c.app_type?Ct?"Searching Agent...":null!==(p=null==l||null===(u=l.tenant_info)||void 0===u?void 0:u.full_name)&&void 0!==p?p:"Admin":n.state.activeWindowObj.user_name,h=function(){var e=vt(mt().mark((function e(){var n,o,s,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth_key,o=t.app_name,s=t.tenant_id,i=r.uid,e.next=4,F(n,o,i,s);case 4:e.sent.success?(console.log("wharjwersdfsdfsdfsdf"),a.textContent=d):g();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){"P2A"===c.app_type?a.textContent=d:a.textContent=n.state.activeWindowObj.user_name},"V1"===c.version){e.next=26;break}return e.next=24,h();case 24:e.next=27;break;case 26:f();case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),wt(this,"showLoader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading",t=arguments.length>1?arguments[1]:void 0,n=document.createElement("div");n.className=W.bb;var o=document.createElement("div");o.className=W.KY;for(var r=0;r<4;r++)o.appendChild(document.createElement("div"));var s=document.createElement("div");s.innerText=e;for(var a=0;a<3;a++){var i=document.createElement("span");i.className="dot",i.textContent=".",s.appendChild(i)}n.appendChild(o),n.appendChild(s),t.appendChild(n)})),wt(this,"initializeMessageLoading",function(){var e=vt(mt().mark((function e(t,o){var r,s,a,i,c,l,d,p,u,h,f,g,m,y,v,_,b,w,x,C,E,k,S,O;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,s=!1,a=1,i=0,console.log("dowe ehave this?",n.state.activeWindowObj.id),c="V1"!=t.settings.version?n.state.activeWindowObj.uid:n.state.activeWindowObj.id,l="P2A"===t.settings.app_type?"https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(r.state.loggedInUser.app_name,"&app_type=P2A&user_type=CLIENT&page="):"https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(r.state.loggedInUser.app_name,"&app_type=P2P&other_user_id=").concat(c,"&user_type=CLIENT&page="),d=document.getElementById("chatBody"),(p=document.getElementById("loading-message"))||((p=document.createElement("div")).id="loading-message",p.className=W.ic,d.prepend(p)),u=function(){p.style.display="none"},h=function(){var e=vt(mt().mark((function e(n){var o,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(o=localStorage.getItem("tezkit_token"))||"V1"!==t.settings.version){e.next=4;break}throw new Error("Token is missing");case 4:if(s=null,"V1"!==t.settings.version){e.next=11;break}return e.next=8,fetch(n,{method:"GET",headers:{Authorization:o,Accept:"application/json"}});case 8:s=e.sent,e.next=14;break;case 11:return e.next=13,fetch("".concat(n,"&uid=").concat(r.state.loggedInUser.uid,"&other_user_id=").concat(r.state.activeWindowObj.uid),{method:"GET",headers:{Accept:"application/json","x-api-key":t.auth_key}});case 13:s=e.sent;case 14:if(s.ok){e.next=16;break}throw new Error("Failed to fetch data");case 16:return e.next=18,s.json();case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(0),console.error("Error fetching messages:",e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=vt(mt().mark((function e(){var o,c,p,f,m,y,v;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s||i>0&&a>=i)){e.next=2;break}return e.abrupt("return");case 2:return s=!0,o=document.getElementById("loading-message"),n.showLoader("Loading more messages",o),e.prev=5,c="".concat(l).concat(a+1),e.next=9,h(c);case 9:(p=e.sent)&&(i=p.pagination.total_pages||i,a=p.pagination.current_page||a+1,null!==(f=p.chats)&&void 0!==f&&f[t.app_name]&&(m="V1"===t.settings.version?r.state.activeWindowObj.id:r.state.activeWindowObj.uid,null!=(y=p.chats[t.app_name]["user__".concat(m)])&&y.msgs&&(v=y.msgs.reverse(),r.insertBulkChats(v,void 0,!0)))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("Error loading more messages:",e.t0);case 16:return e.prev=16,s=!1,u(),d.children.length>1&&(g.disconnect(),g.observe(d.children[1])),e.finish(16);case 21:case"end":return e.stop()}}),e,null,[[5,13,16,21]])})));return function(){return e.apply(this,arguments)}}(),g=new IntersectionObserver((function(e){e[0].isIntersecting&&f()}),{root:d,threshold:.1}),n.showLoader("Loading initial messages",p),e.prev=15,y="".concat(l).concat(a),e.next=19,h(y);case 19:if(v=e.sent,_=[],console.log("self.statesdfsdfs",r.state),null!=v&&null!==(m=v.chats)&&void 0!==m&&m[t.app_name]&&(w="V1"!=t.settings.version?r.state.activeWindowObj.uid:r.state.activeWindowObj.id,_=(null===(b=v.chats[t.app_name]["user__".concat(w)])||void 0===b?void 0:b.msgs)||[]),_.length){for(console.log("ddiawetehfeg?"),x=v.pagination,i=x.total_pages||1,a=x.current_page||1,C=_.filter((function(e){return"READ"!==e.message.status})),r.state.unread_messages=C,"user_chat"===r.state.viewType&&r.informPeerSysAboutBULKMsgsStatus(o,_,"READ",r.state.loggedInUser.app_name,r.state.loggedInUser.tenant_info.id),E=Array.from(d.children),k=0,S=E;k<S.length;k++)"loading-message"!==(O=S[k]).id&&d.removeChild(O);console.log("wehrjowermessages",_),r.insertBulkChats(_),d.children.length>1&&g.observe(d.children[1]),d.scrollTop=d.scrollHeight}e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),console.error("Initial message load failed:",e.t0);case 29:return e.prev=29,u(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[15,26,29,32]])})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"initializeLogout",function(){var e=vt(mt().mark((function e(t,o,r){var s,a,i,c,l,d,p,u,h,f,g,m,y;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n,e.prev=1,i="".concat(apiUrlBase).concat(currentPage),e.next=5,fetchMessages(i);case 5:if(c=e.sent,l=[],console.log("self.statesdfsdfs",s.state),null!=c&&null!==(a=c.chats)&&void 0!==a&&a[t.app_name]&&(p="V1"!=t.settings.version?s.state.activeWindowObj.uid:s.state.activeWindowObj.id,l=(null===(d=c.chats[t.app_name]["user__".concat(p)])||void 0===d?void 0:d.msgs)||[]),l.length){for(u=c.pagination,totalPages=u.total_pages||1,currentPage=u.current_page||1,h=l.filter((function(e){return"READ"!==e.message.status})),s.state.unread_messages=h,"user_chat"===s.state.viewType&&s.informPeerSysAboutBULKMsgsStatus(o,l,"READ",s.state.loggedInUser.app_name,s.state.loggedInUser.tenant_info.id),f=Array.from(chatBody.children),g=0,m=f;g<m.length;g++)"loading-message"!==(y=m[g]).id&&chatBody.removeChild(y);s.insertBulkChats(l),chatBody.children.length>1&&scrollObserver.observe(chatBody.children[1]),chatBody.scrollTop=chatBody.scrollHeight}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Initial message load failed:",e.t0);case 15:return e.prev=15,hideLoader(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,n,o){return e.apply(this,arguments)}}()),wt(this,"initiateConnectAgentReq",(function(e){var t=new Headers;t.append("Content-Type","application/json"),console.log("terwhitowersdfewr",n.state.loggedInUser.tenant_info.tenant);var o={method:"POST",headers:t,body:JSON.stringify({tenant_name:n.state.loggedInUser.tenant_info.tenant,client_id:n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id}),redirect:"follow"};fetch("https://auth.".concat("magicchat.io","/").concat("prod","/fetch_connected_support_id_info_or_null"),o).then((function(e){return e.json()})).then((function(t){console.log("resulthere",t.is_connected),t.is_connected?(console.log(n,"theire here",t.support_info.full_name,t.support_info.full_name,t.support_info.id),n.postConnAcceptanceHandler(n,{user_id:t.support_info.id,user_type:t.support_info.type,full_name:t.support_info.full_name}),n.showAnnouncementMessages("You are already connected with Agent",{duration:5e3,type:"success"}),document.querySelector("#chat_announcement").style.display="block"):(n.state.socket.emit("REQUEST_FOR_AGENT_AVAILIBILTY",{room:"global_for__"+n.state.loggedInUser.tenant_info.id,tenant_id:n.state.loggedInUser.tenant_info.id,frm_id:n.state.loggedInUser.id,version:e.settings.version,status:"PENDING"}),n.showAnnouncementMessages("Waiting for Next available Agent to join, will connect you shortly...",{persistent:!0,type:"success"}),document.querySelector("#chat_announcement"))})).catch((function(e){return console.error(e)}))})),wt(this,"renderChatModal",function(){var e=vt(mt().mark((function e(t,o,r,s,a){var i,c,l,d,p,u,h,f,g,m,y,v=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.length>5&&void 0!==v[5]&&v[5],console.log(c,"ast it breaks is logout_modesbreandh homwha7syfsdf??",n.state.loggedInUser,t.settings.version),console.log("whatewtirdgdviewType",n.state.viewType),l=document.querySelector(".chat_screen_top_wrapper"),console.log("cstwsdwsf",l),(d=document.createElement("div")).textContent="loading chat window ......",l&&l.appendChild(d),p=null===(i=t.feature)||void 0===i||null===(i=i.live_status)||void 0===i?void 0:i.enable,u=n.createChatContainer(t),h=n.createChatElements(a,c),f=h.chatWrapper,g=h.chatBodyUserWrapper,m=h.chatBodyBotWrapper,y=h.chatFooter1,d.remove(),n.assembleChatUI(u,s,f,g,m,y,c),console.log("did you fire?2"),e.next=16,n.loadInputBox(t,g,m,o,c);case 16:if(c){e.next=25;break}return e.next=19,n.initializeChatComponents(t,o,c);case 19:if(1!=p){e.next=25;break}if(console.log("live_status.enable is not strictly boolean",r),console.log("sdfhsdfsdafsdfsdf",n.state.loggedInUser,JSON.parse(JSON.stringify(n.state.viewType))),!n.state.loggedInUser){e.next=25;break}return e.next=25,n.processAdminLiveStatus(t,r);case 25:n.openChatModal(),Ct&&"P2A"==t.settings.app_type&&!c&&"user_chat"==n.state.viewType&&(console.log("whaewtwe ",n.state.loggedInUser.tenant_info.id,n.state.activeWindowObj.id),n.initiateConnectAgentReq(t));case 27:case"end":return e.stop()}}),e)})));return function(t,n,o,r,s){return e.apply(this,arguments)}}()),wt(this,"processAdminLiveStatus",function(){var e=vt(mt().mark((function e(t,o){var r,s,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.isFeatureEnabled(t.feature,"live_status","client_pull_admin"),console.log("whenw wantwehti called!"),!r){e.next=13;break}if("P2A"!=t.settings.app_type){e.next=9;break}return s={tenantName:t.tenant_id,otherUserId:o,appName:t.app_name,version:t.settings.version,current_apptype:t.settings.app_type,user_type:"tenant_type",api_key:t.auth_key},e.next=7,n.setAdminLSData(s,(function(e){return n.handleAdminStatusUpdate(e,t)}));case 7:e.next=13;break;case 9:return a={tenantName:t.tenant_id,otherUserId:o,appName:t.app_name,version:t.settings.version,current_apptype:t.settings.app_type,user_type:"user_type",api_key:t.auth_key},console.log("whenw wantwehti called!"),e.next=13,n.setAdminLSData(a,(function(e){return n.handleAdminStatusUpdate(e,t)}));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"handleAdminStatusUpdate",(function(e,t){console.log("did you fire?1");var o=e[0];console.log("ewrwerwerresultd",n.state.loggedInUser),null!=o&&o.hasOwnProperty("live_status")&&(n.updateAdminLSStatusAtClient(o.live_status),n.state.activeWindowObj.live_status=o.live_status)})),wt(this,"shouldToggleViewType",(function(e){return"P2A"===e.settings.app_type&&n.isFeatureEnabled(e.feature,"live_status","client_pull_admin")})),wt(this,"createChatContainer",(function(e){var t;return console.log("asdjrwop;ierje4wqrwer?"),"P2A"===e.settings.app_type?(t=document.createElement("div")).className="chat_screen_top_wrapper":t=document.querySelector(".chat_screen_top_wrapper"),t})),wt(this,"createChatElements",(function(e,t){return t?(console.log("going through it?"),gt({chatWrapper:n.createChatHeaderLogout(e)},n.createMiddleCBWrappers())):gt({chatWrapper:n.createUserChatHeader(e)},n.createMiddleCBWrappers())})),wt(this,"assembleChatUI",(function(e,t,o,r,s,a,i){var c=document.createElement("div");c.className=b.fP;var l=document.createElement("div");l.className=b.DW;var d=JSON.parse(localStorage.getItem("tezkit_app_data")),p=n.createToggleOrCloseButton(d,U,i);p&&e.appendChild(p);var u=n.createChatNotice();if(e.appendChild(u),i){e.appendChild(l),t.appendChild(e),console.log("werhowqjhtoehqrbit",n.state.viewType);var h=n.createChatBotHeader();l.appendChild(h),s&&l.appendChild(s)}else{e.appendChild(c),e.appendChild(l),t.appendChild(e),console.log("werhowqjhtoehqrbit",n.state.viewType,d.settings.app_type),"P2A"==d.settings.app_type?"user_chat"==n.state.viewType?(l.style.display="none",c.style.display="flex"):(c.style.display="none",l.style.display="flex"):(c.style.display="flex",l.style.display="none"),c.append(o,r);var f=n.createChatBotHeader();l.appendChild(f),s&&l.appendChild(s),r.appendChild(a)}})),wt(this,"loadInputBox",function(){var e=vt(mt().mark((function e(t,o,r,s,a){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.shouldHandleBotContent(t)){e.next=6;break}if(i=localStorage.getItem("tezkit_bot_data")){e.next=4;break}return e.abrupt("return");case 4:console.log(r.style.display,"arew wheresdfsdf",o.style.display),n.processBotData(i,o,r);case 6:"user_chat"==n.state.viewType?(console.log("arew never here?sdffgsadf"),n.attachInputAction("tenant_info",s,a)):n.attachInputAction("active_window",s,a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o,r,s){return e.apply(this,arguments)}}()),wt(this,"shouldHandleBotContent",(function(e){return e.enabled_bot_content&&"P2A"===e.settings.app_type})),wt(this,"processBotData",(function(e,t,n){var o=JSON.parse(e);console.log("parsedData.FAQ",JSON.stringify(o.FAQ)),null!=o&&o.FAQ&&B(o.FAQ)})),wt(this,"attachInputAction",(function(e,t,o){if(o)console.log("can we load some input box there"),n.attachInputActionRowLogout(n.state.globalMsgsBucket,t,n);else{var r=String("tenant_info"===e?n.state.loggedInUser.tenant_info.id:n.state.activeWindowObj.id);n.attachInputActionRow(n.state.globalMsgsBucket,z,{id:r},n.state.loggedInUser,t,n)}})),wt(this,"initializeChatComponents",function(){var e=vt(mt().mark((function e(t,o,r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.initializeMessageLoading(t,o),n.setupUserInfo(t)]);case 2:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),wt(this,"getMessageElementFromChatBox",(function(e){console.log("msg_idsdfsfsdfsdmsg_id",e);var t=document.getElementById(e);if(t)return t})),wt(this,"updateDeliveryStatus",(function(e,t){var n=document.getElementById(e);if(n){var o=n.querySelector(".status");"DELIVERED"==t?(o.textContent="",console.log("DELIVERED mess",t)):"READ"===t&&(o.textContent="",o.style.color="#95ff8f",console.log("READ mess",t))}})),wt(this,"handleMsgUpdatedEvent",(function(e){var t=e.message,o=t.ret_id,r=t.message;console.log("whatis it now?",e.message);var s=document.getElementById("chatBody");console.log(n,"wwhat is ths msg_id when broken1",o);var a=n.getMessageElementFromChatBox(o,s);if(a){console.log("messageElementsdfsdf",a,r);var i=a.querySelector(".".concat(b.C$," > div"));console.log("whateriewrmessageText",i.textContent),i.textContent&&(i.textContent=r)}})),wt(this,"initializeSocketConnection",(function(e,t,o){console.log("miinvoked?");var r=n;if(e){var s="https:"===window.location.protocol?"wss":"ws",a="".concat(s,"://").concat("admin.magicchat.io");console.log("ws_server_ip is sdfhsdfsfere",a,t,e);var i=e.hasOwnProperty("uid")?e.uid:e.id;console.log("wehrwerwerwert_tenat",e);var c={user_id:i,x_api_key:t.auth_key,type:"CLIENT",tenant:e.uid?e.tenant:e.tenant_info.tenant,tenant_id:e.tenant_info.id,frm_user:{id:i},app_name:t.app_name,app_type:t.settings.app_type,version:t.settings.version};if(console.log(e,"auth_payloadsfsdfsd",c),n.state.socket=ut(a,{transports:["websocket"],auth:c}),n.state.socket.on("reconnect_attempt",(function(){socket.auth={user_id:"dfsdfsdfsddumyhand"}})),n.state.socket.on("HARD_RESET_ALL_SETTINGS",vt(mt().mark((function n(){var o;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("objectsdfsdfsdfdwsf",e,t),document.querySelector("#full_cover_div").style.display="flex",(o=document.createElement("button")).textContent=" Reset Settings",o.style.cssText="\n    padding: 10px 20px;\n    background-color: #007BFF;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    font-size: 16px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, transform 0.2s ease;\n",o.addEventListener("mouseover",(function(){o.style.backgroundColor="#0056b3"})),o.addEventListener("mouseout",(function(){o.style.backgroundColor="#007BFF"})),o.addEventListener("mousedown",(function(){o.style.transform="scale(0.95)"})),o.addEventListener("mouseup",(function(){o.style.transform="scale(1)"})),o.addEventListener("click",vt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sfsjfpsadfsdf",t.app_name,t.auth_key),e.next=3,window.magicchat_io.updateLiveSettings(t.app_name,t.auth_key,["tezkit_app_data","tezkit_header_req"]);case 3:case"end":return e.stop()}}),e)})))),window.magicchat_io.renderErrorPopup(["Admin has made some changes, Kindly click `Reset Settings` to apply the latest chagnes."],[o],"error");case 12:case"end":return n.stop()}}),n)})))),o.hasOwnProperty("name_idn")){if(e.hasOwnProperty(o.name_idn)){console.log("asdfjlskafjsfasdfsdf?"),n.attachCommonSocks(t,o),console.log("whaweriwerwerwretezkit_app_data",t,_t(t));var l=t;n.isFeatureEnabled(l.feature,"live_status","admin_push_client")&&(console.log("arewehever"),n.state.socket.on("ON_USER_LIVE_STATUS_CLIENT_LISTNER",(function(e){var n=e;console.log("we are not getting any triggers?"),n.hasOwnProperty("live_status")?"P2P"==t.settings.app_type?(console.log("aewerhercurrent_apptypee?",t.settings.app_type),r.updateUserListLSStatusAtClient(n),n.live_status?(console.log("diddi you happen3???"),document.querySelector(".".concat(b.av)),console.log("diddi you happen???")):document.querySelector(".".concat(b.u9))):"P2A"==t.settings.app_type&&(console.log("aewerhercurrent_apptypee?",t.settings.app_type),console.log("did you fire?3"),r.updateAdminLSStatusAtClient(n.live_status),n.status?(console.log("diddi you happen3???"),document.querySelector(".".concat(b.av)),console.log("diddi you happen???")):document.querySelector(".".concat(b.u9))):console.error("No status provided!")})))}}else console.error("`name_idn` does not exist")}})),wt(this,"handleMsgReactionEvent",(function(e){var t=e.message,o=t.ret_id,r=t.message;console.log("ret_idsdfsadfsdf",e.message);var s=r,a=document.getElementById("chatBody");if(console.log("wwhat is ths msg_id when broken2chatBody",a),a){var i=n.getMessageElementFromChatBox(o,a);console.log("are we ever hitting it???",i),i&&n.addReaction(i.parentElement,s)}})),wt(this,"getUnreadMsgsP2A",function(){var e=vt(mt().mark((function e(t,n,o){var r,s,a,i,c,l,d,p,u,h,f=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>3&&void 0!==f[3]?f[3]:"V1",(s=new Headers).append("Authorization",t),a={method:"GET",headers:s,redirect:"follow"},i=null,"V1"===r&&(i="https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(n,"&page=1&unread=True&app_type=").concat(o,"&user_type=CLIENT"),console.log("sdlfosildfsdfsdf2")),i){e.next=9;break}return console.error("Invalid app version provided!"),e.abrupt("return",null);case 9:return e.prev=9,e.next=12,fetch(i,a);case 12:if((c=e.sent).ok){e.next=18;break}return e.next=16,c.text();case 16:throw l=e.sent,new Error("HTTP Error: ".concat(c.status," - ").concat(l));case 18:return e.next=20,c.json();case 20:if(d=e.sent,console.log("API Response:",d),d.chats&&0!==Object.keys(d.chats).length){e.next=25;break}return console.log("No unread messages found."),e.abrupt("return",0);case 25:return p=0,u=localStorage.getItem("tezkit_app_data"),console.log(status,"initialized111sdfsd1111",u),u&&(h=JSON.parse(u),d.chats.hasOwnProperty(h.app_name)&&d.chats[h.app_name].hasOwnProperty("user__"+h.tenant_info.id)&&(console.log("wehrowereteurto"),p=d.chats[h.app_name]["user__"+h.tenant_info.id].unread_msgs)),console.log("Total Unread Messages:",p),e.abrupt("return",p);case 33:return e.prev=33,e.t0=e.catch(9),console.error("Fetch error:",e.t0.message),e.abrupt("return",null);case 37:case"end":return e.stop()}}),e,null,[[9,33]])})));return function(t,n,o){return e.apply(this,arguments)}}()),wt(this,"getUnreadMsgsP2P",function(){var e=vt(mt().mark((function e(t,n){var o,r,s,a,i,c,l,d,p,u=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length>2&&void 0!==u[2]?u[2]:"V1",r=u.length>3&&void 0!==u[3]&&u[3],console.log("what is ths appfvwef"),(s=new Headers).append("Authorization",t),a={method:"GET",headers:s,redirect:"follow"},i=null,"V1"===o&&(i="https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(n,"&page=1&unread=True&app_type=P2P&user_type=CLIENT"),console.log("sdlfosildfsdfsdf3")),i){e.next=11;break}return console.error("Invalid app version provided!"),e.abrupt("return",null);case 11:return e.prev=11,e.next=14,fetch(i,a);case 14:if((c=e.sent).ok){e.next=20;break}return e.next=18,c.text();case 18:throw l=e.sent,new Error("HTTP Error: ".concat(c.status," - ").concat(l));case 20:return e.next=22,c.json();case 22:if(d=e.sent,console.log("API Response:",d),!r){e.next=28;break}return e.abrupt("return",d.chats[n]);case 28:return p=Object.values(d.chats).flatMap((function(e){return Object.values(e)})).reduce((function(e,t){return e+(t.unread_msgs||0)}),0),e.abrupt("return",p);case 30:e.next=36;break;case 32:return e.prev=32,e.t0=e.catch(11),console.error("Fetch error:",e.t0.message),e.abrupt("return",null);case 36:case"end":return e.stop()}}),e,null,[[11,32]])})));return function(t,n){return e.apply(this,arguments)}}()),wt(this,"updateNotificationBell",(function(e){console.log("tezkit_app_datasdafsdfsd",_t(e),e),e&&"V1"==("string"==typeof e?JSON.parse(e):e).settings.version&&this.incrementNotificationsCount()})),wt(this,"incomingMsgHandler",(function(e,t){var o,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"REGULAR";console.log("DO WE FIRE IN INCOMING MESSAGES AND OUTGOING BOTH????");var a="string"==typeof t?JSON.parse(t):t,i="P2A"===(null==a||null===(o=a.settings)||void 0===o?void 0:o.app_type),c="P2P"===(null==a||null===(r=a.settings)||void 0===r?void 0:r.app_type);(i||c)&&console.log(" Early app_type check:",a.settings.app_type),console.log("this happens when the msg comes | goes or both?",a);var l=JSON.parse(e);if(console.log("messagep_data",l),console.log(n.state.is_chat_content_modal_open,"arenthewehere?",s,n.state.viewType),"BOT"!==s&&(console.log("arent weh ere???",n.state.loggedInUser),n.informPeerSysAboutMsgStatus(n.state.socket,l.message.ret_id,"DELIVERED",a.app_name,l.message.frm_user.id)),console.log("this.statesdfsdf",n.state.viewType),n.updateNotificationBell(t),i)n.state.is_chat_content_modal_open?(console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(_t(t),"tezkit_app_datasdfsdf",t),console.log("here is p_datasdfsdf",l),"REGULAR"===s||"REPLY"===s||"NEW_FILE_MIXED_V1"===s?n.addMessageToUserChatBox(l,l.type,void 0,"INCOMING"):"BOT"===s&&(console.log("arew wehere here for logout bot case?"),n.addMessageToBotChatBox(l,void 0,"OUTGOING")),"user_chat"===n.state.viewType?(console.log("ehre can wer seechat_",n.state.loggedInUser,n.state),n.informPeerSysAboutMsgStatus(n.state.socket,l.message.ret_id,"READ",n.state.loggedInUser.app_name,l.message.to_user.id)):(console.log("heorjowerwerwer?",e),n.state.unread_messages=[].concat(function(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.state.unread_messages),[JSON.parse(e)]))):console.log("if we going this way may be we can load things in unread_messages?");else if(n.state.is_chat_content_modal_open){console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(_t(t),"tezkit_app_datasdfsdf",t),console.log(n.state.activeWindowObj,"datasdsdfytjytjytjfsadfsd",l);var d="V1"===a.settings.version?"id":"uid";if(n.state.activeWindowObj[d]===l.message.frm_user.id)console.log("here is p_datassdfdfsdf",l),"REGULAR"!==s&&"REPLY"!==s&&"NEW_FILE_MIXED_V1"!==s||n.addMessageToUserChatBox(l,l.type,void 0,"INCOMING"),"BOT"!==s&&n.informPeerSysAboutMsgStatus(n.state.socket,l.message.ret_id,"READ",n.state.loggedInUser.app_name,l.message.frm_user.id);else{console.log("when the another window but not right window is not opened but msg arrvies",e);var p="unread__"+l.message.frm_user.id,u=document.getElementById(p);u&&(u.textContent=String(Number(u.textContent)+1))}}else{console.log("if we going this way may be we can load things in unread_messages?");var h="unread__"+l.message.frm_user.id,f=document.getElementById(h);f&&(f.textContent=String(Number(f.textContent)+1))}})),wt(this,"botAIMsgsHandler",(function(e,t){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OUTGOING";console.log(e,"is my direction right for all 4 cases?",r);var s="string"==typeof t?JSON.parse(t):t,a="P2A"===(null==s||null===(o=s.settings)||void 0===o?void 0:o.app_type);console.log("this happens when the msg comes | goes or both?",s);var i=JSON.parse(e);console.log("messagep_data",i),console.log(n.state.is_chat_content_modal_open,"arenthewehere?",n.state.viewType),console.log("this.statesdfsdf",n.state.viewType),a&&(n.state.is_chat_content_modal_open?(console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(_t(t),"tezkit_app_datasdfsdf",t),console.log("here is p_datasdfsdf",i),n.addMessageToBotChatBox(i,!1,r)):console.log("if we going this way may be we can load things in unread_messages?"))})),wt(this,"updateMessageReaction",(function(e,t){console.log("arewenoteven calling th?what is the diff",e);var n=e.querySelector(".reaction");n||((n=document.createElement("div")).classList.add(b.mJ),n.style.visibility="visible",e.appendChild(n)),n.textContent=t})),wt(this,"postConnAcceptanceHandler",(function(e,t){var n;console.log("wahero;iwjerweself",e),document.getElementById("chat_announcement"),e.state.p2a_connection_with=t,e.state.activeWindowObj.id=e.state.p2a_connection_with.user_id,e.showAnnouncementMessages("connected with ".concat(e.state.p2a_connection_with.user_id," (type of user as ").concat(e.state.p2a_connection_with.user_type,")"),{type:"success",persistent:!0});var o=document.querySelector(".".concat(b.py," #loginMessage")),r=document.querySelector(".".concat(styles.chat_header_wrapper," #statusElement"));console.log(r,"loginMessageElement.textContent",o.textContent),o.textContent=t.full_name,(null===(n=JSON.parse(localStorage.getItem("tezkit_app_data")).feature)||void 0===n||null===(n=n.live_status)||void 0===n?void 0:n.enable)&&e.updateAdminLSStatusAtClient("ONLINE")})),wt(this,"postConnDisconnectionHandler",(function(e,t){document.getElementById("chat_announcement"),e.state.p2a_connection_with={user_id:t.frm_user_id,user_type:t.user_type,full_name:t.full_name},e.state.p2a_connection_with=null,e.state.activeWindowObj.id=e.state.loggedInUser.tenant_info.id,e.showAnnouncementMessages("Disconnected for now but sending any message will trigger a new Agent Search",{persistent:!0,showCloseButton:!0,type:"error"}),e.updateAdminLSStatusAtClient("OFFLINE")})),wt(this,"attachCommonSocks",(function(e,t){console.log(t,"sdfsdidentifierssdfsddffsd",t,this);var n=this;console.log("hwere waht isself.state?loggedInUser",n.state.loggedInUser),this.state.socket.emit("join_room",{room:"global_for__"+n.state.loggedInUser[t.name_idn]}),this.state.socket.on("ON_MESSAGE_ARRIVAL_BOT",(function(t){console.log("tezkit_app_datasdfsadfsasdfsdd",e),n.incomingMsgHandler(t,JSON.stringify(e))})),this.state.socket.on("TYPING_INDICATOR",(function(e){var t=e.frm_user.id;console.log(t,"here we recifed ls from adming",e,_t(e)),console.log("whaetwerthis?",this),function(e){console.log("typing statusisTyping",e);var t=document.querySelector(".".concat(b.us));if(t){var n=t.querySelector("#typingStatusElm");console.log(n,"chatHeadersdasfdasdfa",t)}var o=document.querySelector("#typingStatusWrapper");if(o){var r=o.querySelector("#typingStatusText");r||((r=document.createElement("span")).id="typingStatusText",r.style.color="black",r.style.padding="10px 20px",o.appendChild(r)),e?(o.style.display="flex",r.innerHTML='typing<span class="typing-indicator-dots"><span>.</span><span>.</span><span>.</span></span>'):(r.innerHTML="",o.style.display="none")}}(e.typing)})),this.state.socket.on("ON_REPLY_ARRIVAL",(function(t){n.incomingMsgHandler(t,JSON.stringify(e),"REPLY")})),this.state.socket.on("ON_MESSAGE_STATUS_CHANGED",(function(e){console.log("any halchal??");var t=JSON.parse(e);t.message.action?("MSG_STATUS_CHANGE_EVENT"===t.message.action&&(console.log("dsafsadfasdfsadf",t.message.ret_id,t.message.status),console.log("here can we see bot_view??"),n.updateDeliveryStatus(t.message.ret_id,t.message.status)),"MSG_UPDATED_EVENT"===t.message.action?n.handleMsgUpdatedEvent(t):"MSG_REACTION_EVENT"===t.message.action?n.handleMsgReactionEvent(t):console.error("Action Not Yet Handled:",t.message.action)):console.error("No action provided!")})),this.state.socket.on("ON_MESSAGE_BULK_STATUS_UPDATE",(function(e){var t=JSON.parse(e);console.log("do we have the msg_ids there???",t,this),t.message.app_name;var o=t.message.status,r=t.message.ret_ids;n.updateMultipleChatStatus({msg_id:r},o)})),this.state.socket.on("ON_FILE_UPLOAD",(function(t){n.incomingMsgHandler(JSON.stringify(t),e,"NEW_FILE_MIXED_V1")})),this.state.socket.on("REQUEST_FOR_AGENT_AVAILIBILTY",function(){var e=vt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("this is waht came back",t),t.hasOwnProperty("frm_user_id")&&("JR_ACCEPTED"==t.status?n.postConnAcceptanceHandler(n,{user_id:t.frm_user_id,user_type:t.user_type,full_name:t.full_name}):"JR_DISCONNECTED"==t.status&&n.postConnDisconnectionHandler(n,{user_id:t.frm_user_id,user_type:t.user_type,full_name:t.full_name}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),console.log("aswerwerenwrer?"),this.state={activeWindowObj:null,globalMsgsBucket:{},prv_inp:null,prv_send_btn:null,loggedInUser:null,socket:t,is_chat_content_modal_open:!1,viewType:"bot_chat",unread_messages:[],p2a_connection_with:null}},t=[{key:"openChatModal",value:(s=vt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector(".chat_modal__"+U),this.state.is_chat_content_modal_open||(this.state.is_chat_content_modal_open=!0,window.innerWidth<this.MOBILE_WIDTH&&(t.style.display="flex")),console.log("safasdfsdfsadfthis.is_chat_content_modal_open",this.state.is_chat_content_modal_open);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"isFeatureEnabled",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.hasOwnProperty(t))return!1;var o=e[t];return null===n?!!o.enable:!(!o.settings||!o.settings.hasOwnProperty(n)||!o.settings[n].enable)}},{key:"awayHandler",value:function(e,t,n,o,r){console.log("this sis the apptyp, versionsdf",t,n),console.log("what is ths invoking?",e),this.state.socket;var s=null,a=localStorage.getItem("tezkit_token");function i(){console.log("User has been away for more than 1 minute; here will send soc status message (OFFLINE)"),console.log("Isnt Userddddd just away!"),console.log(a,"tokensdfasdfdssdaloggedInUser",e);var t=localStorage.getItem("tezkit_app_data"),o=null;if(console.log("initialized1111111",t),t)if(o=JSON.parse(t),"V1"==n){var s={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":o.auth_key,"Content-Type":"application/json"};console.log("arewe here??what is the bodyCoentn",e);var i=JSON.stringify({live_status:"AWAY",tenant:e.tenant,frm_user:{id:e.uid?e.uid:e.id}}),c={app_name:o.app_name,version:o.settings.version,app_type:o.settings.app_type,user_id:e.uid?e.uid:e.id};"P2P"==o.settings.app_type?console.log("arewe heredyContent in away handler",i):"P2A"==o.settings.app_type&&(c.tenant_id=e.tenant_info.id,console.log("here is updatedls_payload",c)),r.updateLiveStatus(i,s,c)}else if("V2"==n||"V3"==n||"V4"==n){var l=localStorage.getItem("tezkit_app_data"),d=JSON.parse(l),p={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":d.auth_key,"Content-Type":"application/json"};console.log("ahere is p2a v2.1",e);var u=JSON.stringify(gt(gt({},e),{},{live_status:"AWAY",frm_user:{uid:e.uid?e.uid:e.id}}));console.log("arewe heredyContent in handlerUseraway",u,e);var h={app_type:d.settings.app_type,app_name:d.app_name,version:d.settings.version,user_id:e.uid?e.uid:e.id};"P2P"==d.settings.app_type?console.log("arewe heredyContent in away handler",u):"P2A"==d.settings.app_type&&(h.tenant_id=e.tenant_info.id,console.log("here is updatedls_payload",h)),r.updateLiveStatus(u,p,h)}}document.addEventListener("visibilitychange",(function(){console.log("is it there alright?",t);var o=localStorage.getItem("tezkit_app_data"),a=JSON.parse(o),c=a.feature;if(r.isFeatureEnabled(c,"live_status","client_push_admin"))if(document.hidden)s=setTimeout(i,1e3);else{clearTimeout(s),console.log("Isnt Userddddd just Back!");var l=localStorage.getItem("tezkit_token");console.log(l,"tokensdfasdfsdaloggedInUser",e);var d={};if("V1"==n){d={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":a.auth_key,"Content-Type":"application/json"},console.log("arewe here??what is the bodyCoentn",e);var p=JSON.stringify({live_status:"ONLINE",tenant:e.tenant,frm_user:{id:e.uid?e.uid:e.id}});console.log("arewe heredyContent when document is visibl3e",p,e.tenant_info.id),console.log(this,"sdfsdsdfchat_csdforesdf",r);var u={app_type:a.settings.app_type,app_name:a.app_name,version:a.settings.version,user_id:e.uid?e.uid:e.id};"P2P"==a.settings.app_type?console.log("arewe heredyContent in away handler",p):"P2A"==a.settings.app_type&&(u.tenant_id=e.tenant_info.id,console.log("here is updatedls_payload",u)),r.updateLiveStatus(p,d,u)}else if("V2"==n||"V3"==n||"V4"==n){var h={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":a.auth_key,"Content-Type":"application/json"};console.log("ahere is p2a v2.1",e);var f=e.hasOwnProperty("uid")?e.uid:e.id,g=JSON.stringify(gt(gt({},e),{},{live_status:"ONLINE",frm_user:{uid:f}}));console.log("do we really have uid in there id???",e);var m={app_type:a.settings.app_type,app_name:a.app_name,version:a.settings.version,user_id:f};"P2P"==a.settings.app_type?console.log("arewe heredyContent in away handler",g):"P2A"==a.settings.app_type&&(m.tenant_id=e.tenant_info.id,console.log("here is updatedls_payload",m)),r.updateLiveStatus(g,h,m)}}}))}},{key:"minimizeChatModal",value:(o=vt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("werwqerin hdsf?"),console.log("close just the open window"),t=document.querySelector(".chat_modal__"+U),console.log(this.state.is_chat_content_modal_open,"chat_screensdfdsddsf"),this.state.is_chat_content_modal_open=!1,t.style.display="None";case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"createLogoutChatHeader",value:function(e){var t=this,n=localStorage.getItem("tezkit_app_data");if(n){var o=JSON.parse(n),r=document.createElement("div");r.className=b.py;var s=document.createElement("div");s.className=b.us;var a=document.createElement("div");a.style.display="flex",a.style.alignItems="center";var i=document.createElement("h3");i.id="loginMessage",i.textContent="AI Bot",document.createElement("span").id="typingStatusElm",a.appendChild(i),s.appendChild(a),r.appendChild(s);var c=null;if("P2A"===o.settings.app_type){console.log("Initial viewType:",this.state.viewType),(c=document.createElement("button")).id="close-btn__".concat(e),c.className=b.Iv;var l=document.createElement("div");l.setAttribute("id","bi_wrapper"),l.innerHTML="bot svg";var d=document.createElement("div");d.setAttribute("id","ui_wrapper"),d.innerHTML="user svg";var p=document.createElement("div");p.className=b.YL;var u=function(e){var t="bot_chat"===e;l.style.display=t?"block":"none",d.style.display=t?"none":"block",p.innerText=t?"Talk to live user":"Talk to bot"};u(this.state.viewType),c.appendChild(l),c.appendChild(d),c.appendChild(p),c.addEventListener("click",(function(){var e="bot_chat"===t.state.viewType?"user_chat":"bot_chat";t.toggleChatView(e,U),u(e)}))}c&&r.appendChild(c);var h=document.createElement("div");return h.className="chat_notice",h.id="chatNotice",h.style.display="none",r.appendChild(h),r}}},{key:"uploadMFiles",value:(n=vt(mt().mark((function e(t){var n,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mmmanager.".concat("magicchat.io","/").concat("prod","/put_object"),t);case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,console.log("adsfasdfresult",o),e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.error("Error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(e){return n.apply(this,arguments)})},{key:"prepareFUpayload",value:function(e,t){return e.map((function(e){return e.map((function(e){if("img"===e.type){var n=decodeURIComponent(e.value),o=t.files.find((function(e){var t;return((t=e.match(/\/([^/]+)$/))?decodeURIComponent(t[1]):null)===n}));if(o)return gt(gt({},e),{},{value:o})}return e}))}))}},{key:"transformMsgObject",value:function(e,t){var n,o;console.log(JSON.stringify(e),"beforeupdate1",t);var r=JSON.parse(localStorage.getItem("tezkit_app_data")),s=null===(n=t.state)||void 0===n?void 0:n.p2a_connection_with;console.log(s,"p2aConnappDatasdfsdf",r,Ct);var a,i,c=gt({},e);return"true"===Ct&&"P2A"===(null==r||null===(o=r.settings)||void 0===o?void 0:o.app_type)&&"support_type"===(null==s?void 0:s.user_type)&&(console.log("beforecrisis?sfsd",JSON.stringify(c),s),c.message=gt(gt({},c.message),{},{to_user:gt(gt({},null===(a=c.message)||void 0===a?void 0:a.to_user),{},{id:s.user_id})}),console.log("aftercrisis?why the object is not updated",JSON.stringify(c)),null!==(i=c.room)&&void 0!==i&&i.startsWith("global_for__")&&(c.room="support_for__".concat(s.user_id))),console.log(JSON.stringify(e),"afterupdate1"),c}},{key:"setChatInputUI",value:function(e){var t=this;console.log("notwitsmbe surproer");var n,o=this,r=this.state,s=r.activeWindowObj,a=r.loggedInUser,i=r.socket,c=r.globalMsgsBucket,l=function(){return s.hasOwnProperty("uid")?s.uid:s.id},d=!1,p=function(){if(!d){d=!0,console.log("asdf;lsdfsdf","V1"!=a.version);var e="V1"!=a.version?"uid":"id";i.emit("TYPING_INDICATOR",{typing:!0,room:"global_for__"+l(),frm_user:wt({},e,a[e])})}clearTimeout(n),n=setTimeout((function(){d=!1,console.log("sdfhsdafloggedInUsersdfsd",a);var e="V1"!=a.version?"uid":"id";i.emit("TYPING_INDICATOR",{typing:!1,room:"global_for__"+l(),frm_user:wt({},e,a[e])})}),5e3)},u='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ';console.log("weranteh enve here?");var h=function(){console.log("aeroiwerngsdf?");var e=document.createElement("div");e.id="input-act-wrap",e.className=b.Ht;var n=document.createElement("div");n.id="input-box-div-wrapper",n.className=b.hD,n.addEventListener("input",p);var r,d,h=document.createElement("input");h.type="text",h.className=b.Xs,h.placeholder="Type here...",h.value=(d=l(),(null==c||null===(r=c["user__".concat(d)])||void 0===r?void 0:r.input)||"");var f=t.createAttachmentButton(h),g=f.button,m=f.fileInput;n.appendChild(g),m.addEventListener("change",(function(){console.log("wedoi9snsgfdfs?"),t.handleFileInputChange(m,n,t.state.activeWindowObj,t,z,a)})),document.body.appendChild(m);var y=document.createElement("button");return y.className=b.dQ,y.innerHTML=u,y.addEventListener("click",vt(mt().mark((function e(){var n,r,c,d,p,u,f;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(localStorage.getItem("tezkit_app_data")),console.log("sdo;fhjosfjsad we should have some connected/non connected signal heref",o.state.p2a_connection_with),!Ct||"P2A"!=r.settings.app_type||o.state.p2a_connection_with){e.next=6;break}return console.log("didwe ewhrwerew?",t),t.initiateConnectAgentReq(r),e.abrupt("return");case 6:if(console.log("didwe dot his?"),c=l(),console.log(s,"soerewrightUID",c),h.value){e.next=11;break}return e.abrupt("return");case 11:return d=z(),console.log("selfsdfsdf",o),p=Ct&&"support_type"==o.state.p2a_connection_with.user_type?"support_for__":"global_for__",console.log("asdfsdkfsdfdright_prefix",p),u={app_name:a.app_name,room:p+c,type:"REGULAR",message:{msg_id:d,ret_id:d,message:h.value,status:"SENT",timestamp:Date.now(),frm_user:{id:null!==(n=a.id)&&void 0!==n?n:a.uid},to_user:{id:c}}},o.addMessageToUserChatBox(u),console.log("asejfsjfsdfsdfs2"),e.next=20,D(u,a);case 20:r&&console.log("yes we do ehavhe it","P2A"==r.settings.app_type),console.log(u,"should be true when data from api comes???frm_toptype"),f=t.transformMsgObject(u,t),console.log("Final msgObj:",f),i.emit("ON_MESSAGE_ARRIVAL_BOT",f),h.value="";case 26:case"end":return e.stop()}}),e)})))),n.appendChild(h),n.appendChild(y),e.appendChild(n),e}(),f=function(){console.log(" Entered createBotInputWrapper"),console.log("whichone1",t.state.viewType);var n=document.createElement("div");n.id="input-act-bot-wrap",n.className=b.JW,console.log(" Created wrapper div with id:",n.id);var r=document.createElement("div");r.className=b.Vj,console.log(" Created inner wrapper div");var s=document.createElement("input");s.type="text",s.className=b.So,s.placeholder="Type a message here for bot...",console.log(" Created input box with placeholder:",s.placeholder);var a=document.createElement("button");return a.className=b.dQ,a.innerHTML=u,console.log(" Created send button"),a.addEventListener("click",(function(){if(console.log(" Send button clicked!"),0!=s.value.length){var n=s.value,r={type:"BOT",message:{message:n,status:"SENT",timestamp:Date.now()}};s.value="",console.log("arntwegoing?"),o.botAIMsgsHandler(JSON.stringify(r),e);var a=document.getElementById("bot_thinking");a?(a.style.display="block",console.log(" Bot thinking indicator shown")):console.warn(" bot_thinking element not found!"),console.log(" Sending fetch request to backend with input:",n),fetch("https://djangoboy-magicchat-pr.hf.space/qa?env=".concat(null==="prod"?void 0:"prod".toLowerCase()),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.auth_key},body:JSON.stringify({question:n,app_name:e.app_name,tenant_id:e.tenant_id})}).then((function(e){return console.log(" Received response object:",e),e.json()})).then((function(n){console.log(" Response JSON data:",n);var r=n.SIGNAL||null;if(console.log(" Extracted signal:",r),r){console.log(" Signal detected:",r);var s=document.querySelector(".".concat(b.av));if(a&&(a.style.display="none"),2==r||4==r){if(2==r){console.log(" Signal 2  Out of scope message");var i={type:"BOT",message:{message:"This question seems out of scope, You can ask question only releted to the product.",status:"SENT",timestamp:Date.now()}};o.botAIMsgsHandler(JSON.stringify(i),e,"INCOMING")}if(4==r){console.log(" Signal 4  Inappropriate language");var c={type:"BOT",message:{message:"Inappropriate language detected. Kindly ask question only releted to product.",status:"SENT",timestamp:Date.now()}};o.botAIMsgsHandler(JSON.stringify(c),e,"INCOMING")}}else console.log(" Passing signal to addAIPopUp:",r),t.addAIPopUp(s,r)}else{console.log(" No signal detected  sending bot answer");var l={type:"BOT",message:{message:n.answer,status:"SENT",timestamp:Date.now()}};a&&(a.style.display="none"),console.log(" Passing bot answer to incomingMsgHandler:",l),o.botAIMsgsHandler(JSON.stringify(l),e,"INCOMING")}})).catch((function(e){console.error(" Error during fetch:",e)}))}})),r.appendChild(s),r.appendChild(a),n.appendChild(r),console.log(" Finished building input wrapper"),{wrapper:n,inputBox:s}}().wrapper,g=document.querySelector(".".concat(b.u9," .").concat(b.bw)),m=document.querySelector(".".concat(b.av," .").concat(b.XB));m&&m.appendChild(f),g&&g.appendChild(h)}},{key:"setChatInputLogoutUI",value:function(e){var t=this;console.log("notwitsmbe surproer");var n=this,o=(this.state,'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ');console.log("weranteh enve here?");var r=function(){console.log("thissfsdfdfgviewType whichone2",t.state.viewType);var r=document.createElement("div");r.id="input-act-bot-wrap",r.className=b.JW;var s=document.createElement("div");s.className=b.Vj;var a=document.createElement("input");a.type="text",a.className=b.So,a.placeholder="Type a message here for bot...";var i=document.createElement("button");if(i.className=b.dQ,i.innerHTML=o,!document.getElementById("sendbtn-disabled-style")){var c=document.createElement("style");c.id="sendbtn-disabled-style",c.innerHTML="\n          .sendbtn:disabled {\n            opacity: 0.5;\n            cursor: not-allowed;\n            pointer-events: none;\n          }\n        ",document.head.appendChild(c)}return i.addEventListener("click",(function(){var o=document.getElementById("bot_thinking");o.style.display="block",i.disabled=!0;var r={type:"BOT",message:{msg_id:"msg_id__uniqu1",message:a.value,timestamp:Date.now()}},s=a.value;a.value="",n.botAIMsgsHandler(JSON.stringify(r),e),console.log("MARKERDSLKJFSODF1"),fetch("https://djangoboy-magicchat-pr.hf.space/qa?env=".concat(null==="prod"?void 0:"prod".toLowerCase()),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.auth_key},body:JSON.stringify({question:s,app_name:e.app_name,tenant_id:e.tenant_id})}).then((function(e){return e.json()})).then((function(r){var s=r.SIGNAL||null;if(s){var a=document.querySelector(".".concat(b.av));t.addAIPopUp(a,s)}else{var i={type:"BOT",message:{msg_id:"msg_id__95265433",message:r.answer,status:"SENT",timestamp:Date.now()}};o.style.display="none",console.log("are you the one ??"),n.botAIMsgsHandler(JSON.stringify(i),e,"INCOMING")}})).catch(console.error).finally((function(){i.disabled=!1}))})),s.appendChild(a),s.appendChild(i),r.appendChild(s),{wrapper:r,inputBox:a}}().wrapper,s=(document.querySelector(".".concat(b.u9," .").concat(b.bw)),document.querySelector(".".concat(b.av," .").concat(b.XB)));s&&s.appendChild(r)}},{key:"attachInputActionRow",value:function(e,t,n,o,r,s){console.log("ditiransdf?");var a=JSON.parse(localStorage.getItem("tezkit_app_data")),i=this.createInputWrapper((function(){return console.log("is it even running?")})),c=this.createInputBox(e,n,a);c.addEventListener("focus",(function(){return c.style.border="1px solid rgb(74, 122, 255)"})),i.appendChild(c),console.log("arewyou able aeworu reiach this?"),this.setChatInputUI(a)}},{key:"attachInputActionRowLogout",value:function(e,t,n){var o=JSON.parse(localStorage.getItem("tezkit_app_data")),r=this.createInputWrapperLogout(),s=this.createInputBoxLogout(e,"logout_user",o);s.addEventListener("focus",(function(){return s.style.border="1px solid rgb(74, 122, 255)"})),r.appendChild(s),this.setChatInputLogoutUI(o)}},{key:"greet",value:function(){console.log("here updated")}},{key:"anotherFunc",value:function(){console.log("shouuldnot be mocked!")}},{key:"updateChatToDB",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log(e,"Here is the payload11");var o=localStorage.getItem("tezkit_token");e.msg_ids.length>0&&fetch("https://chats.".concat("magicchat.io","/").concat("prod","/update_chat"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(o)},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){console.log("Reaction updated successfully:",e)})).catch((function(o){console.error("Error updating reaction:",o),n<3?(console.log("Retrying in 7 seconds..."),setTimeout((function(){t.updateChatToDB(e,n+1)}),7e3)):console.error("Max retries reached, operation failed.")}))}},{key:"informPeerSysAboutMsgStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DELIVERED",o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;console.log("asdfhjosdfisdafsadf");var s=localStorage.getItem("tezkit_app_data");if(console.log(n,"initialized1111111",s),s){var a=JSON.parse(s);console.log(this.state,"initialized2222tezkit_app_pdata222",this.state.loggedInUser);var i="P2A"==a.settings.app_type?this.state.loggedInUser.tenant_info.id:r;console.log("sowe rowerwerwerSDFSDFSD",t),e.emit("ON_MESSAGE_STATUS_CHANGED",{action:"MSG_STATUS_CHANGE_EVENT",ret_id:t,room:"global_for__"+i,status:n,timestamp:Date.now(),app_name:o,to_user_id:r});var c={type:"status",msg_ids:[t],status:n};this.updateChatToDB(c)}}},{key:"informPeerSysAboutBULKMsgsStatus",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DELIVERED",r=arguments.length>3?arguments[3]:void 0;console.log("werhwerhewrewrewr?");var s=localStorage.getItem("tezkit_app_data");if(console.log(o,"initialized1111111",s),s){var a=JSON.parse(s);if(this.state.loggedInUser){console.log("messagesNotReadsdfsdf",t);var i=t.filter((function(e){return"READ"!==e.message.status&&n.state.loggedInUser.id!==e.message.frm_user.id})).map((function(e){return e.message.msg_id}));console.log("messagesNotReadSDFSD1111",i);var c={type:"status",msg_ids:i,status:o};this.updateChatToDB(c);var l=null;if(console.log(this.state.activeWindowObj,"it's you isn't it?",a.settings.app_type),"P2A"==a.settings.app_type)l="global_for__"+this.state.loggedInUser.tenant_info.id;else if("P2P"==a.settings.app_type){var d=this.state.activeWindowObj.hasOwnProperty("uid")?this.state.activeWindowObj.uid:this.state.activeWindowObj.id;l="global_for__"+d,console.log("sdfsdfsfsfright_global_id",d)}i.length&&(console.log("weruwoeruwer",l,this.state.activeWindowObj),this.state.socket.emit("ON_MESSAGE_BULK_STATUS_UPDATE",{ret_ids:i,room:l,status:o,timestamp:Date.now(),app_name:r}))}}}},{key:"setGlobalSeletedWindowKey",value:function(e){console.log("setGlobalSeletedWindowKey iddf",e),this.state.activeWindowObj=e}},{key:"insertElmToInpWrapper",value:function(e){var t=document.getElementById("input-box-div-wrapper");if(t.style.background="orange",t){var n=e.cloneNode(!0);n.style.maxHeight="70px",n.style.overflow="hidden";var o=t.firstChild;t.insertBefore(n,o)}}},{key:"handleTypingIndicator",value:function(e,t,n,o,r){r||(r=!0,n.state.socket.emit("TYPING_INDICATOR",{typing:!0,room:e.id?"global_for__"+e.id:"global_for__"+e.uid,frm_user:{id:t.id}})),clearTimeout(o),o=setTimeout((function(){r=!1,n.state.socket.emit("TYPING_INDICATOR",{typing:!1,room:e.id?"global_for__"+e.id:"global_for__"+e.uid,frm_user:{id:t.id}})}),5e3)}},{key:"createInputWrapper",value:function(e){var t=document.createElement("div");return t.id="input-box-div-wrapper",t.classList.add("input-box-div-wrapper"),t.addEventListener("input",e),t}},{key:"createInputWrapperLogout",value:function(){var e=document.createElement("div");return e.id="input-box-div-wrapper",e.classList.add("input-box-div-wrapper"),e}},{key:"createInputBox",value:function(e,t,n){var o,r=document.createElement("input");r.type="text",r.placeholder="Type here...",r.classList.add(b.Xs);var s=t.uid||t.id,a="user__".concat(s),i=(null==e||null===(o=e[a])||void 0===o?void 0:o.input)||"";return r.value=i,r}},{key:"createInputBoxLogout",value:function(e,t,n){var o,r=document.createElement("input");r.type="text",r.placeholder="Type here...",r.classList.add(b.Xs);var s=(null==e||null===(o=e[t])||void 0===o?void 0:o.input)||"";return r.value=s,r}},{key:"createAttachmentButton",value:function(e){var t=document.createElement("button");t.className=b.QQ,t.innerHTML='<svg width="44" height="50" viewBox="0 0 44 50" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M4 11H39V43H4V11Z" fill="#B5B0BC"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M26.8438 0C29.6562 0 32.4688 1.25 34.1875 3.59375L41.8438 13.125C43.0938 14.8437 43.875 16.875 43.875 18.9062V40.625C43.875 45.7812 39.6562 50 34.5 50H9.5C4.34375 50 0.125 45.7812 0.125 40.625V9.375C0.125 4.21875 4.34375 0 9.5 0H26.8438ZM31.6875 17.6562C28.875 14.8438 24.5 14.5312 21.375 17.0312C20.75 17.5 20.5938 18.5938 21.0625 19.2188C21.5312 19.8438 22.625 20 23.25 19.5312C25.125 18.125 27.7813 18.2812 29.3438 20C31.2188 21.875 31.2188 24.8438 29.3438 26.5625L23.875 32.0312L21.2188 34.6875L21.0625 34.8438C19.1875 36.5625 16.375 36.4062 14.6562 34.6875C12.9375 32.9688 12.7812 30.1562 14.5 28.2812L14.6562 28.125L18.25 24.5312L18.4062 24.375C19.0312 23.9062 19.9688 23.9062 20.4375 24.5312C21.0625 25.1562 21.0625 26.0938 20.4375 26.7188L16.8438 30.3125L16.6875 30.4688C16.2188 31.0938 16.2188 32.0312 16.8438 32.5C17.4688 33.125 18.4062 33.125 19.0312 32.5L22.625 28.9062L22.7812 28.75C24.3438 26.875 24.3438 24.0625 22.625 22.3438C20.75 20.4688 17.7812 20.4688 16.0625 22.3438L14.6562 23.75L14.5 23.9062L13.5625 24.8438L12.4687 25.9375C9.34375 29.0625 9.34375 33.9062 12.4687 37.0312C15.5937 40.1562 20.4375 40.1562 23.5625 37.0312L27.1562 33.4375L27.3125 33.2812L31.8437 28.75L32.1562 28.4375C34.6562 25.4688 34.6562 20.625 31.6875 17.6562Z" fill="white"/>\n    </svg>\n    ';var n=document.createElement("input");return n.type="file",n.style.display="none",n.multiple=!0,t.addEventListener("click",(function(){return n.click()})),{button:t,fileInput:n}}},{key:"handleFileInputChange",value:function(e,t,n,o,r,s){var a=this;if(0!==e.files.length){var i=this.replaceInputWithEditableDiv(e,t,o),c=t.querySelector(".".concat(b.dQ)),l=t.querySelector(".".concat(b.QQ));l&&(l.style.display="none");var d=this.createUploadButton();c&&t.contains(c)?t.replaceChild(d,c):t.appendChild(d),d.addEventListener("click",vt(mt().mark((function p(){var u,h,f,g,m,y,v,_,b,w,x,C;return mt().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return u=a.collectTextAndImagesFromEditable(i),h=u.textData,f=new FormData,Array.from(e.files).forEach((function(e){return f.append("file",e,e.name)})),f.append("filename","upload Multi"),f.append("sometext_data",JSON.stringify(h)),f.append("channel_id","".concat(o.state.loggedInUser.id,"__to__").concat(n.id)),g=r("chat_box_inner_wrapper"),p.next=9,a.uploadMFiles({method:"POST",body:f});case 9:if(m=p.sent,y=o.state.activeWindowObj.uid||o.state.activeWindowObj.id,v=s.uid||s.id,_={room:"global_for__"+y,type:"NEW_FILE_MIXED_V1",message:{msg_id:g,ret_id:g,timestamp:Date.now(),result:a.prepareFUpayload(h,m),frm_user:{id:v,user:s.full_name||v},to_user:{id:y}}},JSON.parse(localStorage.getItem("tezkit_app_data")),b=a.transformMsgObject(_,a),a.state.socket.emit("ON_FILE_UPLOAD",b),!(w=localStorage.getItem("tezkit_app_data"))){p.next=29;break}return x=JSON.parse(w),a.addMessageToUserChatBox(_,"NEW_FILE_MIXED_V1"),_.app_name=x.app_name,console.log("asejfsjfsdfsdfs"),p.next=24,D(_,s);case 24:(C=o.state.prv_inp)&&t.contains(i)&&t.replaceChild(C,i),t.contains(d)&&t.replaceChild(c,d),l&&(l.style.display="",l.disabled=!1,l.classList.remove("attachBtns")),C&&(C.value="");case 29:case"end":return p.stop()}}),p)}))))}}},{key:"replaceInputWithEditableDiv",value:function(e,t,n){var o=t.querySelector("input.".concat(b.Xs));if(o){var r=document.createElement("div");return r.contentEditable="true",Object.assign(r.style,{border:"1px solid #ddd",padding:"10px",borderRadius:"4px",overflow:"auto",maxHeight:"300px",marginBottom:"10px",width:"90%",display:"flex"}),Array.from(e.files).forEach((function(e){var t=new FileReader;t.onload=function(t){var n=document.createElement("img");n.src=t.target.result,n.setAttribute("data-filename",e.name),n.style.width="100%",n.style.height="100px",n.style.objectFit="cover";var o=document.createElement("p");o.style.display="flex",o.style.width="100%",o.appendChild(n),r.appendChild(o)},t.readAsDataURL(e)})),n.state.prv_inp=o,t.replaceChild(r,o),r}console.error("No input found to replace!")}},{key:"createUploadButton",value:function(){var e=document.createElement("button");return e.className=b.dQ,e.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ',e}},{key:"collectTextAndImagesFromEditable",value:function(e){var t=[];return e.childNodes.forEach((function(e){var n=[];"P"===e.nodeName&&e.childNodes.forEach((function(e){if(e.nodeType===Node.TEXT_NODE)n.push({value:e.textContent,type:"text"});else if("IMG"===e.nodeName){var t=e.getAttribute("data-filename");n.push({value:t,type:"img"})}})),t.push(n)})),{textData:t}}},{key:"addReactionToDB",value:function(e){if(console.log("sdfsdfreactPayloadsadf",e),e.msg_id.length>0){console.log(e,"Here is the payloadsdf");var t=localStorage.getItem("token");fetch("https://chats.".concat("magicchat.io","/").concat("prod","/update_chat"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){console.log("Reaction updated successfully:",e)})).catch((function(e){console.error("Error updating reaction:",e)}))}}},{key:"addReaction",value:function(e,t){console.log("arewnoterwehereparentElement",e);var n=e.querySelector('[id^="msg_id__"]');console.log("parentElementsdf",n),n.querySelector(".".concat(b.C$," > div"));var o=e.querySelector(".msgReactions");o||((o=document.createElement("div")).className="msgReactions",o.classList.add(b.cw),e.style.position="relative",e.appendChild(o));var r=document.createElement("div");r.textContent=t,1===o.children.length?o.replaceChild(r,o.children[0]):(o.innerHTML="",o.appendChild(r))}},{key:"addMessageToUserChatBox",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"REGULAR",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("addchatmessage useru",e,_t(e)),console.log("is it fired both times?",e);var r=e,s=this.state.loggedInUser.hasOwnProperty("uid")?this.state.loggedInUser.uid:this.state.loggedInUser.id,a=document.getElementById("chatBody"),i=r.message.frm_user.id===s?"YOuH":"OtherH";console.log("here1",s);var c,l,d=this.createMessageDivWrapper(i),p=this.outerMsgRowDiv();console.log("here2"),console.log("right_u_idsdfsdfsdf",s);var u=function(e){c=t.innerMsgDivWrap(r,e),l=t.createEmojiContentDiv(),console.log("here3")};if(console.log("what erewrsisdf",n),"BOT"!==n&&"REPLY"!==n&&"REGULAR"!==n&&r.message.frm_user.id!==s||"NEW_FILE_MIXED_V1"===n)"NEW_FILE_MIXED_V1"===n&&u(this.createDocumentMsgDiv(r));else{var h=document.createElement("div");if(h.textContent=r.message.message,u(h),"REPLY"===n){var f=document.createElement("div");f.classList.add(b.ZT);var g=document.createElement("div");g.textContent=r.message.to_msg.by_who,g.style.color="#003299",g.style.fontWeight="600";var m=document.createElement("div");m.textContent=r.message.to_msg.msg,m.style.paddingTop="5px",f.append(g,m),c.insertBefore(f,c.firstChild)}}if(d.appendChild(p),p.append(l,c),r.message.frm_user.id===s){var y=c.querySelector(".status"),v=c.querySelector(".".concat(b.vE));console.log(v,"messageContentDivmessageContentDivmessageContentDiv",c),y.innerHTML="DELIVERED"===r.message.status||"READ"===r.message.status?"&#10003;&#10003;":"&#10003;",y.style.color="READ"===r.message.status?"#95FF8F":"#fff",y.style.fontSize="20px",v.appendChild(y)}var _=this.createDownIcon();p.addEventListener("mouseover",(function(){return t.handleMouseOver(!1,l,_)})),p.addEventListener("mouseout",(function(){return t.handleMouseOut(!1,l,_)})),c.insertBefore(_,c.firstChild),r.message.reaction&&this.addReaction(c.parentElement,r.message.reaction);var w=document.querySelector(".".concat(b.u9));console.log("chatBoxchatBox",w),w.addEventListener("click",(function(e){return t.handleChatBoxClick(e)})),l.addEventListener("click",(function(e){e.stopPropagation(),t.toggleEmojiReactions(e)})),_.addEventListener("click",(function(e){e.stopPropagation(),t.handleDownIconClick(e,c,l,_)})),console.log("sdfsdkfjsdfoiasgsdf",d),o?(console.log("?arnetwhere?"),a.prepend(d)):(console.log("arnetwhere?"),a.appendChild(d)),console.log("hereattheend",a.childElementCount)}},{key:"addMessageToBotChatBox",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INCOMING";console.log("is it called in qna?"),console.log("direction:",o),console.log("should be true when data from api comes???frm_toptype"),console.log("is it missing the messageObj1 msg_id in REPLY case",e),console.log("directionwhatisgoingon in there?type",e);var r=e,s=document.querySelector(".".concat(b._3)),a="OUTGOING"===o?"display: flex; justify-content: flex-end; ":"display: flex; justify-content: flex-start;";console.log("here1");var i=this.createMessageDivWrapper("YOuH");i.setAttribute("style",a);var c,l=this.outerMsgRowDiv();console.log("here2");var d=document.createElement("div");d.textContent=r.message.message,function(e){c=t.innerMsgDivWrap(r,e),"INCOMING"===o&&(c.style.backgroundColor="#edf2fb",c.style.color="#121723",c.style.borderRadius="18px 18px 18px 0px"),console.log("here3")}(d),i.appendChild(l),l.append(c),n?s.prepend(i):s.appendChild(i),console.log("hereattheend",s.childElementCount)}},{key:"createMessageDivWrapper",value:function(e){console.log("dowe have a whoe",e);var t=document.createElement("div");t.style.justifyContent="YOuH"==e?"right":"left";var n="YOuH"===e?b.vI:b.W1;return t.classList.add(n),t}},{key:"createDocumentMsgDiv",value:function(e){var t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.gap="10px",console.log("wht is this text data",e);var n=document.createElement("div");return e.message.result.forEach((function(e){var t=document.createElement("p");e.forEach((function(e){if("text"===e.type){var n=document.createTextNode(e.value);t.appendChild(n)}else if("img"===e.type){var o=document.createElement("img");o.src=e.value,o.alt="Image",o.style.maxWidth="100%",t.appendChild(o)}})),n.appendChild(t)})),t.appendChild(n),t}},{key:"outerMsgRowDiv",value:function(){var e=document.createElement("div");return e.className=b.CX,e}},{key:"innerMsgDivWrap",value:function(e,t){console.log("messageObjsadfsadf",e);var n=document.createElement("div");console.log("arewehere2",e);var o=e.message.msg_id;function r(e,t){return new Date(e).toLocaleString("en-IN",{timeZone:t,hour12:!0,hour:"2-digit",minute:"2-digit"})}return n.setAttribute("id","".concat(o)),n.className=b.d6,console.log(r(1750766734356)),n.innerHTML="\n            <div class=".concat(b.r1," >\n                <div class=").concat(b.C$,">\n                </div>\n                <div class= ").concat(b.vE,">\n                    <div>").concat(r(e.message.timestamp),'</div>\n                    <div class="status"></div>\n                </div>\n            </div>\n        '),n.querySelector(".".concat(b.C$)).appendChild(t),n}},{key:"createEmojiContentDiv",value:function(){var e=document.createElement("div");return e.className=b.Zg,e.innerHTML="&#9786",e}},{key:"createDownIcon",value:function(){var e=document.createElement("div");return e.innerHTML="&#709",e.classList.add(b.FW),e}},{key:"handleMouseOver",value:function(e,t,n){e||(t.style.visibility="visible",n.style.visibility="visible")}},{key:"handleMouseOut",value:function(e,t,n){e||(t.style.visibility="hidden",n.style.visibility="hidden")}},{key:"toggleEmojiReactions",value:function(e){var t=e.target.parentElement;console.log("target parentElement",t);var n=t.querySelector("#open-emoji-wrap");console.log("existingWrapper parentElement",n),n?n.remove():this.createEmojiReactions(t)}},{key:"createEmojiReactions",value:function(e){var t=this;console.log("whatiesthignparentElement",e);var n=document.createElement("div");n.setAttribute("id","open-emoji-wrap"),n.classList.add(b.Yw),["","","","","",""].forEach((function(o){var r=document.createElement("div");r.textContent=o,r.style.marginRight="8px",r.onclick=function(){return t.handleEmojiClick(e,o)},n.appendChild(r)})),e.appendChild(n)}},{key:"handleEmojiClick",value:function(e,t){console.log("arewnoterweheredssdcanwegetapp_name and id here?",this.state);var n=e.querySelector('[id^="msg_id__"]');console.log(e,"asdfsadwhewrdflkjgjdfgdfgfasdfd",n.id);var o=n.querySelector(".".concat(b.C$," > div"));console.log("this.state.activeWindowObjsdfsdf",this.state);var r=localStorage.getItem("tezkit_app_data");if(console.log("initialized1111sdf111",r),r){var s=JSON.parse(r);console.log("tezkit_app_pdtezkit_app_pdataatasdfsd",s.settings.version);var a="V1"==s.settings.version?this.state.activeWindowObj.id:this.state.activeWindowObj.uid;console.log("sadfjsdfsadfact_wind_id",a),this.state.socket.emit("ON_MESSAGE_STATUS_CHANGED",{action:"MSG_REACTION_EVENT",ret_id:n.id,room:"global_for__"+a,message:t,to_msg:{msg:o.textContent},timestamp:Date.now()});var i={msg_id:n.id,reaction:t,app_name:this.state.loggedInUser.app_name};this.addReactionToDB(i);var c=document.createElement("div");c.textContent=t,c.classList.add(b.cw),e.style.position="relative",e.appendChild(c)}}},{key:"handleDownIconClick",value:function(e,t){var n=this,o=e.target,r=o,s=!1,a=document.createElement("div");a.setAttribute("id","dropdown-popup"),a.style.position="absolute",a.style.top="49px",a.style.right="-5px",a.style.width="150px",a.style.height="auto",a.style.backgroundColor="#fff",a.style.color="#000",a.style.borderRadius="5px",a.style.zIndex=103,a.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",a.style.cursor="pointer",a.style.overflow="hidden",t.appendChild(a);var i=document.createElement("div");function c(e,t,n,o){e.addEventListener("mouseenter",(function(){e.style.backgroundColor=t,e.style.borderRadius=o})),e.addEventListener("mouseleave",(function(){e.style.backgroundColor=n}))}i.style.textAlign="left",i.style.borderRadius="10px",a.appendChild(i);var l=document.createElement("div");l.textContent="Info",l.style.padding="10px 20px 10px 15px",i.appendChild(l);var d=document.createElement("div");d.textContent="Reply",d.style.padding="10px 20px 10px 15px",d.addEventListener("click",(function(e){console.log("Test click"),n.handleReplyButtonClick(e,a)})),i.appendChild(d);var p=document.createElement("div");if(p.textContent="Copy",p.style.padding="10px 20px 10px 15px",i.appendChild(p),console.log("wahteriwe istarget",o),o.closest(".me-left")){console.log(o.closest(".me-left"),"target valuevcb",o);var u=this.createEditButton(o.parentElement.parentElement.querySelector('[id^="msg_id__"]').id,this,o);u&&(u.style.padding="10px 20px 10px 15px",i.appendChild(u),c(u,"#f0f0f0","","0px 0px 10px 10px"))}c(l,"#f0f0f0","","10px 10px 0 0"),c(p,"#f0f0f0","","0px"),c(d,"#f0f0f0","","0px"),s=!s,i.style.display=s?"block":"none";var h=r.parentElement.querySelector("#open-emoji-wrap");h&&(h.style.display="none"),i.addEventListener("click",(function(e){var t=e.target;t===l?console.log("Info button clicked"):t===d?console.log("Reply button clicked"):t===p?console.log("Copy button clicked"):null===t&&console.log("Edit button clicked"),a.style.display="none",a.style.border="1px solid red",s=!1})),document.addEventListener("click",(function e(t){a.contains(t.target)||r.contains(t.target)||document.removeEventListener("click",e)}))}},{key:"handleChatBoxClick",value:function(e){var t=e.target,n=document.querySelectorAll("#open-emoji-wrap, #dropdown-popup");t.closest('[id^="msg_id__"]')||n.forEach((function(e){return e.remove()}))}},{key:"handleReplyButtonClick",value:function(e,t){var n=this;console.log("Handle Reply Button Clicked"),console.log("Event:",e),console.log("Reply Mode Modal:",t);var o=this,r=document.getElementById("input-box-div-wrapper");r.classList.add("reply_input_box");var s=r.firstElementChild,a=s&&s.nextElementSibling!==r.lastElementChild?s.nextElementSibling:null,i=r.lastElementChild;a&&(a.style.display="none",o.state.prv_middle_child=a);var c=e.currentTarget.closest('[id^="msg_id__"]'),l=c.cloneNode(!0);l.removeChild(l.lastElementChild);var d=l.querySelector("div.".concat(b.C$," > div"));l.innerHTML="",l.appendChild(d),l.style.width="100%",l.style.maxWidth="100%",l.style.border="none",l.style.borderLeft="10px solid #C887FE",l.style.background="#f3f3f3",l.style.color="black",l.style.borderRadius="5px",l.style.padding="10px",l.style.maxHeight="120px",l.style.overflow="hidden";var p=document.createElement("div");p.style.display="flex",p.style.alignItems="center",p.style.gap="10px";var u=document.createElement("div");u.innerHTML="&times;",u.style.fontSize="34px",u.style.textAlign="center",u.style.cursor="pointer";var h=document.createElement("div");if(h.innerText="me-left"==c.parentElement.parentElement.classList.value?"You":"Other",h.style.color="#C887FE",h.style.padding="3px 0",h.style.fontSize="16px",h.style.fontWeight="600",l.insertBefore(h,l.firstChild),s){var f=document.createElement("div");f.style.background="white",f.style.padding="15px",f.style.width="100%",console.log("for document upload as wel?");var g=document.createElement("div");g.setAttribute("data-placeholder","Type your reply..."),g.setAttribute("contenteditable","true"),g.className="editable-input";var m=document.createElement("div");if(m.style.width="100%",m.style.borderRadius="0px",p.appendChild(l),p.appendChild(u),m.appendChild(p),f.appendChild(m),m.appendChild(g),r.replaceChild(f,s),i){var y=document.createElement("button");y.className=b.dQ,y.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n        </svg>',o.state.prv_send_btn=i,r.removeChild(i),r.appendChild(y);var v=function(){r.replaceChild(s,f),r.replaceChild(i,y),o.state.prv_middle_child&&(o.state.prv_middle_child.style.display="")};y.addEventListener("click",vt(mt().mark((function e(){var t,r,s,a,i,d,p,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=g.textContent)&&(r=z(),s=n.state.activeWindowObj.hasOwnProperty("uid")?n.state.activeWindowObj.uid:n.state.activeWindowObj.id,a=n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id,i={room:"global_for__"+s,type:"REPLY",message:{msg_id:r,timestamp:Date.now(),status:"SENT",frm_user:{user:o.state.loggedInUser.full_name||a,id:a},to_user:{user:o.state.activeWindowObj.full_name||s,id:s},to_msg:{msg:l.children[1].innerText,msg_id:l.id,by_who:"me-left"==c.parentElement.parentElement.classList.value?"You":"Other"},message:t}},o.addMessageToUserChatBox(i,"REPLY"),d=i.message.msg_id,i.message.ret_id=d,p=n.transformMsgObject(i,n),console.log("whwrewrwerwer?modRplyEventPayload",p),n.state.socket.emit("ON_REPLY_ARRIVAL",p),v(),u=JSON.parse(localStorage.getItem("tezkit_app_data")),p.app_name=u.app_name,console.log(u,"sajdofijsdmodRplyEventPayloadfsdf",p),D(p,n.state.loggedInUser));case 2:case"end":return e.stop()}}),e)})))),u.addEventListener("click",v)}}}},{key:"sendAMsgToOtherClient",value:function(e,t,n){var o,r,s=document.getElementById(e);console.log("whatewr ismsg_id",s);var a=s.querySelector(".".concat(b.C$)),i=a.children[0].textContent;!function(e,t){console.log("what is it heresdf",e);var n=e.children[0];console.log("spanElementsdfsadf",n),n&&n.nodeType===Node.ELEMENT_NODE?n.textContent=t:console.log("The previous sibling is not a text node or it doesn't exist.")}(a,t),console.log("whawtusprv_full_msg",i);var c,l={action:"MSG_UPDATED_EVENT",ret_id:e,room:"global_for__"+n,message:t,to_msg:{msg:i},timestamp:Date.now()},d=JSON.parse(localStorage.getItem("tezkit_app_data")),p=null===(o=this.state)||void 0===o?void 0:o.p2a_connection_with;"true"===Ct&&"P2A"===(null==d||null===(r=d.settings)||void 0===r?void 0:r.app_type)&&"support_type"===(null==p?void 0:p.user_type)&&(console.log("arweeheneverher?"),null!==(c=l.room)&&void 0!==c&&c.startsWith("global_for__")&&(l.room="support_for__".concat(p.user_id)),this.state.socket.emit("ON_MESSAGE_STATUS_CHANGED",l))}},{key:"createEditButton",value:function(e,t,n){console.log("here it is",e);var o=document.createElement("div");return o.textContent="Edit",o.addEventListener("click",(function(n){var o=n.target,r=document.getElementById("input-box-div-wrapper");console.log("Is it an input box? If yes, what is the value?",r,o.firstChild.textContent);var s=document.createElement("div");s.classList.add("editOverlay");var a=document.createElement("div");a.classList.add("editConent"),a.innerHTML='\n      <div class="popup-container">\n      <button id="close-popup-btn" class="popup-close-btn">\n      <i class="fa fa-close"></i>\n      </button>\n      <p style="font-size: 28px; font-weight:600;">Edit this content:</p>\n      \n      <div class="popup-input-wrap">\n      <input type="text" id="edit-input" value="'.concat(o.textContent,'" class="popup-input">\n      <button id="send-btn" class="popup-send-btn">\n      <i class="fa fa-paper-plane"></i>\n\n      </button>\n      </div> \n      </div>\n      '),o.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.appendChild(s),o.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.appendChild(a),document.getElementById("send-btn").addEventListener("click",(function(){var n=document.getElementById("edit-input").value;t.sendAMsgToOtherClient(e,n,t.state.activeWindowObj.id),console.log("werweqrwqerwqecurrenddtElement",this,t);var o={msg_id:e,message:n,type:"message",app_name:t.state.activeWindowObj.app_name};console.log("edit payload",o),t.addReactionToDB(o),s.remove(),a.remove()})),document.getElementById("close-popup-btn").addEventListener("click",(function(){s.remove(),a.remove()}))})),o}},{key:"updateChat",value:function(e,t){console.log(e,"what is newstatus now",t);var n=document.getElementById(e.msg_id);if(console.log("let's grab it's first child",n),n){var o="DELIVERED"==t?'<span style="color: white;">&#10003;&#10003;</span>':"READ"==t?'<span style="color: #95FF8F;">&#10003;&#10003;</span>':'<span style="color: white;">&#10003;</span>';console.log("wahtis itdsf",e.msg_id);var r=n.querySelector(".status");console.log("what is this messageContentDiv",r,n),r?r.innerHTML="<div>".concat(o,"</div>"):console.error("tick icon not found! Kindly Contact Admin!")}else console.log("Message with id "+e.msg_id+" not found.")}},{key:"updateMultipleChatStatus",value:function(e,t){console.log(t,"newStatusmessageObjssdafsdfsd",e),e.msg_id.forEach((function(e){console.log(e,"what is newstatus nowQQQ",t);var n=document.getElementById(e);if(console.log("let's grab it's first child",n),n){var o="DELIVERED"==t?'<span style="color: white;">&#10003;&#10003;</span>':"READ"==t?'<span style="color: rgb(149, 255, 143);">&#10003;&#10003;</span>':'<span style="color: white;">&#10003;</span>';console.log("wahtis itdsf",e);var r=n.querySelector(".status");console.log("what is this messageContentDiv",r,n),r?r.innerHTML="<div>".concat(o,"</div>"):console.error("tick icon not found! Kindly Contact Admin!")}else console.log("Message with id "+e+" not found.")}))}},{key:"updateMessageReactionInLS",value:function(e,t,n,o){var r,s=JSON.parse(localStorage.getItem("tezkit_msgs_data_read"));if(s&&s[e]&&s[e][t]){var a=s[e][t].msgs;console.log("egre rwearwer smessages",a);var i=a.find((function(e){return e.message&&e.message.msg_id===n}));i?(i.message.reaction=o,r=i,console.log('Message reaction updated to "'.concat(o,'"'))):console.log("Message ID not found.")}else console.log("App name or user ID not found in data.");return r}},{key:"updateMessageStatusInLS",value:function(e,t,n,o){var r=JSON.parse(localStorage.getItem("tezkit_msgs_data_read"));if(console.log(r,"xcg which one is wrong app_name, user_id, msg_id, update_to_status",e,t,n,o),r&&r[e]&&r[e][t]){var s=r[e][t].msgs.find((function(e){return e.message&&e.message.msg_id===n}));s?(s.message.status=o,console.log('Message status updated to "'.concat(o,'"'))):console.log("Message ID not found.")}else console.log("App name or user ID not found in data.")}},{key:"insertSingleChat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(console.log(n,"New chat message:",e),!e.message.msg_id){var o=z();e.message.msg_id=o}this.addMessageToUserChatBox(e,e.type,n)}},{key:"insertBulkChats",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;e.forEach((function(e){t.insertSingleChat(e,n,o)}))}}],t&&bt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,s}();return o})()));