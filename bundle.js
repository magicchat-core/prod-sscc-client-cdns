/*! For license information please see bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.magicChatCore=t():e.magicChatCore=t()}(this,(()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},57:(e,t,n)=>{n.d(t,{Ay:()=>i});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,'body,\nhtml {\n  margin: 0;\n  padding: 0;\n  font-family: Arial, sans-serif;\n}\n:root {\n  --dark-text: #121723;\n  --text-color: #555;\n}\n\n.file-preview__Gel7V {\n  height: 100px;\n  width: 100px;\n}\n\n.attach_img__GaJng {\n  width: 24px;\n  height: 24px;\n}\n\n/* Header styling */\n.header__j7hD9nXt3QpLvFz1uY6j7m2__E8hWk {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: white;\n  height: 60px; /* Adjust the height as needed */\n  padding: 0 20px;\n}\n\n.header__j7hD9nXt3QpLvFz1uY6j7m2__E8hWk .left__V41nw {\n  font-size: 24px;\n}\n\n.header__j7hD9nXt3QpLvFz1uY6j7m2__E8hWk .right__SWCYs {\n  display: flex;\n  align-items: center;\n}\n\n.header__j7hD9nXt3QpLvFz1uY6j7m2__E8hWk button {\n  margin-left: 10px;\n  padding: 5px 10px;\n}\n\n.chat_header_wrapper__scwK3 {\n  position: relative;\n  /* width: 400px; */\n  width: 100%;\n}\n\n.close_modal__te4RZ {\n  position: absolute;\n  top: 20px;\n  right: 10px;\n  width: 30px;\n  height: 30px;\n  background: white;\n  color: black;\n  border-radius: 50%;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  z-index: 99;\n  outline: none;\n  border: none;\n  /* Exclude from masking */\n  mask: none;\n  -webkit-mask: none;\n}\n\n.custom-modal__o02kN {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 300px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 20px;\n  border-radius: 10px;\n  text-align: center;\n  z-index: 10000000;\n}\n\n.custom-modal-content__v6kGd {\n  background: white;\n  color: black;\n  padding: 15px;\n  border-radius: 5px;\n}\n\n.message-container__hWTrK {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n}\n.message__qsjPO {\n  position: relative;\n  padding: 10px;\n  border: 1px solid #ddd;\n  background: #f9f9f9;\n  border-radius: 30px 10px 10px 0px;\n  width: 80%;\n  word-wrap: break-word;\n  margin-bottom: 30px;\n  max-width: 250px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n}\n.message__qsjPO p {\n  padding: 5px 10px 0px 5px;\n  margin: 0px;\n}\n\n.message__qsjPO span {\n  padding: 2px 10px 12px 10px;\n}\n.admin__wgr9q {\n  background-color: rgb(163, 112, 206);\n  color: #fff;\n  border-radius: 10px 0px 30px 10px;\n  margin-left: auto;\n  /* align-self: flex-end; */\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  max-width: 250px;\n  width: 80%;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n}\n.admin__wgr9q span {\n  color: #fff;\n}\n\n.user__FU42T {\n  background-color: #fff;\n  color: black;\n  /* align-self: flex-start; */\n  border-radius: 0px 10px 10px 30px;\n  margin-right: auto;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n}\n.user__FU42T span {\n  color: black;\n}\n.attach_img__GaJng {\n  width: 20px;\n  height: 20px;\n}\n.bot-conroller__wW1Z7 {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.timestamp__HnaEW {\n  display: block;\n  font-size: 0.75em;\n  text-align: right;\n  color: #777;\n}\n\n/* Existing CSS */\n\n/* CSS for the full-screen div */\n.full-screen-div__S0obN {\n  display: flex;\n  width: 100%;\n  height: 100vh;\n  background-color: gray;\n}\n\n/* CSS for the left part */\n.left-part__P5s0s {\n  width: 35%;\n  height: 100%;\n  background-color: green;\n}\n\n/* CSS for the right part */\n.right-part__vGG24 {\n  width: 60%;\n  height: 100%;\n  background-color: red;\n  margin-left: 5%;\n}\n\n.input-conroller__mEyDD {\n  margin-right: 12px;\n}\n\n@keyframes slideInOut__Ssggm {\n  0% {\n    opacity: 0;\n    transform: translateX(-100%);\n  }\n  20% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n  80% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n}\n/* @keyframes shake {\n    0%, 100% {\n        transform: translateX(0);\n    }\n    25%, 75% {\n        transform: translateX(-5px);\n    }\n    50% {\n        transform: translateX(5px);\n    }\n}\n#chat_modal_opener__j7hD9nXt3QpLvFz1uY6j7m2:hover {\n    animation: shake 0.5s ease;\n} */\n\n@keyframes zoom__UDJHG {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n/* \n#chat_modal_opener__j7hD9nXt3QpLvFz1uY6j7m2 {\n  animation: zoom 2s infinite ease-in-out;\n} */\n.original-message__mkEpo {\n  background-color: rgb(160, 79, 227);\n  border-left: 5px solid rgb(200, 135, 254);\n  border-radius: 5px;\n  padding: 8px;\n}\n.reply-content__pN2Om {\n  padding: 0;\n}\n.chat_users_list__VcG90 {\n  width: 30%;\n  border-radius: 10px 0px 0px 10px;\n}\n.userList__ywG2c {\n  padding: 15px 10px;\n  border-bottom: 1px solid #ccc;\n  font-size: 16px;\n}\n\n.homeScreen__CPZrQ {\n  display: grid;\n  grid-template-rows: 90% 10%;\n  height: 100%;\n  width: 100%;\n  background-color: white;\n  border-radius: 10px;\n}\n.headContainer__IyRmK {\n  background-color: white;\n  overflow-y: auto;\n}\n.headings__KXUbV {\n  padding: 20px;\n  text-align: center;\n}\n.headingImg__vuoTF {\n  width: 230px;\n}\n.messageContainer__Zc4sU {\n  padding: 20px;\n}\n.recentMesg__QFQ1d {\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  background: white;\n  padding: 20px 10px;\n  border-radius: 5px;\n  color: black;\n  margin-bottom: 15px;\n}\n.questionBoxWrap__kGiqL {\n  background: rgb(163, 112, 206);\n  padding: 15px 10px;\n  margin-top: 5px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n}\n.questionBoxWrap__kGiqL span {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background-color: white;\n  color: rgb(163, 112, 206);\n}\n.askQuestion__PlKtd {\n  border: none;\n  border-radius: 5px;\n  background: transparent;\n  color: white;\n  cursor: pointer;\n  font-size: 16px;\n  /* text-decoration-line: underline; */\n}\n\n.footerDiv__H1DHc {\n  display: flex;\n  justify-content: space-between;\n  /* margin-top: 20px; */\n  box-shadow: rgba(0, 0, 0, 0.1) 0px -2px 6px 1px;\n  padding: 10px 50px;\n}\n.bottomTabs__V_QAp {\n  display: flex;\n  /* flex-direction: column; */\n  align-items: center;\n  gap: 8px;\n  padding: 0px 25px;\n  position: relative;\n  outline: none;\n  border: none;\n  font-size: 16px;\n  cursor: pointer;\n  background-color: transparent;\n}\n.active__S5pq0 {\n  color: rgb(163, 112, 206);\n}\n.bottomTabs__V_QAp.active__S5pq0::after {\n  content: "";\n  position: absolute;\n  top: -11px;\n  left: 50%;\n  width: 80%;\n  height: 6px;\n  background-color: rgb(163, 112, 206);\n  transform: translateX(-50%);\n  border-radius: 0px;\n}\n.footerIc__sK7Og {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  color: rgb(163, 112, 206);\n}\n.fa-message__E3tRZ {\n  background-color: transparent;\n  color: black;\n}\n.notificationBadge__d8vcH {\n  background: red;\n  color: white;\n  border-radius: 50%;\n  font-size: 12px;\n  width: 18px;\n  height: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 5px;\n  left: 36px;\n}\n.noUsersList__rAPXB {\n  text-align: center;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n@media screen and (max-width: 768px) {\n  .chat_modal__j7hD9nXt3QpLvFz1uY6j7m2___VrE6 {\n    flex-direction: column;\n    width: 90vw;\n    height: 80vh;\n    top: 15vh;\n  }\n  .chat_users_list__VcG90 {\n    width: 100%;\n    height: 100%;\n    border-radius: 10px;\n  }\n  /* .chat_screen_top_wrapper {\n    width: 100%;\n    height: 100%;\n    border-radius: 10px;\n    display: block;\n  } */\n  .back_button__JutlW {\n    display: none;\n  }\n  .chat_header_wrapper__scwK3 {\n    width: 100%;\n    height: 100%;\n  }\n  .chat_body__jSGUb {\n    height: 84%;\n  }\n  .attchementBtn__IVnlo {\n    right: 17%;\n  }\n}\n@media screen and (max-width: 568px) {\n  .attchementBtn__IVnlo {\n    right: 25%;\n  }\n}\n',""]);const i=s},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},s=[],i=0;i<e.length;i++){var l=e[i],c=o.base?l[0]+o.base:l[0],d=r[c]||0,p="".concat(c," ").concat(d);r[c]=d+1;var u=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var g=a(h,o);o.byIndex=i,t.splice(i,0,{identifier:p,updater:g,references:1})}s.push(p)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var r=o(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var i=n(r[s]);t[i].references--}for(var l=o(e,a),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,a,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},583:(e,t,n)=>{n.d(t,{Ay:()=>u,Bs:()=>d,M1:()=>l,Om:()=>p,_U:()=>c,iE:()=>i});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,'.wrapper__VIPHT {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.dual-ring__FhzYS {\n  position: relative;\n  width: 64px;\n  height: 64px;\n}\n\n.dual-ring__FhzYS::before,\n.dual-ring__FhzYS::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  border: 6px solid transparent;\n}\n\n.dual-ring__FhzYS::before {\n  border-top: 6px solid #4dc9ff;\n  border-top: 6px solid var(--primary-color);\n  animation: spinClockwise__bRjN9 1s linear infinite;\n}\n\n.dual-ring__FhzYS::after {\n  border-bottom: 6px solid #ff7ae9;\n  border-bottom: 6px solid #a370ce;\n  animation: spinCounterClockwise____M1_ 1.5s linear infinite;\n}\n.messgae__bSq4H {\n  color: #666;\n  font-size: 14px;\n  font-weight: 500;\n}\n@keyframes spinClockwise__bRjN9 {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes spinCounterClockwise____M1_ {\n  0% {\n    transform: rotate(360deg);\n  }\n  100% {\n    transform: rotate(0deg);\n  }\n}\n\n.loading-text__F0A1b {\n  color: var(--dark-text);\n  font-size: 18px;\n  font-weight: 600;\n  margin-top: 30px;\n  display: flex;\n  align-items: center;\n  font-family: sans-serif;\n  justify-content: center;\n}\n\n.dot__YwhJ5 {\n  animation: blink__e0bSk 1.4s infinite;\n  opacity: 0;\n  margin-left: 2px;\n  font-size: 22px;\n  color: var(--primary-color);\n}\n\n.dot__YwhJ5:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.dot__YwhJ5:nth-child(3) {\n  animation-delay: 0.4s;\n}\n.dot__YwhJ5:nth-child(4) {\n  animation-delay: 0.6s;\n}\n\n@keyframes blink__e0bSk {\n  0%,\n  80%,\n  100% {\n    opacity: 0;\n  }\n  40% {\n    opacity: 1;\n  }\n}\n',""]);var i="wrapper__VIPHT",l="dual-ring__FhzYS",c="messgae__bSq4H",d="loading-text__F0A1b",p="dot__YwhJ5";const u=s},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},674:(e,t,n)=>{n.d(t,{AJ:()=>g,Ay:()=>K,BD:()=>l,CG:()=>W,F9:()=>w,Gg:()=>u,In:()=>h,J1:()=>D,JA:()=>L,K0:()=>v,Kf:()=>z,LF:()=>R,Mz:()=>i,Oq:()=>I,Pm:()=>J,QN:()=>N,R$:()=>H,R1:()=>b,TY:()=>p,Tn:()=>P,U6:()=>k,Yq:()=>O,ZF:()=>M,aq:()=>C,bT:()=>U,hv:()=>m,ji:()=>T,jj:()=>f,kA:()=>c,lJ:()=>A,o1:()=>j,o6:()=>y,qe:()=>F,tE:()=>_,tc:()=>d,xA:()=>x,xL:()=>G,xM:()=>B,xg:()=>q,y6:()=>V,yy:()=>S,z9:()=>E});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,"/* Positioning classes */\n\n.loadingIndicator__umXfV {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  /* padding: 12px 16px; */\n  background: #f5f5f5;\n  border-radius: 18px;\n  border: 1px solid #e0e0e0;\n  min-width: 49px;\n  min-height: 23px;\n}\n\n.loadingDots__udm_T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  height: 20px;\n}\n\n.loadingDot__l9Fcu {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #666;\n  animation: wave__PE6Ap 1.5s ease-in-out infinite;\n}\n\n.loadingDot__l9Fcu:nth-child(1) {\n  animation-delay: 0s;\n}\n\n.loadingDot__l9Fcu:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.loadingDot__l9Fcu:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes wave__PE6Ap {\n  0%,\n  60%,\n  100% {\n    transform: translateY(0);\n    opacity: 0.6;\n  }\n  30% {\n    transform: translateY(-8px);\n    opacity: 1;\n  }\n}\n\n@keyframes pulse__WwkQP {\n  0% {\n    opacity: 0.6;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.6;\n  }\n}\n\n/* Ensure smooth transitions when replacing loading with content */\n/* .historyEntry {\n  transition: all 0.3s ease;\n} */\n\n.history-left__kbRF0 {\n  align-self: flex-start;\n  background: #f1f1f1;\n  border-radius: 18px 18px 18px 4px;\n  margin-right: auto;\n  max-width: 80%;\n}\n\n.history-right__j5hE7 {\n  align-self: flex-end;\n  background: #007bff;\n  color: white;\n  border-radius: 18px 18px 4px 18px;\n  margin-left: auto;\n  max-width: 80%;\n}\n\n.position-left__hhMul {\n  justify-content: flex-start;\n}\n.position-center__eQuJt {\n  justify-content: center;\n}\n.position-right__rRgXA {\n  justify-content: flex-end;\n}\n\n/* Animation classes */\n.animate-fadeInUp__U8tbh {\n  animation: fadeInUp__HCFAa 0.4s ease-out;\n}\n\n.animate-slideInLeft__NSSya {\n  animation: slideInLeft__QYAlo 0.35s ease-out;\n}\n\n.animate-slideInRight__ZKdbW {\n  animation: slideInRight__AtGXG 0.35s ease-out;\n}\n\n.animate-bounce__iLJ_y {\n  animation: bounce__uGnw8 0.6s ease-out;\n}\n\n.animate-pulse__uNRPD {\n  animation: pulse__WwkQP 0.5s ease-in-out;\n}\n\n/* Keyframes */\n@keyframes fadeInUp__HCFAa {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideInLeft__QYAlo {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes slideInRight__AtGXG {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes bounce__uGnw8 {\n  0%,\n  20%,\n  53%,\n  80%,\n  100% {\n    transform: translate3d(0, 0, 0);\n  }\n  40%,\n  43% {\n    transform: translate3d(0, -8px, 0);\n  }\n  70% {\n    transform: translate3d(0, -4px, 0);\n  }\n  90% {\n    transform: translate3d(0, -2px, 0);\n  }\n}\n\n@keyframes pulse__WwkQP {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.05);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n/* Content styling */\n/* .answerContent {\n  padding: 8px 12px;\n} */\n\n.answerText__NJO6b {\n  font-weight: bold;\n  margin-bottom: 4px;\n}\n\n.answerDescription__uymbg {\n  line-height: 1.4;\n}\n\n@keyframes fadeInSlideRight__hrISn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px); /* 20px left */\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0); /* natural position */\n  }\n}\n\n.animateFadeInSlideRight__PlT39 {\n  opacity: 0; /* start hidden */\n  animation: fadeInSlideRight__hrISn 0.4s ease-out forwards;\n}\n\n.backArrow__v3UrI {\n  color: white;\n  margin-right: 5px;\n  vertical-align: middle;\n}\n\n.restartBtn__dbdlM {\n  padding: 10px;\n  color: white;\n  background-color: #03142a;\n  font-size: 15px;\n  border-radius: 4px;\n  outline: none;\n  border: none;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.choice__JC1D8 {\n  background-color: #d8eee5;\n  color: #03142a;\n  border: none;\n  cursor: pointer;\n  border-radius: 6px;\n  font-size: 16px;\n  white-space: nowrap;\n  overflow-x: auto;\n  padding: 10px 20px;\n  white-space: nowrap;\n  width: auto;\n  flex: 0 0 auto;\n    scrollbar-color: transparent transparent;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n.choice_wrap__g3wFI {\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  max-width: 100%;\n  max-height: 200px;\n  overflow-x: auto;\n   scrollbar-color: transparent transparent;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n\n.choice__JC1D8::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  display: none !important;\n}\n\n.choice_wrap__g3wFI.horizontal__J3TIt {\n  flex-direction: row;\n  /* flex-wrap: wrap; */\n  justify-content: flex-start;\n}\n.expandToggleButton__egiVJ {\n  padding: 10px;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  border: 1px solid #a370ce;\n  color: #a370ce;\n  border-radius: 4px;\n  margin-left: 6px;\n}\n.root-question__Z5bh_ {\n  width: 20%;\n  padding: 10px;\n  border-radius: 20px;\n  background: #d8eee5;\n  color: black;\n  text-align: center;\n  font-size: 16px;\n  /* margin-bottom: 10px; */\n  cursor: pointer;\n}\n.root-question__Z5bh_:hover {\n  background-color: #d3f7e8;\n}\n.answer__r5CvZ {\n  align-self: flex-start;\n  display: inline-block;\n  background-color: var(--subSecondary);\n  color: var(--dark-text);\n  padding: 12px 16px;\n  border-radius: 18px 18px 18px 0px;\n  max-width: 350px;\n  word-wrap: break-word;\n}\n.formField__owZIF {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n  /* gap: 10px; */\n}\n.formField__owZIF label {\n  font-size: 12px;\n  font-weight: 600;\n  min-width: 67px;\n  word-wrap: break-word;\n}\n.formField__owZIF input {\n  width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n}\n\n.formField__owZIF input:focus {\n  border: 1px solid rgb(76, 76, 255);\n}\n.inputField__GuHe6 {\n  width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n  background: transparent;\n}\n.inputField__GuHe6:focus {\n  border: 1px solid rgb(76, 76, 255);\n}\n\n.formGroupTitle__NzuIG {\n  font-size: 20px;\n  font-weight: 600;\n  margin-bottom: 20px;\n  text-align: center;\n  color: #a370ce;\n}\n.historyEntry__xvkLe {\n  align-self: flex-end;\n  display: inline-block;\n  /* background: var(--primary-color);\n  color: var(--white-color); */\n  padding: 12px 16px;\n  /* border-radius: 18px 18px 0px; */\n  max-width: 350px;\n  word-wrap: break-word;\n  border-radius: 8px;\n  background: #e6e6e6;\n  color: #3f3f3f;\n  transition: all 0.3s ease;\n}\n.inputContainer__NegVH {\n  overflow-y: auto;\n  /* flex: 1; */\n  /* max-height: 200px; */\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 10px 20px;\n  border-top: 2px solid #ddd;\n}\n\n.submitBtn__zOEjT {\n  padding: 10px;\n  color: white;\n  background-color: #4a7feb;\n  font-size: 15px;\n  border-radius: 4px;\n  outline: none;\n  border: none;\n  /* align-self: flex-end; */\n  margin-bottom: 50px;\n  margin-top: 20px;\n}\n.radioGroup__wZTlT {\n  display: flex;\n}\n.checkboxGroup__WQ5a4 {\n  display: flex;\n}\n.rangeGroup__LOSeq {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n.toggleGroup__qHa5p {\n  display: flex;\n  align-items: center;\n}\n@media (max-width: 600px) {\n  .inputContainer__NegVH {\n    padding: 0px 20px;\n  }\n  .formField__owZIF label {\n    width: 60px;\n    min-width: 0px;\n  }\n  .formField__owZIF input {\n    width: 100%;\n    padding: 12px;\n    border: none;\n    border-radius: 6px;\n    outline: none;\n    border: 1px solid #ddd;\n  }\n  .formGroupTitle__NzuIG {\n    font-size: 28px;\n  }\n}\n",""]);var i="loadingIndicator__umXfV",l="loadingDots__udm_T",c="loadingDot__l9Fcu",d="wave__PE6Ap",p="history-left__kbRF0",u="history-right__j5hE7",h="position-left__hhMul",g="position-center__eQuJt",f="position-right__rRgXA",m="animate-fadeInUp__U8tbh",_="fadeInUp__HCFAa",y="animate-slideInLeft__NSSya",v="slideInLeft__QYAlo",b="animate-slideInRight__ZKdbW",x="slideInRight__AtGXG",w="animate-bounce__iLJ_y",E="bounce__uGnw8",C="animate-pulse__uNRPD",k="pulse__WwkQP",S="answerText__NJO6b",T="answerDescription__uymbg",I="animateFadeInSlideRight__PlT39",L="fadeInSlideRight__hrISn",A="backArrow__v3UrI",N="restartBtn__dbdlM",O="choice__JC1D8",D="choice_wrap__g3wFI",B="horizontal__J3TIt",U="expandToggleButton__egiVJ",j="root-question__Z5bh_",M="answer__r5CvZ",P="formField__owZIF",R="inputField__GuHe6",F="formGroupTitle__NzuIG",q="historyEntry__xvkLe",z="inputContainer__NegVH",G="submitBtn__zOEjT",H="radioGroup__wZTlT",J="checkboxGroup__WQ5a4",W="rangeGroup__LOSeq",V="toggleGroup__qHa5p";const K=s},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,a&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},873:(e,t,n)=>{n.d(t,{Ay:()=>c,KY:()=>l,bb:()=>i});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,".loader-wrapper__KH8Fr {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.loader-wrapper-inner__ldkXn {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  max-width: 300px;\n  text-align: center;\n}\n\n.cube__ab2BT {\n  width: 40px;\n  height: 40px;\n  position: relative;\n  transform: rotateZ(45deg);\n}\n\n.cube__ab2BT div {\n  position: absolute;\n  width: 50%;\n  height: 50%;\n  background: #4779c4;\n  animation: foldCube__UxDYG 2.4s infinite linear;\n  transform-origin: 100% 100%;\n}\n\n.cube__ab2BT div:nth-child(1) {\n  top: 0;\n  left: 0;\n  animation-delay: 0s;\n}\n\n.cube__ab2BT div:nth-child(2) {\n  top: 0;\n  left: 50%;\n  animation-delay: 0.3s;\n}\n\n.cube__ab2BT div:nth-child(3) {\n  top: 50%;\n  left: 0;\n  animation-delay: 0.6s;\n}\n\n.cube__ab2BT div:nth-child(4) {\n  top: 50%;\n  left: 50%;\n  animation-delay: 0.9s;\n}\n.loader-wrapper-inner__ldkXn .cube__ab2BT {\n  width: 70px;\n  height: 70px;\n  margin-bottom: 30px;\n}\n.loader-wrapper-inner__ldkXn .dot__OGJk8 {\n  font-size: 18px;\n  \n}\n@keyframes foldCube__UxDYG {\n  0%,\n  10% {\n    transform: perspective(140px) rotateX(-180deg);\n    opacity: 0;\n  }\n  25%,\n  75% {\n    transform: perspective(140px) rotateX(0deg);\n    opacity: 1;\n  }\n  90%,\n  100% {\n    transform: perspective(140px) rotateY(180deg);\n    opacity: 0;\n  }\n}\n\n.loading-text__qb1vl {\n  color: black;\n  font-size: 16px;\n  margin-top: 16px;\n  display: flex;\n  /* align-items: center;\n  font-family: sans-serif;\n  justify-content: center; */\n}\n\n.dot__OGJk8 {\n  animation: blink__J74Pa 1.4s infinite;\n  opacity: 0;\n  margin-left: 2px;\n  font-size: 28px;\n}\n\n.dot__OGJk8:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.dot__OGJk8:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n.dot__OGJk8:nth-child(4) {\n  animation-delay: 0.6s;\n}\n\n@keyframes blink__J74Pa {\n  0%,\n  80%,\n  100% {\n    opacity: 0;\n  }\n  40% {\n    opacity: 1;\n  }\n}\n",""]);var i="loader-wrapper-inner__ldkXn",l="cube__ab2BT";const c=s},882:(e,t,n)=>{n.d(t,{$A:()=>m,$Q:()=>pe,$b:()=>g,AL:()=>ae,AP:()=>Y,Ay:()=>He,BX:()=>Ne,C:()=>c,C$:()=>P,C2:()=>i,CL:()=>be,CX:()=>N,D:()=>me,DW:()=>re,FB:()=>ye,FW:()=>j,GH:()=>te,GS:()=>ge,H4:()=>h,HU:()=>je,Ht:()=>L,Io:()=>Oe,Iv:()=>_,JW:()=>T,JY:()=>H,Jn:()=>qe,Lm:()=>X,NY:()=>v,Ow:()=>Re,QQ:()=>k,R:()=>we,R8:()=>Le,RK:()=>_e,SZ:()=>b,So:()=>w,UI:()=>A,UK:()=>Ee,V5:()=>d,Vd:()=>ze,Vj:()=>S,W1:()=>D,W8:()=>W,WN:()=>fe,XB:()=>le,Xs:()=>$,YD:()=>u,YL:()=>y,Yw:()=>q,ZT:()=>z,ZX:()=>ue,Zg:()=>B,_3:()=>se,_W:()=>Ue,aJ:()=>Ce,av:()=>oe,bV:()=>Se,bs:()=>Ge,bw:()=>Q,cw:()=>F,d6:()=>U,dQ:()=>C,di:()=>xe,fP:()=>x,fX:()=>Ae,hD:()=>E,hT:()=>Me,jP:()=>I,l3:()=>de,lj:()=>ce,mJ:()=>G,nc:()=>Ie,og:()=>p,p9:()=>ve,py:()=>K,qZ:()=>De,qd:()=>Be,r1:()=>M,rH:()=>ie,tH:()=>Pe,tK:()=>V,tc:()=>l,tz:()=>Z,u1:()=>ke,u9:()=>ee,uD:()=>ne,us:()=>J,vE:()=>R,vI:()=>O,wF:()=>he,wt:()=>Te,wz:()=>f,zt:()=>Fe});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,'.soundDisable__bYhxD {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  background: #ffffff;\n  padding: 16px 20px;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  font-family: "Inter", system-ui, sans-serif;\n  max-width: 320px; /* slightly wider for button */\n  transition: box-shadow 0.2s ease-in-out, transform 0.15s ease;\n}\n\n.soundDisable__bYhxD:hover {\n  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.18);\n  transform: translateY(-1px);\n}\n\n.soundIcon___m2UH {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #f44336; /* Red for disable */\n  font-size: 22px;\n  flex-shrink: 0;\n  transition: color 0.2s ease;\n}\n\n.disabledSoundBtn__A9bE2 {\n  flex: 1;\n  padding: 10px 18px;\n  background-color: #f44336;\n  color: #ffffff;\n  border: none;\n  border-radius: 10px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease, transform 0.1s ease;\n}\n\n.disabledSoundBtn__A9bE2:hover {\n  background-color: #d32f2f;\n}\n\n.disabledSoundBtn__A9bE2:active {\n  transform: scale(0.96);\n}\n\n/* Optional: visually indicate disabled state */\n.disabledSoundBtn__A9bE2[disabled] {\n  background-color: #aaa !important;\n  cursor: not-allowed;\n  color: #fff;\n}\n.iniChatMsgLoader__YdqX8 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 100%;\n}\n\n/* Dark mode */\n@media (prefers-color-scheme: dark) {\n  .soundDisable__bYhxD {\n    background: #2c2c2c;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\n  }\n\n  .soundIcon___m2UH {\n    color: #ff7961;\n  }\n\n  .disabledSoundBtn__A9bE2 {\n    background-color: #ff7961;\n    color: #222;\n  }\n\n  .disabledSoundBtn__A9bE2:hover {\n    background-color: #f44336;\n  }\n\n  .disabledSoundBtn__A9bE2[disabled] {\n    background-color: #555 !important;\n    color: #ccc;\n  }\n}\n\n.systemMessageContainer__VLlq_ {\n  display: flex;\n  justify-content: center;\n  margin: 10px 0;\n}\n.dateSeparator__VlGQn {\n  border-bottom: 1px solid #d0d0d0;\n  text-align: center;\n  padding-bottom: 10px;\n  margin-bottom: 20px;\n}\n\n.systemMessage__u8tjv {\n  background: #f0fff4; /* soft green tint */\n  color: #2f855a; /* deep green text */\n  font-size: 15px;\n  font-weight: 500;\n  text-align: center;\n  padding: 10px 16px;\n  border-radius: 8px;\n  border: 1px solid #c6f6d5; /* subtle border */\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n  max-width: 80%;\n}\n\n.disabled_input_items__twYMS {\n  pointer-events: none;\n  opacity: 0.5;\n}\n\n.more_users_badge__SzeSt {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: #ddd;\n  color: #333;\n  font-size: 14px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: -15px;\n  z-index: 0;\n}\n\n.profile_logo__UOVT6 {\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-right: 8px;\n}\n\n.profile_logo__UOVT6 > div[class^="adminImg__"] {\n  position: relative;\n  margin-left: -15px; /* overlap amount (half of image width approx) */\n  z-index: 1;\n  transition: transform 0.2s ease;\n}\n\n.profile_logo__UOVT6 > div[class^="adminImg__"]:first-child {\n  margin-left: 0;\n}\n\n.profile_logo__UOVT6 > div[class^="adminImg__"]:hover {\n  transform: translateY(-3px);\n  z-index: 100; /* pop on hover */\n}\n\n.adminImg__ZqHS3 {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-color: transparent;\n}\n.supporUser__pearl {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-color: transparent;\n}\n.adminImg__ZqHS3 img {\n  width: 100%;\n  height: 100%;\n  object-fit: fill;\n  border-radius: 50%;\n  padding: 2px;\n}\n\n#loading-message__uKe80 {\n  visibility: hidden; /* still takes space */\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n#loading-message__uKe80.active__dQDmt {\n  visibility: visible;\n  opacity: 1;\n}\n\n.toggleViewBtn__2M7Xw {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  right: -2px;\n  border: none;\n  /* background: var(--primary-gradient); */\n  background-color: transparent;\n  /* border-radius: 50%; */\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  z-index: 1;\n  padding: 6px;\n}\n\n.toggleViewBtn__2M7Xw:hover .tooltip__NumVd {\n  visibility: visible;\n  opacity: 1;\n}\n.toggleViewBtn__2M7Xw svg {\n  padding: 3px;\n}\n.toggleSwitch__WBjt8 {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s ease;\n  transform: rotate(90deg);\n}\n/* .toggleSwitch:hover {\n  transform: scale(1.05);\n} */\n\n.toggleSwitch__WBjt8 svg circle {\n  transition: cx 0.3s ease;\n}\n\n.toggleSwitch__WBjt8 svg rect {\n  transition: fill 0.3s ease, stroke 0.3s ease;\n}\n\n.chat_header_bot_chat__Fu_8I {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.35);\n  background-color: rgb(163, 112, 206);\n  width: 100%;\n  height: 68px;\n  padding-left: 15px;\n\n  --r: 32px;\n  --s: 35px;\n  border-radius: 0 var(--r) 0 0;\n  --_m: /calc(1.5 * var(--r)) calc(1.5 * var(--r)) radial-gradient(\n      #000 72%,\n      #0000 74%\n    ) no-repeat;\n  mask: right calc(var(--s) + var(--r)) top 0 var(--_m),\n    right calc(var(--s) + var(--r)) var(--_m),\n    radial-gradient(var(--s) at 100% 0, #0000 99%, #000 101%)\n      calc(-1 * var(--r)) var(--r) no-repeat,\n    conic-gradient(\n      at calc(100% - var(--s) - 2 * var(--r)) calc(var(--s) + 2 * var(--r)),\n      #0000 25%,\n      #000 0\n    );\n  border-top-left-radius: 10px;\n}\n.chat_header_bot_chat__Fu_8I h3 {\n  font-size: 18px;\n  font-weight: 500;\n  color: white;\n}\n.chat_box_top_user_wrapper__uUOxF {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n}\n\n.chat_input__OHABp {\n  width: 100%;\n  padding: 16px 10px;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  color: var(--dark-text);\n  /* border: 1px solid #ddd; */\n}\n/* .chat_input:focus {\n  border: 1px solid #4a7feb;\n} */\n\n.input-box-div-wrapper__anPnJ {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n.input-box-div-wrapper__anPnJ .sendbtn___IRnj {\n  position: absolute;\n  right: 2%;\n}\n.attchementBtn__mOxY1 {\n  position: absolute;\n  right: 14%;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0px;\n}\nbutton.attchementBtn__mOxY1:hover,\nbutton.attchementBtn__mOxY1:active {\n  background: none;\n}\n.attchementBtn__mOxY1 svg {\n  width: 35px;\n  height: 35px;\n}\n.sendbtn___IRnj {\n  /* margin-left: 10px; */\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  outline: none;\n  border: none;\n  border-radius: 50%;\n  padding: 0px;\n  background-color: transparent;\n  /* position: absolute;\n  right: 2%; */\n  display: flex;\n  align-items: center;\n}\n.sendbtn___IRnj svg {\n  width: 35px;\n  height: 35px;\n}\nbutton.sendbtn___IRnj:hover,\nbutton.sendbtn___IRnj:active {\n  background-color: transparent; /* stays default */\n}\n.bot_input_inner_wrap__hhcLP {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 20px;\n  border-radius: 6px;\n  outline: none;\n  border: 1px solid #ddd;\n}\n.bot_input_inner_wrap__hhcLP .sendbtn___IRnj {\n  right: 4%;\n  margin-right: 10px;\n}\n.bot_input_wrapper_div__LM4VK {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-top: 1px solid #ccc;\n  padding: 15px 10px;\n}\n.showMore__L2pdD {\n  padding: 10px;\n  color: white;\n  background-color: #03142a;\n  font-size: 15px;\n  border-radius: 4px;\n  outline: none;\n  border: none;\n  align-self: flex-end;\n  margin-right: 10px;\n  font-size: 16px;\n}\n\n.input-act-wrap__qgDC7 {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n.botThinking__BJmYO {\n  color: var(--dark-text);\n  background: var(--subSecondary);\n  border-radius: 10px 10px 10px 0px;\n  max-width: 115px;\n  margin-left: 20px;\n  margin-bottom: 10px;\n  padding: 10px;\n  width: 80%;\n}\n.outerMsgRowDiv__uEoZp {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n.outerMsgRowDiv__uEoZp {\n  position: relative;\n}\n.me-left__jeuF8 .outerMsgRowDiv__uEoZp {\n  flex-direction: row;\n  justify-content: flex-start;\n}\n.other-right__nNOvP .outerMsgRowDiv__uEoZp {\n  flex-direction: row-reverse;\n  justify-content: flex-end;\n}\n.emoji__j2Rpm {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--white-color);\n  font-size: 40px;\n  padding-bottom: 7px;\n  visibility: hidden;\n  cursor: pointer;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  background-color: rgb(219, 219, 219);\n  position: relative;\n  z-index: 1;\n}\n.msgDiv__xzFQl {\n  padding: 0px 12px;\n  max-width: 350px;\n  position: relative;\n}\n\n.me-left__jeuF8 {\n  margin-bottom: 32px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: flex-end;\n  gap: 10px;\n}\n.other-right__nNOvP {\n  margin-bottom: 20px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: flex-end;\n  gap: 10px;\n}\n.me-left__jeuF8 .msgDiv__xzFQl {\n  color: var(--white-color);\n  background: var(--primary-color);\n  border-radius: 10px 10px 10px 10px;\n  background: #e0ffff;\n  color: black;\n}\n/* .me-left .frm-user-wrapper {\n  border: 3px solid var(--primary-color);\n}\n.other-right .frm-user-wrapper {\n  border: 3px solid #b0c9f5;\n} */\n.other-right__nNOvP .msgDiv__xzFQl {\n  color: var(--dark-text);\n  background: var(--subSecondary);\n  border-radius: 10px 10px 10px 0px;\n  background-color: white;\n}\n.downIc__jfJ2G {\n  font-size: 20px;\n  cursor: pointer;\n  visibility: hidden;\n  position: absolute;\n  right: 10px;\n  top: 2px;\n  padding-top: 5px;\n}\n.me-left__jeuF8 .downIc__jfJ2G {\n  color: var(--white-color);\n  color: var(--dark-text);\n}\n.other-right__nNOvP .downIc__jfJ2G {\n  color: var(--dark-text);\n}\n.showMsgWrap__QeqJt {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: flex-end;\n}\n.mine_message__XQ82h {\n  font-size: 20px;\n  color: var(--dark-text);\n  padding: 8px;\n  border-radius: 10px;\n  max-width: 350px;\n  word-wrap: break-word;\n  line-height: 1.3;\n}\n.time_status__yhwZE {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 12px;\n  color: var(--text-color);\n  margin-left: auto;\n}\n.msgReactions__Equ3R {\n  position: absolute;\n  bottom: -24px;\n  right: 10px;\n  transform: translateX(0);\n  font-size: 20px;\n  background: #fff;\n  padding: 5px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  z-index: 1;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 2px;\n}\n.me-left__jeuF8 .msgReactions__Equ3R {\n  right: 10px;\n}\n.other-right__nNOvP .msgReactions__Equ3R {\n  left: 10px;\n}\n.all-emoji-wrap__wj3eP {\n  position: absolute;\n  top: -10px;\n  background: rgb(225, 225, 225);\n  padding: 10px;\n  border-radius: 20px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 4px;\n  z-index: 100;\n  cursor: pointer;\n  display: inline-flex;\n}\n\n.me-left__jeuF8 .all-emoji-wrap__wj3eP {\n  right: 100%;\n  transform: translateX(155px);\n}\n.other-right__nNOvP .all-emoji-wrap__wj3eP {\n  left: 100%;\n  transform: translateX(-165px);\n}\n.replyMsgdiv__SQUzy {\n  width: 100%;\n  border-left: 5px solid #969696;\n  border-radius: 6px;\n  padding: 8px;\n  margin: 8px 0px;\n}\n.other-right__nNOvP .replyMsgdiv__SQUzy {\n  background: #e9e9e9;\n}\n.me-left__jeuF8 .replyMsgdiv__SQUzy {\n  background: #cbf8f8;\n}\n.reaction__f8RFk {\n  position: absolute;\n  bottom: -24px;\n  right: 10px;\n  transform: translateX(0);\n  font-size: 20px;\n  background: #fff;\n  padding: 5px;\n  border-radius: 50%;\n  border: 1px solid #ddd;\n  z-index: 1;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.tooltip__NumVd {\n  position: absolute;\n  top: 100%;\n  right: 0%;\n  background: black;\n  color: white;\n  padding: 5px 10px;\n  border-radius: 5px;\n  font-size: 14px;\n  white-space: nowrap;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  pointer-events: none;\n  z-index: 10;\n  margin-top: 10px;\n}\n.close_modal__D2Han {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  right: 10px;\n  border: none;\n  background: var(--primary-gradient);\n  border-radius: 50%;\n  cursor: pointer;\n  position: absolute;\n  top: 10px;\n  padding: 10px;\n  z-index: 1;\n}\n.close_modal__D2Han svg {\n  padding: 5px;\n}\n\n.chat_header_user_chat__u8qiG {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.35);\n  background-color: rgb(163, 112, 206);\n  width: 100%;\n  height: 68px;\n  flex-shrink: 0;\n  padding-left: 15px;\n  --r: 32px;\n  --s: 35px;\n  border-radius: 0 var(--r) 0 0;\n  --_m: /calc(1.5 * var(--r)) calc(1.5 * var(--r)) radial-gradient(\n      #000 72%,\n      #0000 74%\n    ) no-repeat;\n  mask: right calc(var(--s) + var(--r)) top 0 var(--_m),\n    right calc(var(--s) + var(--r)) var(--_m),\n    radial-gradient(var(--s) at 100% 0, #0000 99%, #000 101%)\n      calc(-1 * var(--r)) var(--r) no-repeat,\n    conic-gradient(\n      at calc(100% - var(--s) - 2 * var(--r)) calc(var(--s) + 2 * var(--r)),\n      #0000 25%,\n      #000 0\n    );\n  border-top-left-radius: 10px;\n}\n.chat_header_user_chat__u8qiG h3 {\n  font-size: 18px;\n  font-weight: 500;\n  color: white;\n}\n\n.chat_body__V8yeG {\n  padding: 10px;\n  /* overflow-y: auto; */\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  flex-grow: 1;\n  background: var(--white-color);\n  background-color: #efefef;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat_body__V8yeG::-webkit-scrollbar {\n  display: none;\n}\n\n.no-conversation-yet__TKGCD {\n  text-align: center;\n  padding: 20px;\n  color: rgb(102, 102, 102);\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.chat_header_wrapper__wd_h5 {\n  position: relative;\n  width: 100%;\n  height: 80px;\n  flex-shrink: 0;\n  display: flex;\n}\n\n.typingStatusWrapper__T57jH {\n  display: flex;\n  width: 100%;\n  padding: 10px;\n  justify-content: flex-start;\n  background: #efefef;\n}\n\n.typingBubble__AsLUa {\n      background: white;\n    padding: 3px 28px;\n    border-radius: 25px 10px 25px 10px;\n    max-width: 70%;\n    display: flex;\n    align-items: center;\n    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15);\n\n}\n\n.typingStatusText__nC74x {\n  font-size: 14px;\n  font-weight: 500;\n  color: #222;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n\n\n.chat_footer__Jhmwt {\n  display: flex;\n  padding: 15px 10px;\n  border-top: 1px solid #ccc;\n  flex-shrink: 0;\n  flex-direction: column;\n  background-color: white;\n}\n.input-box__ifj0e {\n  width: 100%;\n  padding: 16px 105px 16px 10px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n  outline: none;\n  color: var(--dark-text);\n}\n.input-box__ifj0e:focus {\n  border: 1px solid #4a7feb;\n}\n.chat_body_and_footer_wrapper_user__XS4fs {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  min-height: 0;\n  width: 100%;\n  flex: 1;\n  overflow: hidden;\n}\n.chat-body-userwrap-content__Umx3q {\n  flex-grow: 1;\n  overflow-y: auto;\n  background: #efefef;\n   overflow-x: scroll;\n  scrollbar-width: none;        /* Firefox */\n}\n\n.chat-body-userwrap-content__Umx3q::-webkit-scrollbar {\n  display: none;                /* Chrome, Edge, Safari */\n}\n.reply_input_box__D4QII .sendbtn___IRnj {\n  position: absolute;\n  right: 2%;\n  bottom: 11%;\n}\n.chat_body_and_footer_wrapper_bot__k5CKu {\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  flex-grow: 1;\n  width: 100%;\n  border-radius: 0px 0px 8px 8px;\n}\n.chat_body_contentWarp__C5AX2 {\n  /* border: 3px solid green; */\n  overflow: auto;\n  margin: auto 0px;\n  margin-bottom: 0px;\n}\n.chat_box_top_bot_wrapper__M4G2y {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n}\n.chat_bot_history__gl2na {\n  display: flex;\n  flex-direction: column;\n  /* justify-content: flex-end; */\n  /* margin-top: auto; */\n  font-size: 13px;\n  font-family: Arial, sans-serif;\n  overflow-y: auto;\n  min-height: 300px; /* must have */\n  /* max-height: 400px; optional */\n  gap: 10px;\n  padding: 10px;\n}\n.edittableDiv_File__acDtR {\n  border: 1px solid rgb(221, 221, 221);\n  padding: 10px;\n  border-radius: 4px;\n  overflow: auto;\n  max-height: 300px;\n  margin-bottom: 10px;\n  width: 90%;\n  display: flex;\n  flex-direction: column;\n  color: var(--dark-text);\n}\n.bot_chat_footer__jp_UE {\n  display: flex;\n  flex-direction: column;\n  padding: 15px 0px;\n  /* border-top: 1px solid #ccc;\n  box-shadow: rgba(17, 17, 26, 0.25) 0px 1px 0px,\n    rgba(17, 17, 26, 0.25) 0px 0px 8px; */\n  /* max-height: 300px; */\n  flex-shrink: 0;\n  padding-bottom: 0px;\n}\n.bot_body__c93GG {\n  display: flex;\n  padding: 15px 10px;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 20px;\n  border-top: 1px solid #ddd;\n}\n.time_status__yhwZE .status___CJCm {\n  font-size: 14px;\n}\n.back_button__zLXRc {\n  background-color: var(--white-color);\n  padding: 5px;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 14px;\n  margin-right: 5px;\n  display: none;\n}\n.mixfileMsgDiv__uUD0V .mine_message__XQ82h > div {\n  padding-right: 0px;\n}\n.mixfileMsgDiv__uUD0V .mine_message__XQ82h {\n  padding-bottom: 0px;\n}\n.mixfileMsgDiv__uUD0V .time_status__yhwZE {\n  position: absolute;\n  right: 8px;\n  bottom: 4px;\n}\n/* ==========================\n   MOBILE FIRST (default)\n=========================== */\n.chat_announcement__Jzkdo {\n  animation: slideDown__lkuZa 0.5s ease-out;\n  overflow: hidden;\n  width: 100%;\n  font-weight: 500;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0 10px;\n}\n\n/* HEADER */\n.announcement-header__sP2yB {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  font-size: 14px;\n  padding: 6px 10px;\n  background-color: #ffffffa2;\n  border-bottom: 1px solid #cfcfcf;\n  position: relative;\n  width: 100%;\n}\n\n.header-title__Nm5Ru {\n  flex: 1;\n  text-align: left;\n  color: #1b5e20;\n  font-size: 14px;\n}\n\n.collapse-icon__raVy7 {\n  font-size: 14px;\n  cursor: pointer;\n  color: #1b5e20;\n  transition: transform 0.3s ease;\n}\n\n/* USER ICONS */\n.user-icon__eOf6p {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  border: 2px solid #1b5e20;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--white-color);\n}\n\n.user-icon__eOf6p::before {\n  content: "ðŸ‘¤";\n  font-size: 14px;\n}\n\n/* VISUAL SECTION */\n.connection-visual__CVISX {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  margin: 10px 0;\n  gap: 8px;\n  align-items: flex-end;\n}\n.connection-line__HATTK {\n  overflow: visible;\n}\n.connection-line__HATTK {\n  position: relative;\n}\n.connection-wrapper__qDt7_ {\n  display: flex;\n  text-align: center;\n  align-items: baseline;\n}\n\n.error-align__TjwjD {\n  /* only active when error (line) shows */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n\n.connection-line__HATTK text {\n  dominant-baseline: middle;\n  text-anchor: middle;\n}\n/* CONNECTING ANIMATION */\n.connection-visual__CVISX.connecting__a8L6k path {\n  stroke-dasharray: 6, 6;\n  animation: dashMove__wUn1B 2s linear infinite;\n}\n.connection-visual__CVISX.connecting__a8L6k .moving-dot__vKslr {\n  offset-path: path("M10,60 Q80,10 150,60");\n  animation: moveDot__Rs54I 1.6s linear infinite;\n}\n\n/* CONNECTED STATE */\n.connection-visual__CVISX.connected__tFVub line {\n  stroke: #1b5e20;\n  stroke-width: 2;\n}\n\n/* MESSAGE */\n.connection-message__ztsDO {\n  font-size: 14px;\n  font-weight: 500;\n  color: #1b5e20;\n  text-align: center;\n  transition: all 0.3s ease;\n  margin-bottom: 20px;\n  padding: 15px 45px 0px 30px;\n}\n\n/* COLLAPSE BUTTON */\n.toggle-collapse__E9SjX {\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #1b5e20;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #1b5e20;\n  background-color: #ffffffb7;\n  transition: background-color 0.3s ease;\n  position: absolute;\n  right: 10px;\n  bottom: 8px;\n}\n.toggle-collapse__E9SjX:hover {\n  background-color: #e2f2e2;\n}\n\n/* COLLAPSED STATE */\n.chat_announcement__Jzkdo.collapsed__plmX9 {\n  height: 60px !important;\n  overflow: hidden;\n}\n.chat_announcement__Jzkdo.collapsed__plmX9 .connection-visual__CVISX {\n  display: none;\n}\n.mixfileMsgDiv__uUD0V {\n  padding: 0px 12px;\n  max-width: 350px;\n  position: relative;\n  border-radius: 10px 10px 10px 10px;\n  background: #e0ffff;\n  color: var(--dark-text);\n}\n.mixfileMsgDiv__uUD0V .showMsgWrap__QeqJt {\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  padding-bottom: 10px;\n}\n\n/* ANIMATIONS */\n@keyframes dashMove__wUn1B {\n  to {\n    stroke-dashoffset: -12;\n  }\n}\n@keyframes moveDot__Rs54I {\n  0% {\n    offset-distance: 0%;\n  }\n  100% {\n    offset-distance: 100%;\n  }\n}\n@keyframes slideDown__lkuZa {\n  0% {\n    opacity: 0;\n    transform: translateY(-40px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes blink__pUX_H {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n.tranferChat_popup__O6Pba {\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n  max-height: 700px;\n  max-width: 500px;\n  border-radius: 10px;\n}\n.tranferChat_popup__O6Pba p {\n  color: var(--dark-text);\n}\n.scrollUp__tLNBQ {\n  position: absolute;\n  bottom: 90px;\n  right: 15px;\n  background: #4a90e2;\n  color: white;\n  /* width: 40px;\n  height: 40px; */\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  outline: none;\n  padding: 10px;\n}\n\n.scrollUp__tLNBQ.hidden__mk5TY {\n  display: none;\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(20px);\n}\nbutton.scrollUp__tLNBQ:hover,\nbutton.scrollUp__tLNBQ:active {\n  background-color: #4a90e2;\n}\n.poweredBy__DDoty {\n  background: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 13px;\n  margin: 0px auto;\n  position: absolute;\n  bottom: -3px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 1;\n}\n.poweredBy__DDoty p {\n  margin-bottom: 0px;\n  font-size: 13px;\n}\n.poweredByInnerWrap__b9QkL {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  /* border: 3px solid #a370ce; */\n  padding: 0 28px;\n  border-bottom-left-radius: 24px;\n  border-bottom-right-radius: 24px;\n  background: transparent;\n  /* border-style: double; */\n  padding-bottom: 10px;\n}\n.poweredByIc__fFlKt {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n}\n\n.poweredByIc__fFlKt svg {\n  width: 16px;\n  height: 16px;\n  color: #a370ce; /* change icon color */\n}\n\n/* Link styling */\n.poweredByText__FlNLp a {\n  color: #a370ce;\n  text-decoration: none;\n  font-weight: bold;\n}\n.poweredByText__FlNLp p {\n  color: black;\n}\n\n.poweredByText__FlNLp a:hover {\n  text-decoration: underline;\n}\n.editable-input__kv7Ud {\n  border: 1px solid rgb(221, 221, 221);\n  padding: 10px;\n  border-radius: 4px;\n  margin: 10px 0px;\n  overflow: auto;\n  max-height: 120px;\n  outline: none;\n  color: var(--dark-text);\n}\n/* [contenteditable]:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n} */\n.editable-input__kv7Ud:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n}\n.editable-input__kv7Ud:focus {\n  border: 1px solid #4a7feb;\n}\n\n.editable-input__kv7Ud:empty:focus:before {\n  color: lightgray;\n}\n.live-talkUser__EyBuS {\n  position: absolute;\n  top: 0;\n  right: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: flex-end;\n}\n.arrowDiv__B9zez {\n  width: 70px;\n  height: 50px;\n}\n.arrowDiv__B9zez svg {\n  height: 50px;\n}\n.contantDiv__bZZWt {\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n  background: #f96666;\n  font-size: 14px;\n  box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px,\n    rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;\n}\n.liveTalkOverlay__Kmrfn {\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 630px;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000001;\n  border-radius: 0px 0px 10px 10px;\n  height: 100%;\n}\n.poweredBySettingIc__CzIoT {\n  margin-left: 5px;\n  outline: none;\n  border: none;\n  display: flex;\n  color: #a370ce;\n  background-color: transparent;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n.poweredBySettingIc__CzIoT:hover {\n  transform: scale(1.2);\n}\n.soundDisable__bYhxD {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n.soundIcon___m2UH {\n  color: #a370ce;\n  width: 70px;\n  height: 70px;\n  background: #ecd5ff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.soundIcon___m2UH svg {\n  width: 38px;\n  height: 38px;\n}\n.disabledSoundBtn__A9bE2 {\n  outline: none;\n  border: none;\n  background: rgb(163, 112, 206);\n  font-size: 18px;\n  padding: 10px 16px;\n  color: white;\n  font-weight: 500;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n.disabledSoundBtn__A9bE2:hover {\n  background-color: #8551b1;\n}\n.frm-user-wrapper__YqRhz {\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #d5dadd;\n}\n.frm-user-avatar__f5yAx {\n  width: 100%;\n  height: 100%;\n  object-fit: fill;\n  border-radius: 50%;\n}\n.editConent__Tpj_c {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgb(255, 255, 255);\n  border: 1px solid rgb(204, 204, 204);\n  text-align: center;\n  width: 390px;\n  border-radius: 10px;\n  z-index: 105;\n}\n.editOverlay__a7gC8 {\n  position: fixed;\n  bottom: 0px;\n  right: 0px;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 104;\n  width: 100%;\n  max-width: 500px;\n  height: 100%;\n  max-height: 700px;\n  border-radius: 10px;\n}\n.popup-container__dzdto {\n  position: relative;\n  padding-top: 30px;\n}\n\n.popup-send-btn__YS_2g {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  border: none;\n  font-size: 20px;\n  background: var(--primary-color);\n  color: var(--white-color);\n  cursor: pointer;\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  transform: rotate(12deg);\n  padding: 0;\n  position: absolute;\n  right: 30px;\n}\n.popup-input__sAEXC {\n  flex: 1;\n  font-size: 16px;\n  transition: border-color 0.2s ease;\n  width: 100%;\n  padding: 16px 105px 16px 10px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n  outline: none;\n}\n.popup-input__sAEXC:focus {\n  border-color: var(--primary-color);\n  border: 2px solid var(--subSecondary);\n}\n\n.popup-close-btn__kZHqi {\n  position: absolute;\n  top: -15px;\n  right: -10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n  font-size: 16px;\n  font-weight: 500;\n  background: #d1d1d1;\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  border-radius: 50%;\n}\n\n.popup-title__wO2Hd {\n  font-size: 28px;\n  font-weight: 600;\n  margin-bottom: 20px;\n}\n\n.popup-input-wrap__soG9G {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-top: 20px;\n  padding: 20px;\n  box-shadow: rgba(0, 0, 0, 0.1) 20px 0px 12px;\n}\n\n@keyframes slideFadeInRight__NHzTs {\n  0% {\n    transform: translateX(50px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n.slideFadeInRight__NHzTs {\n  animation: slideFadeInRight__NHzTs 0.5s ease forwards;\n}\n\n\n@keyframes slideFadeIn__CRFq0 {\n  0% {\n    transform: translateX(-50px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n  0% {\n    transform: translateX(-50px);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n.slideFadeIn__CRFq0 {\n  animation: slideFadeIn__CRFq0 0.5s ease forwards;\n}\n\n@media (min-width: 300px) and (max-width: 575px) {\n  .poweredBy__DDoty {\n    width: 100%;\n  }\n  .bot_chat_footer__jp_UE {\n    max-height: 600px;\n  }\n  .mine_message__XQ82h {\n    padding-left: 0px;\n    padding-bottom: 0px;\n  }\n  .reply_input_box__D4QII .sendbtn___IRnj {\n    bottom: 10%;\n  }\n  .tranferChat_popup__O6Pba {\n    max-height: 100vh;\n    bottom: 0px;\n    right: 0;\n  }\n  .edittableDiv_File__acDtR {\n    width: 82%;\n    margin-bottom: 0px;\n    flex-direction: row;\n    overflow: hidden;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n  }\n  .editOverlay__a7gC8 {\n    max-height: 100vh;\n    bottom: -5px;\n    right: 0px;\n  }\n  .showMsgWrap__QeqJt {\n    padding-bottom: 4px;\n  }\n  .emoji__j2Rpm {\n    padding-bottom: 0px;\n  }\n  .editable-input__kv7Ud {\n    padding: 15px;\n  }\n}\n@media (min-width: 576px) and (max-width: 645px) {\n  .editOverlay__a7gC8 {\n    max-height: 95vh;\n    bottom: 6px;\n    right: 12px;\n  }\n}\n\n@media (min-width: 646px) and (max-width: 765px) {\n  .editOverlay__a7gC8 {\n    max-height: 79vh;\n    bottom: 19px;\n    right: 14px;\n  }\n}\n\n@media (min-width: 766px) and (max-width: 1024px) {\n  .editOverlay__a7gC8 {\n    max-height: 76vh;\n    bottom: 9px;\n    right: 16px;\n  }\n}\n\n@media (min-width: 1025px) and (max-width: 1919px) {\n  .editOverlay__a7gC8 {\n    bottom: 16px;\n    right: 16px;\n    max-height: 640px;\n  }\n}\n\n@media (min-width: 1920px) {\n  .editOverlay__a7gC8 {\n    bottom: 16px;\n    right: 16px;\n    max-height: 740px;\n  }\n}\n\n/* ==========================\n   MOBILE VIEW\n=========================== */\n@media (max-width: 599px) {\n  .announcement-header__sP2yB {\n    font-size: 20px;\n    padding: 6px 10px;\n    background: transparent;\n    border-bottom: none;\n    font-weight: bolder;\n  }\n\n  .header-title__Nm5Ru {\n    font-size: 13px;\n  }\n\n  .user-icon__eOf6p {\n    width: 30px;\n    height: 30px;\n  }\n\n  .user-icon__eOf6p::before {\n    font-size: 14px;\n  }\n\n  .connection-message__ztsDO {\n    font-size: 20px;\n    padding: 15px 20px 0 20px;\n    margin-bottom: 20px;\n  }\n  /* \n  .toggle-collapse {\n    width: 35px;\n    height: 35px;\n    font-size: 14px;\n    right: 8px;\n    bottom: 8px;\n  } */\n\n  .sendbtn___IRnj {\n    width: 48px;\n    height: 48px;\n  }\n  .sendbtn___IRnj svg {\n    width: 48px;\n    height: 48px;\n  }\n  .input-box__ifj0e {\n    padding: 15px 105px 15px 10px;\n  }\n  .attchementBtn__mOxY1 {\n    right: 16%;\n  }\n  .attchementBtn__mOxY1 svg {\n    width: 45px;\n    height: 42px;\n  }\n  .input-box__ifj0e {\n    font-size: 20px;\n  }\n  .downIc__jfJ2G {\n    font-size: 28px;\n    top: -14px;\n    /* cursor: pointer;\n    visibility: hidden;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    padding-top: 5px; */\n  }\n  .time_status__yhwZE .status___CJCm {\n    font-size: 12px;\n  }\n}\n\n/* ==========================\n   TABLET VIEW\n=========================== */\n@media (min-width: 600px) {\n  .announcement-header__sP2yB {\n    font-size: 15px;\n    padding: 8px 12px;\n  }\n  .header-title__Nm5Ru {\n    font-size: 15px;\n  }\n  .user-icon__eOf6p {\n    width: 36px;\n    height: 36px;\n  }\n  .user-icon__eOf6p::before {\n    font-size: 16px;\n  }\n  .connection-message__ztsDO {\n    font-size: 15px;\n    padding: 18px 50px 0 50px;\n    margin-bottom: 25px;\n  }\n  /* .toggle-collapse {\n    width: 40px;\n    height: 40px;\n    font-size: 16px;\n    right: 12px;\n    bottom: 10px;\n  } */\n  .sendbtn___IRnj {\n    width: 45px;\n    height: 45px;\n  }\n}\n\n/* ==========================\n   DESKTOP VIEW\n=========================== */\n@media (min-width: 1024px) {\n  .announcement-header__sP2yB {\n    font-size: 16px;\n    padding: 10px 14px;\n  }\n  .header-title__Nm5Ru {\n    font-size: 16px;\n  }\n  .user-icon__eOf6p {\n    width: 40px;\n    height: 40px;\n  }\n  .user-icon__eOf6p::before {\n    font-size: 18px;\n  }\n  .connection-message__ztsDO {\n    font-size: 16px;\n    padding: 20px 40px 0 40px;\n    margin-bottom: 30px;\n  }\n  /* .toggle-collapse {\n    width: 24px;\n    height: 24px;\n    font-size: 16px;\n    right: 15px;\n    bottom: 10px;\n  } */\n}\n\n/* @media (min-width: 601px) and (max-width: 1024px) {\n  .liveTalkOverlay {\n    width: 70%;\n    height: 100%;\n    max-height: 460px;\n  }\n} */\n',""]);var i="soundDisable__bYhxD",l="soundIcon___m2UH",c="disabledSoundBtn__A9bE2",d="iniChatMsgLoader__YdqX8",p="systemMessageContainer__VLlq_",u="dateSeparator__VlGQn",h="systemMessage__u8tjv",g="disabled_input_items__twYMS",f="profile_logo__UOVT6",m="adminImg__ZqHS3",_="toggleViewBtn__2M7Xw",y="tooltip__NumVd",v="toggleSwitch__WBjt8",b="chat_header_bot_chat__Fu_8I",x="chat_box_top_user_wrapper__uUOxF",w="chat_input__OHABp",E="input-box-div-wrapper__anPnJ",C="sendbtn___IRnj",k="attchementBtn__mOxY1",S="bot_input_inner_wrap__hhcLP",T="bot_input_wrapper_div__LM4VK",I="showMore__L2pdD",L="input-act-wrap__qgDC7",A="botThinking__BJmYO",N="outerMsgRowDiv__uEoZp",O="me-left__jeuF8",D="other-right__nNOvP",B="emoji__j2Rpm",U="msgDiv__xzFQl",j="downIc__jfJ2G",M="showMsgWrap__QeqJt",P="mine_message__XQ82h",R="time_status__yhwZE",F="msgReactions__Equ3R",q="all-emoji-wrap__wj3eP",z="replyMsgdiv__SQUzy",G="reaction__f8RFk",H="close_modal__D2Han",J="chat_header_user_chat__u8qiG",W="chat_body__V8yeG",V="no-conversation-yet__TKGCD",K="chat_header_wrapper__wd_h5",Z="typingStatusWrapper__T57jH",Y="typingBubble__AsLUa",X="typingStatusText__nC74x",Q="chat_footer__Jhmwt",$="input-box__ifj0e",ee="chat_body_and_footer_wrapper_user__XS4fs",te="chat-body-userwrap-content__Umx3q",ne="reply_input_box__D4QII",oe="chat_body_and_footer_wrapper_bot__k5CKu",ae="chat_body_contentWarp__C5AX2",re="chat_box_top_bot_wrapper__M4G2y",se="chat_bot_history__gl2na",ie="edittableDiv_File__acDtR",le="bot_chat_footer__jp_UE",ce="bot_body__c93GG",de="back_button__zLXRc",pe="mixfileMsgDiv__uUD0V",ue="chat_announcement__Jzkdo",he="announcement-header__sP2yB",ge="user-icon__eOf6p",fe="connection-line__HATTK",me="connection-wrapper__qDt7_",_e="error-align__TjwjD",ye="connection-message__ztsDO",ve="toggle-collapse__E9SjX",be="tranferChat_popup__O6Pba",xe="scrollUp__tLNBQ",we="hidden__mk5TY",Ee="poweredBy__DDoty",Ce="poweredByInnerWrap__b9QkL",ke="poweredByIc__fFlKt",Se="poweredByText__FlNLp",Te="editable-input__kv7Ud",Ie="live-talkUser__EyBuS",Le="arrowDiv__B9zez",Ae="contantDiv__bZZWt",Ne="liveTalkOverlay__Kmrfn",Oe="poweredBySettingIc__CzIoT",De="frm-user-wrapper__YqRhz",Be="frm-user-avatar__f5yAx",Ue="editConent__Tpj_c",je="editOverlay__a7gC8",Me="popup-container__dzdto",Pe="popup-send-btn__YS_2g",Re="popup-input__sAEXC",Fe="popup-close-btn__kZHqi",qe="popup-input-wrap__soG9G",ze="slideFadeInRight__NHzTs",Ge="slideFadeIn__CRFq0";const He=s},913:(e,t,n)=>{n.d(t,{Ay:()=>i});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,"/* âœ… DATE_SEPARATOR_DEBUG: Date separator styles */\n.date-separator__rPy5p {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 15px 0;\n  position: relative;\n}\n\n.date-separator-text__lasXo {\n  background-color: #f0f0f0;\n  color: #666;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  text-align: center;\n  z-index: 1;\n}\n\n.date-separator__rPy5p::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background-color: #e0e0e0;\n  z-index: 0;\n}\n\n.close-btn__OG36t {\n  width: 32px;\n  height: 32px;\n  aspect-ratio: 1 / 1;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: 1px solid #b71c1c;\n  font-size: 16px;\n  color: #b71c1c;\n  background-color: #ffc7c7;\n}\n.close-btn__OG36t:hover {\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n}\n\n/* .editConent {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgb(255, 255, 255);\n  border: 1px solid rgb(204, 204, 204);\n  text-align: center;\n  width: 440px;\n  border-radius: 10px;\n  z-index: 105;\n} */\n/* .editOverlay {\n  position: fixed;\n  bottom: 96px;\n  right: 20px;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 104;\n  width: 100%;\n  max-width: 500px;\n  height: 100%;\n  max-height: 700px;\n  border-radius: 10px;\n} */\n\n.reply_input_box__R9UH0 .attachBtns__rzhaf {\n  right: 0%;\n  top: 35%;\n}\n\n.welcomemsg__dMMbW {\n  /* border: 1px solid red;\n    padding: 16px;\n    margin: 16px;\n    border-radius: 25px;\n    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n    text-align: center; */\n\n  background: rgb(226, 190, 255);\n  color: black;\n  padding: 8px;\n  border-radius: 25px;\n  text-align: center;\n  margin: 10px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  margin-bottom: 10px;\n  opacity: 0;\n  animation: slideInOut__OavQZ 4s ease-in-out forwards;\n}\n\n\n/* .dot {\n  opacity: 0;\n  animation: blink 1.4s infinite;\n}\n\n.dot:nth-child(1) {\n  animation-delay: 0s;\n}\n.dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n} */\n\n@media (max-width: 600px) {\n  .attchementBtn__lmrHk {\n    right: 20%;\n  }\n}\n\n@media (min-width: 601px) and (max-width: 1024px) {\n  .attchementBtn__lmrHk {\n    right: 22%;\n  }\n}\n.editable-input__EqZvq {\n  border: 1px solid rgb(221, 221, 221);\n  padding: 10px;\n  border-radius: 4px;\n  margin: 10px 0px;\n  overflow: auto;\n  max-height: 120px;\n  outline: none;\n  color: var(--dark-text);\n}\n/* [contenteditable]:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n} */\n.editable-input__EqZvq:empty:before {\n  content: attr(data-placeholder);\n  color: gray;\n  pointer-events: none;\n}\n.editable-input__EqZvq:focus {\n  border: 1px solid #4a7feb;\n}\n\n.editable-input__EqZvq:empty:focus:before {\n  color: lightgray;\n}\n\n\n.typing-indicator-dots__KKeqe {\n  display: inline-block;\n}\n\n.typing-indicator-dots__KKeqe span {\n  animation: blink__y7GxU 1.4s infinite;\n  font-weight: bold;\n  font-size: 18px;\n  padding: 0 2px;\n  color: #666;\n  opacity: 0;\n}\n\n.typing-indicator-dots__KKeqe span:nth-child(1) {\n  animation-delay: 0s;\n}\n.typing-indicator-dots__KKeqe span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.typing-indicator-dots__KKeqe span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes blink__y7GxU {\n  0% { opacity: 0; }\n  20% { opacity: 1; }\n  100% { opacity: 0; }\n}\n\n\n.typing-indicator-dots__KKeqe {\n  display: inline-block;\n}\n\n.typing-indicator-dots__KKeqe span {\n  animation: blink__y7GxU 1.4s infinite;\n  font-weight: bold;\n  font-size: 18px;\n  padding: 0 2px;\n  color: #666;\n  opacity: 0;\n}\n\n.typing-indicator-dots__KKeqe span:nth-child(1) {\n  animation-delay: 0s;\n}\n.typing-indicator-dots__KKeqe span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.typing-indicator-dots__KKeqe span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes blink__y7GxU {\n  0% {\n    opacity: 0;\n  }\n  20% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""]);const i=s}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=o[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0;var o={};n.r(o),n.d(o,{default:()=>Gt});var a={};n.r(a),n.d(a,{"animate-bounce":()=>v.F9,"animate-fadeInUp":()=>v.hv,"animate-pulse":()=>v.aq,"animate-slideInLeft":()=>v.o6,"animate-slideInRight":()=>v.R1,animateFadeInSlideRight:()=>v.Oq,answer:()=>v.ZF,answerDescription:()=>v.ji,answerText:()=>v.yy,backArrow:()=>v.lJ,bounce:()=>v.z9,checkboxGroup:()=>v.Pm,choice:()=>v.Yq,choice_wrap:()=>v.J1,default:()=>x,expandToggleButton:()=>v.bT,fadeInSlideRight:()=>v.JA,fadeInUp:()=>v.tE,formField:()=>v.Tn,formGroupTitle:()=>v.qe,"history-left":()=>v.TY,"history-right":()=>v.Gg,historyEntry:()=>v.xg,horizontal:()=>v.xM,inputContainer:()=>v.Kf,inputField:()=>v.LF,loadingDot:()=>v.kA,loadingDots:()=>v.BD,loadingIndicator:()=>v.Mz,"position-center":()=>v.AJ,"position-left":()=>v.In,"position-right":()=>v.jj,pulse:()=>v.U6,radioGroup:()=>v.R$,rangeGroup:()=>v.CG,restartBtn:()=>v.QN,"root-question":()=>v.o1,slideInLeft:()=>v.K0,slideInRight:()=>v.xA,submitBtn:()=>v.xL,toggleGroup:()=>v.y6,wave:()=>v.tc});var r={};n.r(r),n.d(r,{$A:()=>w.$A,Yw:()=>w.Yw,wF:()=>w.wF,R8:()=>w.R8,QQ:()=>w.QQ,l3:()=>w.l3,UI:()=>w.UI,lj:()=>w.lj,XB:()=>w.XB,Vj:()=>w.Vj,JW:()=>w.JW,GH:()=>w.GH,ZX:()=>w.ZX,W8:()=>w.W8,av:()=>w.av,u9:()=>w.u9,AL:()=>w.AL,_3:()=>w._3,DW:()=>w.DW,fP:()=>w.fP,bw:()=>w.bw,SZ:()=>w.SZ,us:()=>w.us,py:()=>w.py,So:()=>w.So,JY:()=>w.JY,WN:()=>w.WN,FB:()=>w.FB,D:()=>w.D,fX:()=>w.fX,YD:()=>w.YD,C:()=>w.C,$b:()=>w.$b,FW:()=>w.FW,_W:()=>w._W,HU:()=>w.HU,wt:()=>w.wt,rH:()=>w.rH,Zg:()=>w.Zg,RK:()=>w.RK,qd:()=>w.qd,qZ:()=>w.qZ,R:()=>w.R,V5:()=>w.V5,Ht:()=>w.Ht,Xs:()=>w.Xs,hD:()=>w.hD,nc:()=>w.nc,BX:()=>w.BX,vI:()=>w.vI,C$:()=>w.C$,$Q:()=>w.$Q,d6:()=>w.d6,cw:()=>w.cw,tK:()=>w.tK,W1:()=>w.W1,CX:()=>w.CX,zt:()=>w.zt,hT:()=>w.hT,Ow:()=>w.Ow,Jn:()=>w.Jn,tH:()=>w.tH,UK:()=>w.UK,u1:()=>w.u1,aJ:()=>w.aJ,Io:()=>w.Io,bV:()=>w.bV,wz:()=>w.wz,mJ:()=>w.mJ,ZT:()=>w.ZT,uD:()=>w.uD,di:()=>w.di,dQ:()=>w.dQ,jP:()=>w.jP,r1:()=>w.r1,bs:()=>w.bs,Vd:()=>w.Vd,C2:()=>w.C2,tc:()=>w.tc,H4:()=>w.H4,og:()=>w.og,vE:()=>w.vE,p9:()=>w.p9,NY:()=>w.NY,Iv:()=>w.Iv,YL:()=>w.YL,CL:()=>w.CL,AP:()=>w.AP,Lm:()=>w.Lm,tz:()=>w.tz,GS:()=>w.GS});var s={};n.r(s),n.d(s,{Decoder:()=>mt,Encoder:()=>gt,PacketType:()=>ht,protocol:()=>ut});var i=n(72),l=n.n(i),c=n(825),d=n.n(c),p=n(659),u=n.n(p),h=n(56),g=n.n(h),f=n(540),m=n.n(f),_=n(113),y=n.n(_),v=n(674),b={};b.styleTagTransform=y(),b.setAttributes=g(),b.insert=u().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=m(),l()(v.Ay,b);const x=v.Ay&&v.Ay.locals?v.Ay.locals:void 0;var w=n(882),E={};E.styleTagTransform=y(),E.setAttributes=g(),E.insert=u().bind(null,"head"),E.domAPI=d(),E.insertStyleElement=m(),l()(w.Ay,E),w.Ay&&w.Ay.locals&&w.Ay.locals;var C=n(57),k={};k.styleTagTransform=y(),k.setAttributes=g(),k.insert=u().bind(null,"head"),k.domAPI=d(),k.insertStyleElement=m(),l()(C.Ay,k),C.Ay&&C.Ay.locals&&C.Ay.locals;var S=n(583),T={};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function A(){A=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var r=t&&t.prototype instanceof _?t:_,s=Object.create(r.prototype),i=new O(o||[]);return a(s,"_invoke",{value:S(e,n,i)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",h="suspendedYield",g="executing",f="completed",m={};function _(){}function y(){}function v(){}var b={};c(b,s,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(D([])));w&&w!==n&&o.call(w,s)&&(b=w);var E=v.prototype=_.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,r,s,i){var l=p(e[a],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==L(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}var r;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,a){n(e,o,t,a)}))}return r=r?r.then(a,a):a()}})}function S(t,n,o){var a=u;return function(r,s){if(a===g)throw Error("Generator is already running");if(a===f){if("throw"===r)throw s;return{value:e,done:!0}}for(o.method=r,o.arg=s;;){var i=o.delegate;if(i){var l=T(i,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===u)throw a=f,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=g;var c=p(t,n,o);if("normal"===c.type){if(a=o.done?f:h,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a=f,o.method="throw",o.arg=c.arg)}}}function T(t,n){var o=n.method,a=t.iterator[o];if(a===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var r=p(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(o.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(L(t)+" is not iterable")}return y.prototype=v,a(E,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,o,a,r){void 0===r&&(r=Promise);var s=new k(d(e,n,o,a),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(E),c(E,l,"Generator"),c(E,s,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(o,a){return i.type="throw",i.arg=t,n.next=o,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var a=o.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:D(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t,n,o,a,r,s){try{var i=e[r](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(o,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function s(e){B(r,o,a,s,i,"next",e)}function i(e){B(r,o,a,s,i,"throw",e)}s(void 0)}))}}T.styleTagTransform=y(),T.setAttributes=g(),T.insert=u().bind(null,"head"),T.domAPI=d(),T.insertStyleElement=m(),l()(S.Ay,T),S.Ay&&S.Ay.locals&&S.Ay.locals;var j=[],M=[],P=null,R="left";function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{content:e,side:t.side||R,animation:t.animation||"fadeInUp",timestamp:Date.now(),type:t.type||"message",delay:t.delay||0}}function q(){var e=document.getElementById("input-act-bot-wrap");e?e.style.display="none":setTimeout(q,100)}function z(){var e=document.getElementById("input-act-bot-wrap");e?e.style.display="":setTimeout(z,100)}function G(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(console.log("Rendering QNA node:",e),e){var n=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj)),o=document.querySelector(".".concat(w.av," .").concat(w._3));if(n&&o)if(n.innerHTML="",t){var r,s;if(P=e,j=[],M=[],o.innerHTML="",(null===(r=e.answers)||void 0===r?void 0:r.length)>0||(null===(s=e.subQuestions)||void 0===s?void 0:s.length)>0){console.log(P.text,P.statement,"can we push these if there into the history? DEEPSEEK");var i=function(){var t=U(A().mark((function t(){var n,o,a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.text){t.next=3;break}return t.next=3,new Promise((function(t){M.push(F({description:e.text},{side:"left",animation:"fadeInUp",type:"question",delay:2e3})),V(),setTimeout(t,2e3)}));case 3:if(!e.statement){t.next=6;break}return t.next=6,new Promise((function(t){M.push(F({description:e.statement},{side:"left",animation:"fadeInUp",type:"question",delay:1e3})),V(),setTimeout(t,1e3)}));case 6:a=[],(null===(n=e.answers)||void 0===n?void 0:n.length)>0&&e.answers.forEach((function(e){a.push(O(O({},e),{},{animation:"pulse",onClick:function(){q(),G(e,!1)}}))})),(null===(o=e.subQuestions)||void 0===o?void 0:o.length)>0&&e.subQuestions.forEach((function(e){a.push(O(O({},e),{},{animation:"pulse",onClick:function(){q(),G(e,!1)}}))})),H(a,{position:"left",animation:"slideInUp",delay:1e3});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();i()}else W()}else{var l,c,d;if(e.description?M.push(F({text:e.text,description:e.description},{side:"left",animation:"fadeInUp",type:"question"})):e.text&&M.push(F(e.text,{side:"left",animation:"fadeInUp",type:"question"})),V(),function(e){var t,n;return 1===(null===(t=e.answers)||void 0===t?void 0:t.length)&&0===(null===(n=e.subQuestions)||void 0===n?void 0:n.length)}(e)){var p=e.answers[0];return p.description?M.push(F({text:p.text,description:p.description},{side:"right",animation:"fadeInUp",type:"answer"})):M.push(F(p.text,{side:"right",animation:"fadeInUp",type:"answer"})),V(),void W()}if("form_type"===e.type&&(null===(l=e.fields)||void 0===l?void 0:l.length)>0)!function(e){var t=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj));t.innerHTML="",document.querySelector(".".concat(w.av," .").concat(w.XB)),t&&(t.style.height="100%",t.style.maxHeight="auto");var n=document.createElement("div");n.classList.add(v.Kf),n.style.height="100%",n.style.maxHeight="100%";var o=document.createElement("div");o.textContent=e.text,o.classList.add(v.qe),n.appendChild(o);var r=[],s=[];e.fields.forEach((function(e){if("field_type"===e.type){var t=document.createElement("div");t.classList.add(v.Tn);var o,i=document.createElement("label");i.textContent=e.text;var l=document.createElement("div");switch(l.className="error-message",l.style.color="red",l.style.display="none",l.style.fontSize="0.8rem",l.style.marginTop="2px",e.fieldType){case"toggle":var c=document.createElement("div");c.className=v.y6;var d=document.createElement("label");d.className=a.toggleWrapper;var p=document.createElement("input");p.type="checkbox",p.checked="true"===e.defaultValue,p.className=a.toggleInput;var u=document.createElement("span");u.className=a.toggleSlider;var h=document.createElement("div");h.className=a.toggleLabels,h.innerHTML="\n          <span>No</span>\n          <span>Yes</span>\n        ",d.appendChild(p),d.appendChild(u),c.appendChild(d),c.appendChild(h),o=c;break;case"range":var g=document.createElement("div");g.className=v.CG;var f=document.createElement("input");f.type="range",f.min=e.min||"0",f.max=e.max||"100",f.step=e.step||"1",f.value=e.min||"0",f.className=a.rangeInput;var m=document.createElement("span");m.className=a.rangeValue,m.textContent=f.value,f.addEventListener("input",(function(){m.textContent=f.value})),g.appendChild(f),g.appendChild(m),o=g;break;case"daterange":var _=document.createElement("div");_.className=a.dateRangeGroup;var y=document.createElement("div");y.className=a.dateRangeField;var b=document.createElement("label");b.textContent="Start Date",b.className=a.dateRangeLabel;var x=document.createElement("input");x.type="date",x.className=v.LF,y.appendChild(b),y.appendChild(x);var w=document.createElement("div");w.className=a.dateRangeField;var E=document.createElement("label");E.textContent="End Date",E.className=a.dateRangeLabel;var C=document.createElement("input");C.type="date",C.className=v.LF,w.appendChild(E),w.appendChild(C),_.appendChild(y),_.appendChild(w),o=_;break;case"date":(o=document.createElement("input")).type="date",o.classList.add(v.LF);break;case"time":(o=document.createElement("input")).type="time",o.classList.add(v.LF);break;case"datetime-local":(o=document.createElement("input")).type="datetime-local",o.classList.add(v.LF);break;case"email":(o=document.createElement("input")).type="email",o.placeholder=e.placeholder||"example@domain.com",o.classList.add(v.LF);break;case"tel":(o=document.createElement("input")).type="tel",o.placeholder=e.placeholder||"(123) 456-7890",o.classList.add(v.LF);break;case"textarea":(o=document.createElement("textarea")).placeholder=e.placeholder||"Type your response...",o.classList.add(v.LF),o.style.height="80px",o.style.resize="vertical";break;case"number":(o=document.createElement("input")).type="number",o.placeholder=e.placeholder||e.text,o.min="0",o.step="any",o.classList.add(v.LF);break;case"select":(o=document.createElement("select")).classList.add(v.LF);var k=document.createElement("option");k.value="",k.textContent="Select ".concat(e.text),k.disabled=!0,k.selected=!0,o.appendChild(k),e.options&&Array.isArray(e.options)&&e.options.forEach((function(e){var t=document.createElement("option");t.value="object"===L(e)?e.value:e,t.textContent="object"===L(e)?e.label:e,o.appendChild(t)}));break;case"radio":var S=document.createElement("div");S.className=v.R$,e.options&&Array.isArray(e.options)&&e.options.forEach((function(t,n){var o=document.createElement("div");o.style.display="flex",o.style.gap="10px",o.className=a.radioOption;var r=document.createElement("input");r.type="radio",r.name="radio_".concat(e.uuid||e.text.replace(/\s+/g,"_")),r.value="object"===L(t)?t.value:t,r.id="radio_".concat(e.uuid,"_").concat(n),r.classList.add(a.radioInput);var s=document.createElement("label");s.htmlFor="radio_".concat(e.uuid,"_").concat(n),s.textContent="object"===L(t)?t.label:t,s.classList.add(a.radioLabel),o.appendChild(r),o.appendChild(s),S.appendChild(o)})),o=S;break;case"checkbox":var T=document.createElement("div");T.className=v.Pm,e.options&&Array.isArray(e.options)&&e.options.forEach((function(t,n){var o=document.createElement("div");o.className=a.checkboxOption,o.style.display="flex",o.style.marginLeft="10px ",o.style.gap="10px ";var r=document.createElement("input");r.type="checkbox",r.value="object"===L(t)?t.value:t,r.id="checkbox_".concat(e.uuid,"_").concat(n),r.classList.add(a.checkboxInput);var s=document.createElement("label");s.htmlFor="checkbox_".concat(e.uuid,"_").concat(n),s.textContent="object"===L(t)?t.label:t,s.classList.add(a.checkboxLabel),o.appendChild(r),o.appendChild(s),T.appendChild(o)})),o=T;break;default:(o=document.createElement("input")).type="text",o.placeholder=e.placeholder||e.text,o.classList.add(v.LF)}t.appendChild(i),t.appendChild(o),t.appendChild(l),n.appendChild(t),r.push({field:e,input:o}),s.push(l)}else console.warn("Skipping invalid field inside form: ".concat(e.text))}));var i=document.createElement("button");i.textContent="Submit",i.classList.add(v.xL),i.addEventListener("click",(function(){var n=[],o=!0;if(r.forEach((function(e,t){var a=e.field,r=e.input,i=s[t],l="";switch(r.style&&(r.style.border=""),i.style.display="none",i.textContent="",a.fieldType){case"toggle":var c=r.querySelector('input[type="checkbox"]');l=c?c.checked?"Yes":"No":"";break;case"range":var d=r.querySelector('input[type="range"]');l=d?d.value:"";break;case"daterange":var p=r.querySelector('input[type="date"]:first-child'),u=r.querySelector('input[type="date"]:last-child'),h=p?p.value:"",g=u?u.value:"";l=h&&g?"".concat(h," to ").concat(g):"";break;case"radio":var f=r.querySelector('input[type="radio"]:checked');l=f?f.value:"";break;case"checkbox":var m=r.querySelectorAll('input[type="checkbox"]:checked');l=Array.from(m).map((function(e){return e.value})).join(", ");break;default:l=r.value?r.value.trim():""}if(a.required&&!l)return o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="This field is required",void(i.style.display="block");if(a.required||l){switch(a.fieldType){case"number":isNaN(l)?(o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="Please enter a valid number",i.style.display="block"):Number(l)<0&&(o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="Number must be positive",i.style.display="block");break;case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)||(o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="Please enter a valid email address",i.style.display="block");break;case"tel":/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(l)||(o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="Please enter a valid phone number",i.style.display="block");break;case"daterange":var _=r.querySelector('input[type="date"]:first-child'),y=r.querySelector('input[type="date"]:last-child'),v=_?_.value:"",b=y?y.value:"";v&&b&&new Date(v)>new Date(b)&&(o=!1,i.textContent="End date must be after start date",i.style.display="block");break;case"select":case"radio":""===l&&a.required&&(o=!1,r.style&&(r.style.border="1px solid red"),i.textContent="Please select an option",i.style.display="block")}o&&l&&n.push("".concat(a.text,": ").concat(l))}})),o){var a=document.querySelector(".".concat(w.av," .").concat(w._3));console.log(n,"formNodesdfsdf",e);var i=document.createElement("div"),l="".concat(e.uuid),c="".concat(n.join("\n")),d="".concat(l,"\n").concat(c);i.textContent=d,i.className=v.ZF,a.appendChild(i),M.push(F(d,{side:"right",animation:"fadeInUp",type:"answer"})),V(),t.innerHTML="";var p=JSON.parse(localStorage.getItem("tezkit_app_data")),u={};n.forEach((function(e){var t,n,o=(t=e.split(":").map((function(e){return e.trim()})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,s,i=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],r=o[1];u[a]=r})),fetch("https://autobot.".concat("magicchat.io","/").concat("prod","/add_lead"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:p.tenant_id,app_name:p.app_name,lead_data:D({},l,u)})}).then((function(e){return e.json()})).then((function(e){return console.log("Success:",e)})).catch((function(e){return console.error("Error:",e)})),W()}})),n.appendChild(i),t.appendChild(n)}(e);else if("field_type"===e.type)!function(e){var t=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj));t.innerHTML="";var n=document.createElement("div");n.classList.add(v.Kf);var o,r=document.createElement("div");r.textContent=e.text,r.style.marginBottom="6px",r.style.display="block";var s=document.createElement("div");switch(s.className="error-message",s.style.color="red",s.style.display="none",s.style.fontSize="0.8rem",s.style.marginTop="2px",e.fieldType){case"toggle":var i=document.createElement("div");i.className=v.y6;var l=document.createElement("label");l.className=a.toggleWrapper;var c=document.createElement("input");c.type="checkbox",c.checked="true"===e.defaultValue,c.className=a.toggleInput;var d=document.createElement("span");d.className=a.toggleSlider;var p=document.createElement("div");p.className=a.toggleLabels,p.innerHTML="\n        <span>No</span>\n        <span>Yes</span>\n      ",l.appendChild(c),l.appendChild(d),i.appendChild(l),i.appendChild(p),o=i;break;case"range":var u=document.createElement("div");u.className=v.CG;var h=document.createElement("input");h.type="range",h.min=e.min||"0",h.max=e.max||"100",h.step=e.step||"1",h.value=e.min||"0",h.className=a.rangeInput;var g=document.createElement("span");g.className=a.rangeValue,g.textContent=h.value,h.addEventListener("input",(function(){g.textContent=h.value})),u.appendChild(h),u.appendChild(g),o=u;break;case"daterange":var f=document.createElement("div");f.className=a.dateRangeGroup;var m=document.createElement("div");m.className=a.dateRangeField;var _=document.createElement("label");_.textContent="Start Date",_.className=a.dateRangeLabel;var y=document.createElement("input");y.type="date",y.className=v.LF,m.appendChild(_),m.appendChild(y);var b=document.createElement("div");b.className=a.dateRangeField;var x=document.createElement("label");x.textContent="End Date",x.className=a.dateRangeLabel;var E=document.createElement("input");E.type="date",E.className=v.LF,b.appendChild(x),b.appendChild(E),f.appendChild(m),f.appendChild(b),o=f;break;case"date":(o=document.createElement("input")).type="date",o.classList.add(v.LF);break;case"time":(o=document.createElement("input")).type="time",o.classList.add(v.LF);break;case"datetime-local":(o=document.createElement("input")).type="datetime-local",o.classList.add(v.LF);break;case"email":(o=document.createElement("input")).type="email",o.placeholder=e.placeholder||"example@domain.com",o.classList.add(v.LF);break;case"tel":(o=document.createElement("input")).type="tel",o.placeholder=e.placeholder||"(123) 456-7890",o.classList.add(v.LF);break;case"textarea":(o=document.createElement("textarea")).placeholder=e.placeholder||"Type your response...",o.classList.add(v.LF),o.style.height="80px",o.style.resize="vertical";break;case"number":(o=document.createElement("input")).type="number",o.placeholder=e.placeholder||"Enter a number",o.min="0",o.step="any",o.classList.add(v.LF);break;case"select":(o=document.createElement("select")).classList.add(v.LF);var C=document.createElement("option");C.value="",C.textContent="Select ".concat(e.text),C.disabled=!0,C.selected=!0,o.appendChild(C),e.options&&Array.isArray(e.options)&&e.options.forEach((function(e){var t=document.createElement("option");t.value="object"===L(e)?e.value:e,t.textContent="object"===L(e)?e.label:e,o.appendChild(t)}));break;case"radio":var k=document.createElement("div");k.className=v.R$,e.options&&Array.isArray(e.options)&&e.options.forEach((function(t,n){var o=document.createElement("div");o.className=a.radioOption;var r=document.createElement("input");r.type="radio",r.name="radio_".concat(e.uuid||e.text.replace(/\s+/g,"_")),r.value="object"===L(t)?t.value:t,r.id="radio_".concat(e.uuid,"_").concat(n),r.classList.add(a.radioInput);var s=document.createElement("label");s.htmlFor="radio_".concat(e.uuid,"_").concat(n),s.textContent="object"===L(t)?t.label:t,s.classList.add(a.radioLabel),o.appendChild(r),o.appendChild(s),k.appendChild(o)})),o=k;break;case"checkbox":var S=document.createElement("div");S.className=v.Pm,e.options&&Array.isArray(e.options)&&e.options.forEach((function(t,n){var o=document.createElement("div");o.className=a.checkboxOption;var r=document.createElement("input");r.type="checkbox",r.value="object"===L(t)?t.value:t,r.id="checkbox_".concat(e.uuid,"_").concat(n),r.classList.add(a.checkboxInput);var s=document.createElement("label");s.htmlFor="checkbox_".concat(e.uuid,"_").concat(n),s.textContent="object"===L(t)?t.label:t,s.classList.add(a.checkboxLabel),o.appendChild(r),o.appendChild(s),S.appendChild(o)})),o=S;break;default:(o=document.createElement("input")).type="text",o.placeholder=e.placeholder||"Type your response...",o.classList.add(v.LF)}var T=document.createElement("button");T.textContent="Submit",T.classList.add(v.xL),T.addEventListener("click",(function(){var n="",a=!0;switch(e.fieldType){case"toggle":var r=o.querySelector('input[type="checkbox"]');n=r?r.checked?"Yes":"No":"";break;case"range":var i=o.querySelector('input[type="range"]');n=i?i.value:"";break;case"daterange":var l=o.querySelector('input[type="date"]:first-child'),c=o.querySelector('input[type="date"]:last-child'),d=l?l.value:"",p=c?c.value:"";n=d&&p?"".concat(d," to ").concat(p):"";break;case"radio":var u=o.querySelector('input[type="radio"]:checked');n=u?u.value:"";break;case"checkbox":var h=o.querySelectorAll('input[type="checkbox"]:checked');n=Array.from(h).map((function(e){return e.value})).join(", ");break;default:n=o.value?o.value.trim():""}if(o.style&&(o.style.border=""),s.style.display="none",s.textContent="",e.required&&!n)a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="This field is required",s.style.display="block";else if(n)switch(e.fieldType){case"number":isNaN(n)?(a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="Please enter a valid number",s.style.display="block"):Number(n)<0&&(a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="Number must be positive",s.style.display="block");break;case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="Please enter a valid email address",s.style.display="block");break;case"tel":/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(n)||(a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="Please enter a valid phone number",s.style.display="block");break;case"daterange":var g=o.querySelector('input[type="date"]:first-child'),f=o.querySelector('input[type="date"]:last-child'),m=g?g.value:"",_=f?f.value:"";m&&_&&new Date(m)>new Date(_)&&(a=!1,s.textContent="End date must be after start date",s.style.display="block");break;case"select":case"radio":""===n&&e.required&&(a=!1,o.style&&(o.style.border="1px solid red"),s.textContent="Please select an option",s.style.display="block")}if(a&&(!e.required||n)){var y=document.querySelector(".".concat(w.av," .").concat(w._3)),b=n?"".concat(e.text,": ").concat(n):"".concat(e.text,": [Not provided]"),x=document.createElement("div");x.textContent=b,x.className=v.ZF,y.appendChild(x),M.push(F(b,{side:"right",animation:"fadeInUp",type:"answer"})),V(),t.innerHTML="",W()}})),n.appendChild(r),n.appendChild(o),n.appendChild(s),n.appendChild(T),t.appendChild(n)}(e);else if((null===(c=e.answers)||void 0===c?void 0:c.length)>0||(null===(d=e.subQuestions)||void 0===d?void 0:d.length)>0){var u,h;M.some((function(t){return"string"==typeof t.content&&t.content===e.text||"object"===L(t.content)&&t.content.text===e.text}))||(e.description?M.push(F({text:e.text,description:e.description},{side:"left",animation:"fadeInUp",type:"question"})):M.push(F(e.text,{side:"left",animation:"fadeInUp",type:"question"})),V()),j.push(e);var g=[];(null===(u=e.answers)||void 0===u?void 0:u.length)>0&&e.answers.forEach((function(e){g.push(O(O({},e),{},{animation:"pulse",onClick:function(){q(),G(e,!1)}}))})),(null===(h=e.subQuestions)||void 0===h?void 0:h.length)>0&&e.subQuestions.forEach((function(e){g.push(O(O({},e),{},{animation:"pulse",onClick:function(){q(),G(e,!1)}}))})),H(g,{position:"left",animation:"slideInUp"})}else W()}}}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj));n.innerHTML="";var o=t.delay||0;if(o>0){var a=document.createElement("div");a.className=v.J1;var r=document.createElement("div");r.className=v.Mz;var s=document.createElement("div");s.className=v.BD;for(var i=0;i<3;i++){var l=document.createElement("div");l.className=v.kA,s.appendChild(l)}r.appendChild(s),a.appendChild(r),n.appendChild(a),setTimeout((function(){n.innerHTML="",J(e)}),o)}else J(e)}function J(e,t){var n=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj));if(e.length>0){var o=function(){r.scrollWidth>r.clientWidth?(i.disabled=!1,i.style.opacity="1",i.style.cursor="pointer"):(i.disabled=!0,i.style.opacity="0.2",i.style.cursor="not-allowed")},r=document.createElement("div");r.className=v.J1,e.length<=3?r.classList.add(a.vertical):r.classList.add(v.xM);var s=["#F5F5F5","#FAFAFA","#F0F4F8","#E8F0FE","#F3E8FF","#FFF4E6","#E8FFE8","#FFF7F0","#F2FBFF","#F9F0FF"].map((function(e){return{color:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.color}));e.forEach((function(e,t){var n=document.createElement("button");n.textContent=e.text||e.statement,n.classList.add(v.Yq,v.Oq);var o=s[t%s.length];n.style.backgroundColor=o,n.style.transition="background-color 0.3s ease";var a="#"+o.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+-30)).toString(16)).slice(-2)}));n.addEventListener("mouseover",(function(){n.style.backgroundColor=a})),n.addEventListener("mouseout",(function(){n.style.backgroundColor=o})),n.addEventListener("click",e.onClick),r.appendChild(n)})),n.appendChild(r);var i=document.createElement("button");i.id="expandToggleButton",i.classList=v.bT;var l=document.createElement("i");l.classList.add("fas","fa-chevron-up"),i.appendChild(l),n.appendChild(i),o(),window.addEventListener("resize",o);var c=!1;i.addEventListener("click",(function(){c=!c,l.classList.toggle("fa-chevron-down",c),l.classList.toggle("fa-chevron-up",!c),c?(r.classList.add("expanded"),r.style.flexWrap="wrap",r.style.overflowX="hidden"):(r.classList.remove("expanded"),r.style.flexWrap="nowrap",r.style.overflowX="auto")}))}else W()}function W(){var e=document.querySelector(".".concat(w.av," .").concat(w.XB," .").concat(w.lj));e.innerHTML="";var t=document.createElement("button");t.innerHTML='\n<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19.9556 10.0068C19.959 12.2411 19.2125 14.4118 17.8355 16.1714C16.4586 17.9309 14.5309 19.1774 12.3613 19.7111C10.1917 20.2448 7.9058 20.0349 5.86969 19.115C3.83358 18.1951 2.16514 16.6185 1.13165 14.6376C0.0981476 12.6567 -0.240597 10.3863 0.169677 8.19002C0.57995 5.99374 1.7155 3.99872 3.39441 2.52453C5.07333 1.05035 7.19844 0.182331 9.42934 0.059518C11.6602 -0.0632951 13.8678 0.566209 15.6984 1.84719L15.5764 1.49242C15.4823 1.20574 15.506 0.893428 15.6422 0.624183C15.7783 0.354939 16.0159 0.15082 16.3026 0.0567305C16.5893 -0.0373592 16.9016 -0.0137123 17.1708 0.122469C17.4401 0.258651 17.6442 0.496212 17.7383 0.782891L18.8469 4.10882C18.9019 4.27554 18.9165 4.45294 18.8895 4.6264C18.8625 4.79987 18.7947 4.96445 18.6917 5.1066C18.5844 5.25773 18.4409 5.37954 18.2743 5.46088C18.1078 5.54222 17.9235 5.58051 17.7383 5.57223H14.4124C14.1183 5.57223 13.8363 5.45542 13.6284 5.24751C13.4205 5.0396 13.3037 4.75761 13.3037 4.46358C13.3077 4.22892 13.3861 4.00159 13.5275 3.81432C13.669 3.62704 13.8662 3.48949 14.0908 3.42146C12.6325 2.50997 10.9126 2.10874 9.20147 2.28077C7.49031 2.45281 5.88476 3.18837 4.63702 4.37193C3.38927 5.55549 2.57002 7.11998 2.30793 8.81968C2.04585 10.5194 2.35578 12.258 3.18904 13.7624C4.02231 15.2669 5.33171 16.4519 6.91156 17.1314C8.49142 17.8109 10.2522 17.9464 11.9174 17.5165C13.5826 17.0867 15.0579 16.1159 16.1115 14.7566C17.1651 13.3973 17.7373 11.7266 17.7383 10.0068C17.7383 9.71276 17.8551 9.43078 18.063 9.22287C18.2709 9.01495 18.5529 8.89815 18.8469 8.89815C19.141 8.89815 19.4229 9.01495 19.6308 9.22287C19.8388 9.43078 19.9556 9.71276 19.9556 10.0068Z" fill="white"/>\n</svg>\n\n  Start Over\n',t.className=v.QN,z(),t.addEventListener("click",(function(){G(P,!0)})),e.appendChild(t)}function V(){console.log("updated history bot?");var e=document.querySelector(".".concat(w.av," .").concat(w._3));e&&(e.innerHTML="",e.style.minHeight="100px",M.forEach((function(t,n){var o=document.createElement("div"),r="history-".concat(t.side||R);if(o.classList.add(v.xg,a[r]),t.animation&&(o.classList.add(a["animate-".concat(t.animation)]),o.style.animationDelay="".concat(100*n,"ms")),t.delay&&t.delay>0&&!t.hasBeenRendered){var s=document.createElement("div");s.className=v.Mz;var i=document.createElement("div");i.className=v.BD;for(var l=0;l<3;l++){var c=document.createElement("div");c.className=v.kA,i.appendChild(c)}s.appendChild(i),o.style.padding="0",o.appendChild(s),o._entry=t,setTimeout((function(){o.innerHTML="",o.style.padding="",t.hasBeenRendered=!0,K(t.content,o),t.animation&&(o.classList.remove(a["animate-".concat(t.animation)]),o.offsetWidth,o.classList.add(a["animate-".concat(t.animation)]))}),t.delay)}else K(t.content,o),t.hasBeenRendered=!0;e.appendChild(o)})),e.scrollTop=e.scrollHeight)}function K(e,t){if("object"===L(e)&&e.description){var n=document.createElement("div");if(n.className=a.answerContent,e.text){var o=document.createElement("div");o.textContent=e.text,o.className=v.yy,n.appendChild(o)}var r=document.createElement("div");r.innerHTML=e.description,r.className=v.ji,n.appendChild(r),t.appendChild(n)}else"string"==typeof e&&/<[a-z][\s\S]*>/i.test(e)?t.innerHTML=e:t.textContent=e}var Z="j7hD9nXt3QpLvFz1uY6j7m2";function Y(e){return X.apply(this,arguments)}function X(){return X=U(A().mark((function e(t){var n,o,a,r,s,i,l,c,d,p=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,e.prev=1,o=localStorage.getItem("tezkit_token"),a=localStorage.getItem("tezkit_app_data"),r=JSON.parse(a),console.log("srrsedfsdfsdtezkit_app_pdata",r),s=new Headers,i=null,t.version=r.settings.version,t.app_type=r.settings.app_type,t.tenant=r.tenant_id,console.log("can we add new requirments to  new_rply_msg_obj"),"V1"===r.settings.version?(s.append("Authorization",o),i=JSON.stringify({data:t,uid:n.id})):i=JSON.stringify({data:t,uid:n.uid}),s.append("Content-Type","application/json"),l={method:"POST",headers:s,body:i,redirect:"follow"},e.next=17,fetch("https://chats.".concat("magicchat.io","/").concat("prod","/add_chat"),l);case 17:return c=e.sent,e.next=20,c.text();case 20:d=e.sent,console.log(d),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[1,24]])}))),X.apply(this,arguments)}var Q=function(){var e=U(A().mark((function e(t,n,o,a){var r,s,i,l,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Headers).append("X-API-Key",t),s={method:"GET",headers:r,redirect:"follow"},e.prev=3,e.next=6,fetch("https://auth.".concat("magicchat.io","/").concat("prod","/does_user_exist?app_name=").concat(n,"&uid=").concat(o,"&tenant=").concat(a),s);case 6:return i=e.sent,e.next=9,i.text();case 9:return l=e.sent,console.log("result",l,L(l)),c=JSON.parse(l),console.log("Parsed result",c),e.abrupt("return",c);case 16:throw e.prev=16,e.t0=e.catch(3),console.error("Error:",e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n,o,a){return e.apply(this,arguments)}}();function $(e,t){console.log("hwomanytimes",t);var n="".concat(Date.now().toString().slice(-5)).concat(Math.floor(10*Math.random()));return console.log(n),"msg_id__"+n}n.p,n.p;var ee=n(913),te={};te.styleTagTransform=y(),te.setAttributes=g(),te.insert=u().bind(null,"head"),te.domAPI=d(),te.insertStyleElement=m(),l()(ee.Ay,te),ee.Ay&&ee.Ay.locals&&ee.Ay.locals;var ne=n(873),oe={};oe.styleTagTransform=y(),oe.setAttributes=g(),oe.insert=u().bind(null,"head"),oe.domAPI=d(),oe.insertStyleElement=m(),l()(ne.Ay,oe),ne.Ay&&ne.Ay.locals&&ne.Ay.locals;const ae=n.p+"8fe3317f5ff8f0128b9a.wav",re=Object.create(null);re.open="0",re.close="1",re.ping="2",re.pong="3",re.message="4",re.upgrade="5",re.noop="6";const se=Object.create(null);Object.keys(re).forEach((e=>{se[re[e]]=e}));const ie={type:"error",data:"parser error"},le="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ce="function"==typeof ArrayBuffer,de=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,pe=({type:e,data:t},n,o)=>le&&t instanceof Blob?n?o(t):ue(t,o):ce&&(t instanceof ArrayBuffer||de(t))?n?o(t):ue(new Blob([t]),o):o(re[e]+(t||"")),ue=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function he(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ge;const fe="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)fe["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const me="function"==typeof ArrayBuffer,_e=(e,t)=>{if("string"!=typeof e)return{type:"message",data:ve(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:ye(e.substring(1),t)}:se[n]?e.length>1?{type:se[n],data:e.substring(1)}:{type:se[n]}:ie},ye=(e,t)=>{if(me){const n=(e=>{let t,n,o,a,r,s=.75*e.length,i=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<i;t+=4)n=fe[e.charCodeAt(t)],o=fe[e.charCodeAt(t+1)],a=fe[e.charCodeAt(t+2)],r=fe[e.charCodeAt(t+3)],d[l++]=n<<2|o>>4,d[l++]=(15&o)<<4|a>>2,d[l++]=(3&a)<<6|63&r;return c})(e);return ve(n,t)}return{base64:!0,data:e}},ve=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,be=String.fromCharCode(30);let xe;function we(e){return e.reduce(((e,t)=>e+t.length),0)}function Ee(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let a=0;a<t;a++)n[a]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function Ce(e){if(e)return function(e){for(var t in Ce.prototype)e[t]=Ce.prototype[t];return e}(e)}Ce.prototype.on=Ce.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Ce.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Ce.prototype.off=Ce.prototype.removeListener=Ce.prototype.removeAllListeners=Ce.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<o.length;a++)if((n=o[a])===t||n.fn===t){o.splice(a,1);break}return 0===o.length&&delete this._callbacks["$"+e],this},Ce.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){o=0;for(var a=(n=n.slice(0)).length;o<a;++o)n[o].apply(this,t)}return this},Ce.prototype.emitReserved=Ce.prototype.emit,Ce.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Ce.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ke="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Se="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Te(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Ie=Se.setTimeout,Le=Se.clearTimeout;function Ae(e,t){t.useNativeTimers?(e.setTimeoutFn=Ie.bind(Se),e.clearTimeoutFn=Le.bind(Se)):(e.setTimeoutFn=Se.setTimeout.bind(Se),e.clearTimeoutFn=Se.clearTimeout.bind(Se))}function Ne(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Oe extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class De extends Ce{constructor(e){super(),this.writable=!1,Ae(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Oe(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=_e(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Be extends De{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(be),o=[];for(let e=0;e<n.length;e++){const a=_e(n[e],t);if(o.push(a),"error"===a.type)break}return o})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,o=new Array(n);let a=0;e.forEach(((e,r)=>{pe(e,!1,(e=>{o[r]=e,++a===n&&t(o.join(be))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ne()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Ue=!1;try{Ue="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const je=Ue;function Me(){}class Pe extends Be{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Re extends Ce{constructor(e,t,n){super(),this.createRequest=e,Ae(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Te(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=Re.requestsCount++,Re.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Me,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Re.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function Fe(){for(let e in Re.requests)Re.requests.hasOwnProperty(e)&&Re.requests[e].abort()}Re.requestsCount=0,Re.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Fe):"function"==typeof addEventListener&&addEventListener("onpagehide"in Se?"pagehide":"unload",Fe,!1));const qe=function(){const e=ze({xdomain:!1});return e&&null!==e.responseType}();function ze(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||je))return new XMLHttpRequest}catch(e){}if(!t)try{return new(Se[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const Ge="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class He extends De{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Ge?{}:Te(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],o=t===e.length-1;pe(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}o&&ke((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ne()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Je=Se.WebSocket||Se.MozWebSocket,We={websocket:class extends He{createSocket(e,t,n){return Ge?new Je(e,t,n):t?new Je(e,t):new Je(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends De{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){xe||(xe=new TextDecoder);const n=[];let o=0,a=-1,r=!1;return new TransformStream({transform(s,i){for(n.push(s);;){if(0===o){if(we(n)<1)break;const e=Ee(n,1);r=!(128&~e[0]),a=127&e[0],o=a<126?3:126===a?1:2}else if(1===o){if(we(n)<2)break;const e=Ee(n,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),o=3}else if(2===o){if(we(n)<8)break;const e=Ee(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),r=t.getUint32(0);if(r>Math.pow(2,21)-1){i.enqueue(ie);break}a=r*Math.pow(2,32)+t.getUint32(4),o=3}else{if(we(n)<a)break;const e=Ee(n,a);i.enqueue(_e(r?e:xe.decode(e),t)),o=0}if(0===a||a>e){i.enqueue(ie);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),o=new TransformStream({transform(e,t){!function(e,t){le&&e.data instanceof Blob?e.data.arrayBuffer().then(he).then(t):ce&&(e.data instanceof ArrayBuffer||de(e.data))?t(he(e.data)):pe(e,!1,(e=>{ge||(ge=new TextEncoder),t(ge.encode(e))}))}(e,(n=>{const o=n.length;let a;if(o<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,o);else if(o<65536){a=new Uint8Array(3);const e=new DataView(a.buffer);e.setUint8(0,126),e.setUint16(1,o)}else{a=new Uint8Array(9);const e=new DataView(a.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(o))}e.data&&"string"!=typeof e.data&&(a[0]|=128),t.enqueue(a),t.enqueue(n)}))}});o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const a=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),a())})).catch((e=>{}))};a();const r={type:"open"};this.query.sid&&(r.data=`{"sid":"${this.query.sid}"}`),this._writer.write(r).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],o=t===e.length-1;this._writer.write(n).then((()=>{o&&ke((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Pe{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=qe&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Re(ze,this.uri(),e)}}},Ve=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ke=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ze(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let a=Ve.exec(e||""),r={},s=14;for(;s--;)r[Ke[s]]=a[s]||"";return-1!=n&&-1!=o&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,r.path),r.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,o){t&&(n[t]=o)})),n}(0,r.query),r}const Ye="function"==typeof addEventListener&&"function"==typeof removeEventListener,Xe=[];Ye&&addEventListener("offline",(()=>{Xe.forEach((e=>e()))}),!1);class Qe extends Ce{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=Ze(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Ze(t.host).host);Ae(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,o=n.length;e<o;e++){let o=n[e].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),Ye&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Xe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&Qe.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",Qe.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(e+="string"==typeof(t=o)?function(e){let t=0,n=0;for(let o=0,a=e.length;o<a;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ke((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(Qe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ye&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Xe.indexOf(this._offlineEventListener);-1!==e&&Xe.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Qe.protocol=4;class $e extends Qe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Qe.priorWebsocketSuccess=!1;const o=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Qe.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function a(){n||(n=!0,c(),t.close(),t=null)}const r=e=>{const n=new Error("probe error: "+e);n.transport=t.name,a(),this.emitReserved("upgradeError",n)};function s(){r("transport closed")}function i(){r("socket closed")}function l(e){t&&e.name!==t.name&&a()}const c=()=>{t.removeListener("open",o),t.removeListener("error",r),t.removeListener("close",s),this.off("close",i),this.off("upgrading",l)};t.once("open",o),t.once("error",r),t.once("close",s),this.once("close",i),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class et extends $e{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>We[e])).filter((e=>!!e))),super(e,n)}}const tt="function"==typeof ArrayBuffer,nt=Object.prototype.toString,ot="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===nt.call(Blob),at="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===nt.call(File);function rt(e){return tt&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||ot&&e instanceof Blob||at&&e instanceof File}function st(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(st(e[t]))return!0;return!1}if(rt(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return st(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&st(e[t]))return!0;return!1}function it(e){const t=[],n=e.data,o=e;return o.data=lt(n,t),o.attachments=t.length,{packet:o,buffers:t}}function lt(e,t){if(!e)return e;if(rt(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=lt(e[o],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=lt(e[o],t));return n}return e}function ct(e,t){return e.data=dt(e.data,t),delete e.attachments,e}function dt(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=dt(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=dt(e[n],t));return e}const pt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ut=5;var ht;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(ht||(ht={}));class gt{constructor(e){this.replacer=e}encode(e){return e.type!==ht.EVENT&&e.type!==ht.ACK||!st(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===ht.EVENT?ht.BINARY_EVENT:ht.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==ht.BINARY_EVENT&&e.type!==ht.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=it(e),n=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(n),o}}function ft(e){return"[object Object]"===Object.prototype.toString.call(e)}class mt extends Ce{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===ht.BINARY_EVENT;n||t.type===ht.BINARY_ACK?(t.type=n?ht.EVENT:ht.ACK,this.reconstructor=new _t(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!rt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===ht[n.type])throw new Error("unknown packet type "+n.type);if(n.type===ht.BINARY_EVENT||n.type===ht.BINARY_ACK){const o=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(o,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"===e.charAt(t+1)){const o=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(o,t)}else n.nsp="/";const o=e.charAt(t+1);if(""!==o&&Number(o)==o){const o=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(!mt.isPayloadValid(n.type,o))throw new Error("invalid payload");n.data=o}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case ht.CONNECT:return ft(t);case ht.DISCONNECT:return void 0===t;case ht.CONNECT_ERROR:return"string"==typeof t||ft(t);case ht.EVENT:case ht.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===pt.indexOf(t[0]));case ht.ACK:case ht.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _t{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ct(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function yt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const vt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bt extends Ce{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[yt(e,"open",this.onopen.bind(this)),yt(e,"packet",this.onpacket.bind(this)),yt(e,"error",this.onerror.bind(this)),yt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,o,a;if(vt.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const r={type:ht.EVENT,data:t,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),r.id=e}const s=null===(o=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===o?void 0:o.writable,i=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!s||(i?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var n;const o=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===o)return void(this.acks[e]=t);const a=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),o),r=(...e)=>{this.io.clearTimeoutFn(a),t.apply(this,e)};r.withError=!0,this.acks[e]=r}emitWithAck(e,...t){return new Promise(((n,o)=>{const a=(e,t)=>e?o(e):n(t);a.withError=!0,t.push(a),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...o)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...o)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ht.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ht.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ht.EVENT:case ht.BINARY_EVENT:this.onevent(e);break;case ht.ACK:case ht.BINARY_ACK:this.onack(e);break;case ht.DISCONNECT:this.ondisconnect();break;case ht.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...o){n||(n=!0,t.packet({type:ht.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ht.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function xt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},xt.prototype.reset=function(){this.attempts=0},xt.prototype.setMin=function(e){this.ms=e},xt.prototype.setMax=function(e){this.max=e},xt.prototype.setJitter=function(e){this.jitter=e};class wt extends Ce{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Ae(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new xt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const o=t.parser||s;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new et(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=yt(t,"open",(function(){n.onopen(),e&&e()})),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},r=yt(t,"error",a);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{o(),a(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(o),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(yt(e,"ping",this.onping.bind(this)),yt(e,"data",this.ondata.bind(this)),yt(e,"error",this.onerror.bind(this)),yt(e,"close",this.onclose.bind(this)),yt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){ke((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new bt(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Et={};function Ct(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),o=Ze(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const a=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port+t,o.href=o.protocol+"://"+a+(n&&n.port===o.port?"":":"+o.port),o}(e,(t=t||{}).path||"/socket.io"),o=n.source,a=n.id,r=n.path,s=Et[a]&&r in Et[a].nsps;let i;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?i=new wt(o,t):(Et[a]||(Et[a]=new wt(o,t)),i=Et[a]),n.query&&!t.query&&(t.query=n.queryKey),i.socket(n.path,t)}function kt(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"==typeof e)return Tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(e,t):void 0}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(){At=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var r=t&&t.prototype instanceof _?t:_,s=Object.create(r.prototype),i=new A(o||[]);return a(s,"_invoke",{value:S(e,n,i)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",h="suspendedYield",g="executing",f="completed",m={};function _(){}function y(){}function v(){}var b={};c(b,s,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(N([])));w&&w!==n&&o.call(w,s)&&(b=w);var E=v.prototype=_.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,r,s,i){var l=p(e[a],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Dt(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}var r;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,a){n(e,o,t,a)}))}return r=r?r.then(a,a):a()}})}function S(t,n,o){var a=u;return function(r,s){if(a===g)throw Error("Generator is already running");if(a===f){if("throw"===r)throw s;return{value:e,done:!0}}for(o.method=r,o.arg=s;;){var i=o.delegate;if(i){var l=T(i,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===u)throw a=f,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=g;var c=p(t,n,o);if("normal"===c.type){if(a=o.done?f:h,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a=f,o.method="throw",o.arg=c.arg)}}}function T(t,n){var o=n.method,a=t.iterator[o];if(a===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var r=p(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(o.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(Dt(t)+" is not iterable")}return y.prototype=v,a(E,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,o,a,r){void 0===r&&(r=Promise);var s=new k(d(e,n,o,a),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(E),c(E,l,"Generator"),c(E,s,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(o,a){return i.type="throw",i.arg=t,n.next=o,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var a=o.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:N(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function Nt(e,t,n,o,a,r,s){try{var i=e[r](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(o,a)}function Ot(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function s(e){Nt(r,o,a,s,i,"next",e)}function i(e){Nt(r,o,a,s,i,"throw",e)}s(void 0)}))}}function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,jt(o.key),o)}}function Ut(e,t,n){return(t=jt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){var t=function(e){if("object"!=Dt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dt(t)?t:t+""}Object.assign(Ct,{Manager:wt,Socket:bt,io:Ct,connect:Ct}),console.log("laodededc the coreupdatedhis?dsd");var Mt=JSON.parse(localStorage.getItem("global_settings"));console.log("global_settingssdfsdfmulti_admin",Mt);var Pt,Rt=!1,Ft=!0,qt=!1,zt=!1,Gt=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ut(this,"MOBILE_WIDTH",769),Ut(this,"addDateSeparators",(function(e){var t="DATE_SEPARATOR_DEBUG",o=1;if(console.log("".concat(t,"_").concat(o++,": Processing ").concat(e.length," messages for date separators")),!e||0===e.length)return console.log("".concat(t,"_").concat(o++,": No messages to process")),e;var a=[],r=null;return e.forEach((function(e,s){var i,l=(null===(i=e.message)||void 0===i?void 0:i.timestamp)||e.timestamp;if(!l)return console.log("".concat(t,"_").concat(o++,": No timestamp for message ").concat(s,", skipping date separator")),void a.push(e);var c=new Date(l),d=c.toDateString();if(console.log("".concat(t,"_").concat(o++,": Message ").concat(s," - timestamp: ").concat(l,", date: ").concat(d,", currentDate: ").concat(r)),null===r||r!==d){console.log("".concat(t,"_").concat(o++,": Adding date separator for ").concat(d));var p={type:"DATE_SEPARATOR",separatorDate:d,displayDate:n.formatDateForDisplay(c),timestamp:l,isDateSeparator:!0};a.push(p),r=d}a.push(e)})),console.log("".concat(t,"_").concat(o++,": Final count - messages: ").concat(e.length,", with separators: ").concat(a.length)),a})),Ut(this,"formatDateForDisplay",(function(e){var t=new Date,n=new Date(t);return n.setDate(n.getDate()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===n.toDateString()?"Yesterday":e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})),Ut(this,"createDateSeparatorElement",(function(e){var t=document.createElement("div");t.className=w.YD,t.setAttribute("data-date",e.separatorDate),t.setAttribute("data-timestamp",e.timestamp);var n=document.createElement("span");return n.className=r.dateSeparatorText,n.textContent=e.displayDate,t.appendChild(n),t})),Ut(this,"handleP2ADisconnect",(function(e){var t,o=JSON.parse(localStorage.getItem("tezkit_app_data")),a=n.state.p2a_connection_with;if(e&&"P2A"===(null==o||null===(t=o.settings)||void 0===t?void 0:t.app_type)&&a){console.log(a,"tezkit_app_dsdfatasdfsdf",n.state.loggedInUser);var r={tenant_name:o.tenant_id,app_name:o.app_name,version:o.settings.version,client_id:n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id,support_id:a.user_id,user_type:a.user_type},s=a.user_type,i=a.user_id,l="tenant_type"===s?"global_for__":"support_type"===s?"support_for__":null;console.log("payloadsdfsadfsdf",JSON.stringify(r)),l&&n.state.socket.emit("REQUEST_FOR_AGENT_AVAILIBILTY",{room:"".concat(l).concat(i),status:"CONNECTION_DISCONNECTED",apiPayload:r}),n.state.p2a_connection_with=null,console.log(r,"tezkit_app_datasdfsdf")}})),Ut(this,"closeChatBox",(function(){var e,t;console.log("does this happen only on close?",n.state.is_chat_content_modal_open);var o=JSON.parse(localStorage.getItem("global_settings")),a=null!==(e=null==o||null===(t=o.multi_admin)||void 0===t?void 0:t.enable)&&void 0!==e&&e;n.state.is_chat_content_modal_open&&(n.handleP2ADisconnect(a),n.state.is_chat_content_modal_open=!1)})),Ut(this,"showCover",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.showClose,a=void 0!==o&&o,r=n.onClose,s=void 0===r?null:r;if(e.innerHTML="",e.style.display="flex",a){var i=document.createElement("button");i.innerHTML="&times;",i.className="cover-close-btn",i.style.cssText="\n      position: absolute;\n      top: 15px;\n      right: 20px;\n      font-size: 26px;\n      background: transparent;\n      border: none;\n      color: black;\n      cursor: pointer;\n      z-index: 1000;\n      transition: transform 0.2s ease;\n    ",i.addEventListener("mouseover",(function(){i.style.transform="scale(1.1)"})),i.addEventListener("mouseout",(function(){i.style.transform="scale(1)"})),i.addEventListener("click",(function(){e.style.display="none",e.innerHTML="",s&&s()})),e.appendChild(i)}e.appendChild(t)})),Ut(this,"incrementNotificationsCount",(function(){console.log("being called isnt it?");var e=document.getElementById("unread_chat_msgs_num");e.textContent=Number(e.textContent)+1})),Ut(this,"updateAdminTypingStatusAtClient",(function(e){var t=document.getElementById("typingStatusWrapper"),n=document.getElementById("typingStatusText");t&&n&&(e?(t.style.display="flex",n.innerHTML='\n      typing\n      <span class="typing-indicator-dots">\n        <span>.</span><span>.</span><span>.</span>\n      </span>\n    '):(t.style.display="none",n.innerHTML=""))})),Ut(this,"updateUserListLSStatusAtClientP2P",(function(e){if(console.log("does it ran when user went away?",this),this.state.activeWindowObj)if(console.log(e,Dt(e),e.live_status,this.state.activeWindowObj,"will see if the right window is open and will update the cir in it's header"),e&&e.hasOwnProperty("frm_user")&&e.hasOwnProperty("live_status")){console.log("sdfsdfsdfsfdata.frm_user1",e);var t=e.frm_user.hasOwnProperty("uid")?e.frm_user.uid:e.frm_user.id;console.log("asfhasdgsadf?");var n=this.state.activeWindowObj.hasOwnProperty("uid")?this.state.activeWindowObj.uid:this.state.activeWindowObj.id;if(console.log(n,"frm_user_idcrnt_window_id",t),t==n){var o=document.querySelector("#statusElement > .user_status_cir");console.log(e.live_status,"statusElemensSDFSDFdftsdfsdsdf",o),o&&(o.style.width="16px",o.style.height="16px",o.style.borderRadius="50%","AWAY"===e.live_status?(o.textContent="",o.style.background="yellow"):"ONLINE"===e.live_status?(o.textContent="",o.style.background="green"):"OFFLINE"===e.live_status&&(o.textContent="",o.style.background="grey"))}}else console.error("Both are mandatory",e,Dt(e),!e.frm_user,e.frm_user);else console.log("window was not opened!")})),Ut(this,"showNoticeMsg",(function(e,t){var n=document.createElement("div");n.textContent=e||"Feel Free to Shoot what's on your mind!",t.appendChild(n),t.style.opacity="1",t.style.display="block",t.classList.add("welcomemsg");var o=0,a=setInterval((function(){o>=1?clearInterval(a):(o+=.05,t.style.opacity=o)}),50);setTimeout((function(){var e=1,n=setInterval((function(){e<=0?(clearInterval(n),t.style.display="none"):(e-=.05,t.style.opacity=e)}),50)}),5e3)})),Ut(this,"setglobalMsgsBucketInput",function(){var e=Ot(At().mark((function e(t,n){var o,a=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.length>2&&void 0!==a[2]?a[2]:"input",console.log("what is in is it running!!",t,n,o,chat_core.state.globalMsgsBucket),"input"==o?chat_core.state.globalMsgsBucket["user__"+n].input=t:console.error("nothing matched! - "+o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"updateLiveStatus",function(){var e=Ot(At().mark((function e(t,n){var o,a,r,s,i=this;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=localStorage.getItem("tezkit_app_data"),console.log("edrgndgndfgtezkit_app_datafdg",o),a=null,o&&(a=JSON.parse(o)),console.log("chat_core.stateGTFHDFGHvsdfsd",a.tenant_info.id),r=JSON.parse(t),console.log("chat_core.asgassdfsdbodyObjfsadf",this.state.p2a_connection_with),s=Lt({app_name:a.app_name,version:a.settings.version,app_type:a.settings.app_type,tenant_id:a.tenant_info.id,connected_with:this.state.p2a_connection_with},r),this.state.socket&&(this.state.socket.connected?this.state.socket.emit("ON_USER_LIVE_STATUS",s):this.state.socket.once("connect",(function(){i.state.socket.emit("ON_USER_LIVE_STATUS",s)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"setAdminLSData",function(){var e=Ot(At().mark((function e(t,n){var o,a,r,s,i,l,c,d,p,u,h,g,f;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.tenantName,a=t.otherUserId,r=t.user_type,s=t.api_key,i=t.appName,l=t.version,c=t.current_apptype,console.log("ewrewrhenvehre"),null,d="P2A"==c?new URLSearchParams({user_type:r,tenant_name:o,user_id:a}):new URLSearchParams({user_type:r,tenant_name:o,user_id:a,app_name:i,version:l,app_type:c}),p="https://livestatus.".concat("magicchat.io","/").concat("prod","/get_app"),u="".concat(p,"?").concat(d),localStorage.getItem("tezkit_token"),h={method:"GET",headers:{Accept:"*/*","x-api-key":s},redirect:"follow"},e.prev=9,e.next=12,fetch(u,h);case 12:if((g=e.sent).ok){e.next=15;break}throw new Error("HTTP error! Status: ".concat(g.status));case 15:return e.next=17,g.json();case 17:return f=e.sent,console.log("Result:",f),n(f),e.abrupt("return",f);case 23:throw e.prev=23,e.t0=e.catch(9),console.error("Error fetching data:",e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[9,23]])})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"init",(function(e,t){console.log("here is incoing in init?",e,t);var o=localStorage.getItem("tezkit_app_data");if(console.log("initialized1111111",o),o){var a,r=JSON.parse(o);console.log("initializetezkit_app_p_datad2222222",n.state.loggedInUser.email),a=JSON.stringify({live_status:"ONLINE",version:r.settings.version,tenant:r.tenant_id,frm_user:{id:n.state.loggedInUser.uid?n.state.loggedInUser.uid:n.state.loggedInUser.id}});var s={Accept:"*/*","User-Agent":"Thunder Client (https://www.thunderclient.com)","x-api-key":r.auth_key,"Content-Type":"application/json"};if(n.isFeatureEnabled(r.feature,"live_status","client_push_admin")){console.log("arewer erewrsdfsd?",r),console.log(n.state.loggedInUser,"arewer erewrupda?",r.settings.version),console.log(n.state.loggedInUser,"sdfsdarewer erewr?",n.state.loggedInUser.id);var i=n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id,l={app_type:r.settings.app_type,app_name:r.app_name,version:r.settings.version,user_id:i};"P2P"==r.settings.app_type?console.log("arewe heredyContent in away handler",a):"P2A"==r.settings.app_type&&(l.tenant_id=n.state.loggedInUser.tenant_info.id,console.log("here is updatedls_payload",l)),n.updateLiveStatus(a,s,l)}console.log("arwerhere?sdfsadfasd"),n.initializeSocketConnection(e,r,{name_idn:"V1"!=r.settings.version?"uid":"id"}),console.log("exit intit????")}})),Ut(this,"createChatBotHeader",(function(){var e=document.createElement("div");e.className=w.SZ,e.style.flexShrink="0";var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center";var n=document.createElement("h3");return n.id="userName",n.textContent="Magentic AI Bot",t.appendChild(n),e.appendChild(t),e})),Ut(this,"multiAdminConnHandler",function(){var e=Ot(At().mark((function e(t,o){var a,r,s,i,l,c,d;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"P2A"!=o.settings.app_type||"user_chat"!=n.state.viewType){e.next=27;break}if(console.log("whaewtwe ",n.state.loggedInUser.tenant_info.id,n.state.activeWindowObj.id),a=JSON.parse(localStorage.getItem("tezkit_p2a_connection_user")),console.log("fsdfsdp2a_connected_userfsdf",a,t),n.initiateConnectAgentReq(o),chatAnnouncment.className="chat_announcement",chatAnnouncment.id="chat_announcement",!t){e.next=27;break}if(a){e.next=15;break}n.state.socket.emit("REQUEST_FOR_AGENT_AVAILIBILTY",{room:"global_for__"+n.state.loggedInUser.tenant_info.id,tenant_id:n.state.loggedInUser.tenant_info.id,frm_id:n.state.loggedInUser.id,version:o.settings.version,status:"PENDING",app_name:o.app_name,message:"something"}),(r=document.querySelector("#chat_announcement")).textContent="Will connect you shortly...",r.style.display="block",e.next=27;break;case 15:return(s=document.querySelector("#chat_announcement")).textContent="You are already connected with1 "+JSON.stringify(a),s.style.display="block",i=document.querySelector(".chat_header_wrapper #userName"),l=document.querySelector(".chat_header_wrapper #statusElement"),console.log(l,"loginMessageElement.textContent",i.textContent),c=JSON.parse(localStorage.getItem("tezkit_app_data")),i.textContent=a.full_name||"Support",console.log("tezkit_app_pdatasdfsd",c),d={tenantName:c.tenant_id,otherUserId:a.user_id,user_type:a.user_type,api_key:c.auth_key},e.next=27,n.setAdminLSData(d,(function(e){return console.log("when was it fired?"),n.handleAdminStatusUpdate(e,c)}));case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"createToggleOrCloseButton",(function(e,t,o){console.log("logout_modefsdfsfsdf",o);var a=null;if("P2A"===e.settings.app_type)if(o)(a=document.createElement("button")).className=w.JY,a.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.2995 14L27.3164 3.98307C28.2279 3.07161 28.2279 1.59505 27.3164 0.683594C26.4049 -0.227865 24.9284 -0.227865 24.0169 0.683594L14 10.7005L3.98307 0.683594C3.07161 -0.227865 1.59505 -0.227865 0.683594 0.683594C-0.227865 1.59505 -0.227865 3.07161 0.683594 3.98307L10.7005 14L0.683594 24.0169C-0.227865 24.9284 -0.227865 26.4049 0.683594 27.3164C1.13932 27.7721 1.73633 28 2.33333 28C2.93034 28 3.52734 27.7721 3.98307 27.3164L14 17.2995L24.0169 27.3164C24.4727 27.7721 25.0697 28 25.6667 28C26.2637 28 26.8607 27.7721 27.3164 27.3164C28.2279 26.4049 28.2279 24.9284 27.3164 24.0169L17.2995 14Z" fill="white"/>\n</svg>',a.addEventListener("click",(function(){console.log("Closing Chat Modal",n),n.minimizeChatModal()}));else{console.log("Initial viewType:",n.state.viewType),(a=document.createElement("button")).id="close-btn__".concat(t),a.className=w.Iv;var r=document.createElement("div");r.setAttribute("id","bi_wrapper"),r.innerHTML='<svg width="36" height="34" viewBox="0 0 36 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.5792 26.2122C15.5759 25.0376 15.8056 23.8741 16.2551 22.789C16.7046 21.7038 17.3649 20.7187 18.1979 19.8906C18.9905 19.069 19.945 18.4208 21.0011 17.9872C20.9094 17.9499 20.8105 17.9336 20.7116 17.9396C20.6128 17.9456 20.5166 17.9737 20.4301 18.0218C18.9267 18.9604 17.19 19.458 15.4177 19.458C13.6454 19.458 11.9087 18.9604 10.4054 18.0218C10.3374 17.979 10.2611 17.9513 10.1815 17.9403C10.1019 17.9294 10.0209 17.9355 9.94394 17.9583C9.84588 17.9583 3.96258 19.9598 3.778 20.0002C2.678 20.3657 1.72103 21.0684 1.04289 22.0084C0.364745 22.9485 -0.000141409 24.0782 4.11101e-08 25.2374V30.3304C4.11101e-08 32.0262 1.3324 33.9988 3.05124 33.9988H20.1417C19.4258 33.6051 18.7694 33.1118 18.1921 32.5337C17.3606 31.7049 16.7015 30.7195 16.253 29.6344C15.8046 28.5494 15.5756 27.3862 15.5792 26.2122Z" fill="white"/>\n        <path d="M17.3325 18.0794C21.7959 17.021 24.5562 12.5448 23.4978 8.0814C22.4394 3.61804 17.9631 0.857764 13.4997 1.91615C9.03628 2.97453 6.27597 7.45078 7.33437 11.9141C8.39277 16.3775 12.8691 19.1378 17.3325 18.0794Z" fill="white"/>\n        <path d="M30.0218 20.7097C29.0054 19.6928 27.7274 18.9772 26.3294 18.6422C24.9313 18.3071 23.4678 18.3656 22.1009 18.8113C20.7341 19.257 19.5174 20.0724 18.5855 21.1671C17.6537 22.2619 17.0431 23.5933 16.8216 25.0138C16.6 26.4342 16.776 27.8883 17.3301 29.2148C17.8843 30.5414 18.7949 31.6886 19.961 32.5294C21.1272 33.3702 22.5034 33.8717 23.9371 33.9784C25.3708 34.085 26.806 33.7926 28.0837 33.1336L31.2273 33.5835C31.3158 33.595 31.4058 33.586 31.4904 33.5574C31.575 33.5288 31.6519 33.4813 31.7154 33.4184C31.7788 33.3555 31.827 33.279 31.8564 33.1947C31.8857 33.1104 31.8955 33.0204 31.8848 32.9318L31.4349 29.7825C32.1864 28.3145 32.4544 26.6464 32.2006 25.0168C31.9468 23.3872 31.1841 21.8796 30.0218 20.7097ZM20.4758 27.0774C20.2463 27.0774 20.0263 26.9862 19.864 26.824C19.7018 26.6617 19.6106 26.4417 19.6106 26.2122C19.6106 25.9827 19.7018 25.7627 19.864 25.6004C20.0263 25.4382 20.2463 25.347 20.4758 25.347C20.7053 25.347 20.9253 25.4382 21.0876 25.6004C21.2498 25.7627 21.341 25.9827 21.341 26.2122C21.341 26.4417 21.2498 26.6617 21.0876 26.824C20.9253 26.9862 20.7053 27.0774 20.4758 27.0774ZM24.5134 27.0774C24.2839 27.0774 24.0638 26.9862 23.9016 26.824C23.7393 26.6617 23.6482 26.4417 23.6482 26.2122C23.6482 25.9827 23.7393 25.7627 23.9016 25.6004C24.0638 25.4382 24.2839 25.347 24.5134 25.347C24.7428 25.347 24.9629 25.4382 25.1252 25.6004C25.2874 25.7627 25.3786 25.9827 25.3786 26.2122C25.3786 26.4417 25.2874 26.6617 25.1252 26.824C24.9629 26.9862 24.7428 27.0774 24.5134 27.0774ZM28.5509 27.0774C28.3215 27.0774 28.1014 26.9862 27.9392 26.824C27.7769 26.6617 27.6857 26.4417 27.6857 26.2122C27.6857 25.9827 27.7769 25.7627 27.9392 25.6004C28.1014 25.4382 28.3215 25.347 28.5509 25.347C28.7804 25.347 29.0005 25.4382 29.1627 25.6004C29.325 25.7627 29.4161 25.9827 29.4161 26.2122C29.4161 26.4417 29.325 26.6617 29.1627 26.824C29.0005 26.9862 28.7804 27.0774 28.5509 27.0774Z" fill="white"/>\n        </svg>\n              ';var s=document.createElement("div");s.setAttribute("id","ui_wrapper"),s.innerHTML='<svg width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M34.8535 17.25V26.907C35.5448 26.3068 36.0992 25.565 36.4792 24.732C36.8591 23.899 37.0557 22.9941 37.0557 22.0785C37.0557 21.1629 36.8591 20.258 36.4792 19.425C36.0992 18.592 35.5448 17.8502 34.8535 17.25ZM17.7332 5.43292V8.54467H19.3447V5.43292C19.9818 5.2397 20.5282 4.82399 20.8844 4.26156C21.2406 3.69914 21.3828 3.02745 21.2851 2.36892C21.1874 1.7104 20.8564 1.1089 20.3523 0.674062C19.8482 0.239222 19.2047 0 18.5389 0C17.8732 0 17.2296 0.239222 16.7256 0.674062C16.2215 1.1089 15.8904 1.7104 15.7928 2.36892C15.6951 3.02745 15.8373 3.69914 16.1935 4.26156C16.5497 4.82399 17.0961 5.2397 17.7332 5.43292ZM33.2331 16.2345C33.1351 14.5919 32.4142 13.0486 31.2174 11.9192C30.0206 10.7899 28.4381 10.1596 26.7926 10.157H10.2845C8.63897 10.1596 7.05643 10.7899 5.85965 11.9192C4.66286 13.0486 3.94197 14.5919 3.844 16.2345C3.83594 16.3555 3.83594 27.5515 3.83594 27.5515C3.83914 29.2607 4.51956 30.8991 5.7282 32.1077C6.93685 33.3164 8.5752 33.9968 10.2845 34H26.7926C28.4381 33.9974 30.0206 33.3671 31.2174 32.2378C32.4142 31.1084 33.1351 29.5651 33.2331 27.9225C33.2411 27.8015 33.2411 16.3579 33.2331 16.2345ZM9.39886 18.58C9.41748 17.7576 9.75724 16.9752 10.3454 16.4002C10.9336 15.8252 11.7235 15.5032 12.5461 15.5032C13.3687 15.5032 14.1586 15.8252 14.7468 16.4002C15.335 16.9752 15.6747 17.7576 15.6933 18.58C15.6801 19.4061 15.3427 20.1939 14.7538 20.7734C14.165 21.3529 13.3719 21.6777 12.5457 21.6777C11.7195 21.6777 10.9264 21.3529 10.3376 20.7734C9.74872 20.1939 9.41209 19.4061 9.39886 18.58ZM26.107 26.9869C25.1728 28.0872 24.0141 28.9751 22.7087 29.591C21.4034 30.207 19.9814 30.5368 18.5381 30.5584C17.0949 30.5365 15.673 30.2066 14.3677 29.5906C13.0624 28.9747 11.9037 28.0869 10.9693 26.9869C10.8425 26.8214 10.7849 26.6131 10.8085 26.406C10.8322 26.1989 10.9353 26.009 11.0962 25.8763C11.2571 25.7437 11.4631 25.6787 11.6709 25.6949C11.8788 25.7111 12.0722 25.8073 12.2106 25.9633C12.9921 26.8823 13.9609 27.6238 15.0521 28.1382C16.1434 28.6526 17.3319 28.928 18.5381 28.946C19.7446 28.9292 20.9335 28.6543 22.0249 28.1398C23.1163 27.6253 24.0849 26.8832 24.8657 25.9633C25.0034 25.8049 25.1975 25.7065 25.4068 25.6892C25.616 25.6718 25.8237 25.7369 25.9856 25.8705C26.1475 26.0041 26.2508 26.1957 26.2735 26.4044C26.2962 26.6131 26.2364 26.8216 26.107 26.9869ZM24.535 21.7321C20.3779 21.6272 20.3795 15.5328 24.535 15.4287C25.3621 15.442 26.1509 15.7798 26.7312 16.3695C27.3114 16.9591 27.6366 17.7532 27.6366 18.5804C27.6366 19.4077 27.3114 20.2017 26.7312 20.7914C26.1509 21.381 25.3621 21.7188 24.535 21.7321Z" fill="white"/>\n        <path d="M14.082 18.58C14.0728 18.1789 13.907 17.7974 13.6201 17.5169C13.3332 17.2365 12.9479 17.0795 12.5467 17.0795C12.1455 17.0795 11.7602 17.2365 11.4733 17.5169C11.1864 17.7974 11.0206 18.1789 11.0114 18.58C11.0206 18.9811 11.1864 19.3627 11.4733 19.6431C11.7602 19.9235 12.1455 20.0805 12.5467 20.0805C12.9479 20.0805 13.3332 19.9235 13.6201 19.6431C13.907 19.3627 14.0728 18.9811 14.082 18.58ZM24.5368 17.0403C24.1284 17.0403 23.7368 17.2025 23.448 17.4913C23.1593 17.78 22.997 18.1717 22.997 18.58C22.997 18.9884 23.1593 19.38 23.448 19.6688C23.7368 19.9575 24.1284 20.1198 24.5368 20.1198C24.9452 20.1198 25.3368 19.9575 25.6256 19.6688C25.9143 19.38 26.0765 18.9884 26.0765 18.58C26.0765 18.1717 25.9143 17.78 25.6256 17.4913C25.3368 17.2025 24.9452 17.0403 24.5368 17.0403ZM7.62995e-05 22.0789C-0.00445002 22.9974 0.192462 23.9058 0.576943 24.7399C0.961424 25.5741 1.52412 26.3139 2.22541 26.907V17.25C1.52615 17.8451 0.964821 18.5853 0.580399 19.4192C0.195977 20.2531 -0.0015168 21.1607 7.62995e-05 22.0789Z" fill="white"/>\n        </svg>\n              ';var i=document.createElement("div");i.setAttribute("id","toggleSwitch"),i.classList.add(w.NY),i.innerHTML='\n<svg width="60" height="34" viewBox="0 0 60 34" xmlns="http://www.w3.org/2000/svg">\n  \x3c!-- Background Track --\x3e\n  <rect x="2" y="2" width="56" height="30" rx="15" fill="#ccc" stroke="#ccc" stroke-width="1.5" />\n  \n  \x3c!-- Toggle Circle --\x3e\n  <circle cx="17" cy="17" r="12" fill="white" />\n</svg>\n\n';var l=document.createElement("div");l.className=w.YL;var c=function(e){var t="bot_chat"===e;l.innerText=t?"Talk to live user":"Talk to bot";var n=i.querySelector("svg"),o=n.querySelector("rect"),a=n.querySelector("circle");t?(o.setAttribute("fill","#ccc"),o.setAttribute("stroke","#ccc"),a.setAttribute("cx","17")):(o.setAttribute("fill","#4CAF50"),o.setAttribute("stroke","#4CAF50"),a.setAttribute("cx","43"))};c(n.state.viewType),a.appendChild(i),a.appendChild(l),i.addEventListener("click",Ot(At().mark((function a(){var r,s,i,l,d;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(document.getElementById("live_talk"),document.getElementById("liveTalkOverlay"),console.log("getLivetalkUsergetLivetalkUser"),r="bot_chat"===n.state.viewType?"user_chat":"bot_chat",n.toggleChatView(r,t),c(r),"user_chat"!=r){a.next=16;break}return console.log("asdflkhs;gfdfgdfgarevvenve comdingdfdf?"),a.next=10,n.initializeChatComponents(e,n.state.socket,o);case 10:console.log("asdfsadfa"),i=null===(s=e.feature)||void 0===s||null===(s=s.live_status)||void 0===s?void 0:s.enable,console.log("enableValuesdf",1==i),JSON.parse(localStorage.getItem("global_settings")).multi_admin.enable,1==i&&(console.log("live_status.enable is not strictly boolean"),console.log("sdfhsdfsdafsdfsdf",n.state.loggedInUser,JSON.parse(JSON.stringify(n.state.viewType))),n.state.loggedInUser&&(console.log("asdfjosijfsfsdf?"),console.log("sdofhoisfdsdfres")),(l=document.getElementById("chatBody")).scrollTop=l.scrollHeight,console.log("was it called?d"));case 16:"bot_chat"==r&&(d=document.querySelector('[class^="chat_box_top_user_wrapper"]'),console.log("cbtucbtuww",d));case 17:case"end":return a.stop()}}),a)}))))}else"P2P"===e.settings.app_type&&((a=document.createElement("button")).className=w.JY,a.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.2995 14L27.3164 3.98307C28.2279 3.07161 28.2279 1.59505 27.3164 0.683594C26.4049 -0.227865 24.9284 -0.227865 24.0169 0.683594L14 10.7005L3.98307 0.683594C3.07161 -0.227865 1.59505 -0.227865 0.683594 0.683594C-0.227865 1.59505 -0.227865 3.07161 0.683594 3.98307L10.7005 14L0.683594 24.0169C-0.227865 24.9284 -0.227865 26.4049 0.683594 27.3164C1.13932 27.7721 1.73633 28 2.33333 28C2.93034 28 3.52734 27.7721 3.98307 27.3164L14 17.2995L24.0169 27.3164C24.4727 27.7721 25.0697 28 25.6667 28C26.2637 28 26.8607 27.7721 27.3164 27.3164C28.2279 26.4049 28.2279 24.9284 27.3164 24.0169L17.2995 14Z" fill="white"/>\n</svg>',a.addEventListener("click",(function(){console.log("Closing P2P Chat Modal",n),n.minimizeChatModal()})));return a})),Ut(this,"createChatNotice",(function(){var e=document.createElement("div");return e.className="chat_notice",e.id="chatNotice",e.style.display="none",e})),Ut(this,"toggleChatView",function(){var e=Ot(At().mark((function e(t,o){var a,r,s,i,l,c;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("arewryo9u9thit?",t),document.querySelector(".".concat(w.u9)),document.querySelector(".".concat(w.av)),a=document.querySelector(".".concat(w.fP)),r=document.querySelector(".".concat(w.DW)),"user_chat"!==t){e.next=22;break}if(console.log("Switching to User Chat..."),a.style.display="flex",r.style.display="none",n.state.unread_messages&&(console.log("whewriway1",n.state.unread_messages),n.informPeerSysAboutBULKMsgsStatus(n.state.socket,n.state.unread_messages,"READ",n.state.loggedInUser.app_name,n.state.loggedInUser.tenant_info.id)),i=JSON.parse(localStorage.getItem("tezkit_app_data")),l=null===(s=i.feature)||void 0===s||null===(s=s.live_status)||void 0===s?void 0:s.enable,console.log("enableValuedsf",l),1!=l){e.next=20;break}if(console.log("live_status.enable is not strictly boolean",n.state.activeWindowObj.hasOwnProperty("id")?n.state.activeWindowObj.id:n.state.activeWindowObj.uid),c=n.state.activeWindowObj.hasOwnProperty("id")?n.state.activeWindowObj.id:n.state.activeWindowObj.uid,console.log("sdfhsdfsdafsdfsdf",n.state.loggedInUser,JSON.parse(JSON.stringify(n.state.viewType))),!n.state.loggedInUser){e.next=20;break}return e.next=20,n.processAdminLiveStatus(i,c);case 20:e.next=23;break;case 22:"bot_chat"===t?(console.log("Switching to Bot Chat"),a.style.display="none",r.style.display="flex"):(console.log("Hiding both chat views"),a.style.display="none",r.style.display="none",console.error("Unknown viewType!"));case 23:n.state.viewType=t;case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"createChatHeaderLogout",(function(e){if(console.log("aerw here?"),localStorage.getItem("tezkit_app_data")){var t=document.createElement("div");t.className=w.py;var o=n.createLogoutChatHeader();t.appendChild(o);var a=document.createElement("button");a.id="close-btn__".concat(e),a.className=w.JY,a.innerHTML='\n    <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M23.9704 1.5702C25.0639 0.476722 26.8363 0.476722 27.9298 1.5702C29.0233 2.66368 29.0233 4.43613 27.9298 5.5296L18.7094 14.75L27.9298 23.9704L28.1223 24.1826C29.0194 25.2823 28.955 26.9046 27.9298 27.9298C26.9046 28.9549 25.2824 29.0194 24.1826 28.1223L23.9704 27.9298L14.75 18.7094L5.52963 27.9298C4.43616 29.0232 2.66371 29.0232 1.57023 27.9298C0.476753 26.8363 0.476753 25.0638 1.57023 23.9704L10.7906 14.75L1.57023 5.5296C0.476753 4.43613 0.476753 2.66368 1.57023 1.5702C2.66371 0.476722 4.43616 0.476722 5.52963 1.5702L14.75 10.7906L23.9704 1.5702Z" fill="white"/>\n    </svg>\n  ',a.addEventListener("click",(function(){n.minimizeChatModal()})),t.appendChild(a);var r=document.createElement("div");return r.className="chat_notice",r.id="chatNotice",r.style.display="none",t.appendChild(r),t}})),Ut(this,"showMAannouncementMessages",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,o=void 0===n?6e3:n,a=t.persistent,s=void 0!==a&&a,i=t.showCloseButton,l=void 0!==i&&i,c=t.type,d=void 0===c?"info":c,p=document.querySelector("#chat_announcement");if(console.log(p,"sdfsdddd...",o,s,l,d),p){p._hideTimer&&(clearTimeout(p._hideTimer),p._hideTimer=null),p.ontransitionend=null,p.style.display="flex";var u={connecting:{backgroundColor:"#edf2fb",color:"#1b5e20",border:"1px solid #edf2fb",headerText:"Connecting... Please Wait"},connected:{backgroundColor:"#edf2fb",color:"#1b5e20",border:"1px solid #81c784",headerText:"Connection Established"},error:{backgroundColor:"#ffebee",color:"#b71c1c",border:"1px solid #ef9a9a",headerText:"Connection Failed"}},h=u[d]||u.connecting;p.innerHTML="",p.className="announcement-container",p.classList.add(d),Object.assign(p.style,{display:"flex",flexDirection:"column",backgroundColor:h.backgroundColor,border:h.border,color:h.color,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease",overflow:"hidden",position:"fixed",maxWidth:"497px",zIndex:"2",boxShadow:"rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px",transform:"translateY(-100%)",opacity:"0",width:"100%",alignItems:"center"});var g=document.createElement("div");g.className=w.wF,g.innerHTML='\n    <span class="header-title">'.concat(h.headerText,'</span>\n    <span class="collapse-icon" \n      style="\n        font-size: 16px;\n        cursor: pointer;\n        border: 1px solid #1b5e20;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #1b5e20;\n        background-color: #ffffffb7;\n        transition: background-color 0.2s ease;\n        margin-left: 20px;\n      "\n    >â–¼</span>\n  '),p.appendChild(g);var f=document.createElement("div");f.className="connection-visual ".concat(d),f.style.display="flex",f.style.alignItems="flex-end",f.style.gap="15px";var m="connecting"===d;"connected"!==d&&(f.innerHTML='\n      <div class="'.concat(w.D," ").concat(m?"":w.RK,'">\n        <div class="').concat(w.GS," ").concat(r.left,'"></div>\n        <svg class=').concat(w.WN,' width="160" height="80" viewBox="0 0 160 80">\n          ').concat(m?'<path id="curvePath" d="M10,60 Q80,10 150,60" stroke="#1b5e20" stroke-width="2" stroke-dasharray="6,6" fill="none" />\n                 <circle class="moving-dot" r="4" fill="#1b5e20">\n                   <animateMotion dur="1.6s" repeatCount="indefinite">\n                     <mpath href="#curvePath" />\n                   </animateMotion>\n                 </circle>':'<line x1="10" y1="40" x2="150" y2="40" stroke="#b71c1c" stroke-width="2" />\n                 <text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" fill="#b71c1c" font-size="18">âœ–</text>','\n        </svg>\n        <div class="').concat(w.GS," ").concat(r.right,'"></div>\n      </div>\n    '),p.appendChild(f));var _=document.createElement("p");_.classList.add(w.FB),_.innerHTML=e,p.appendChild(_);var y=document.createElement("div");y.className=w.p9,y.innerHTML="â–²",p.appendChild(y),y.onclick=function(){p.classList.add("collapsed"),_.innerText=e.slice(0,30)+"...",y.style.display="none",g.querySelector(".collapse-icon").style.display="flex",_.style.display="none",f&&(f.style.display="none")},g.querySelector(".collapse-icon").onclick=function(){p.classList.remove("collapsed"),_.innerHTML=e,y.style.display="flex",g.querySelector(".collapse-icon").style.display="none",_.style.display="block",f&&(f.style.display="flex")},g.querySelector(".collapse-icon").style.display="none",requestAnimationFrame((function(){requestAnimationFrame((function(){p.style.display="flex",p.style.transform="translateY(0)",p.style.opacity="1"}))})),s||(p._hideTimer&&(clearTimeout(p._hideTimer),p._hideTimer=null),p._hideTimer=setTimeout((function(){p._hideTimer&&(clearTimeout(p._hideTimer),p._hideTimer=null),p.style.transform="translateY(-100%)",p.style.opacity="0",p.ontransitionend=function(){p.style.display="none",p.ontransitionend=null},p._hideTimer=setTimeout((function(){p.style.display="none",p._hideTimer=null,p.ontransitionend=null}),390)}),o))}})),Ut(this,"addAIPopUp",(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.createElement("div");a.setAttribute("id","tranferChat_popup"),a.className=w.CL;var r=document.createElement("div");r.style.background="#fff",r.style.padding="20px",r.style.borderRadius="10px",r.style.textAlign="center",r.style.maxHeight="185px",r.style.maxWidth="320px";var s=document.createElement("p"),i=3==t?"I am not sure about this, Would you like me tranfer you to Live Agent?":"Would you like me tranfer you to Live Agent?";s.textContent=i,r.appendChild(s);var l={type:"BOT",message:{message:i,status:"SENT",timestamp:Date.now()}},c=JSON.parse(localStorage.getItem("tezkit_app_data"));console.log("do you have self",n),n.botAIMsgsHandler(JSON.stringify(l),c,"INCOMING");var d=document.createElement("div");d.style.display="flex",d.style.justifyContent="space-evenly",d.style.marginTop="30px";var p=document.createElement("button");p.textContent="Yes",p.style.padding="8px 16px",p.style.background="#a370ce",p.style.color="#fff",p.style.border="none",p.style.borderRadius="5px",p.onclick=function(){console.log("arewrjyou the one?",n.state.loggedInUser,c);var t=c.settings.version;if(n.state.loggedInUser){console.log("arewrwdsferwer?");var o={type:"BOT",message:{message:"Yes",status:"SENT",timestamp:Date.now()}};n.botAIMsgsHandler(JSON.stringify(o),c);var r="user_chat";n.toggleChatView(r,Z),function(){var e=document.querySelector("#ui_wrapper"),t=document.querySelector("#bi_wrapper"),n=document.querySelector(".tooltip");console.log("tipsdsadfsdf",n);t.style.display="none",e.style.display="block"}(),e.removeChild(a)}else"V4"==t?(e.removeChild(a),window.magicchat_io.renderErrorPopup(["something went wrong!"],void 0,"error")):(e.removeChild(a),window.magicchat_io.renderErrorPopup(["Kindly Login First"],void 0,"error"))};var u=document.createElement("button");u.textContent="No",u.style.padding="8px 16px",u.style.background="#ccc",u.style.color="#121212",u.style.border="none",u.style.borderRadius="5px",u.onclick=function(){var t=c.settings.version;if(n.state.loggedInUser){var r={type:"BOT",message:{message:"No",status:"SENT",timestamp:Date.now()}};console.log("botSendObjsdfsdfsdf",r),n.botAIMsgsHandler(JSON.stringify(r),c),e.removeChild(a),console.log("dowe hrea ewr",o);var s=document.getElementById("bot_thinking"),i=document.querySelector(".".concat(w.jP));n.sendMsgToAIHandler(o,i,s,!0)}else"V4"==t?window.magicchat_io.renderErrorPopup(["something went wrong!"],void 0,"error"):(console.error("Kindly Login First"),window.magicchat_io.renderErrorPopup(["Kindly Login First"],void 0,"error"))},d.appendChild(p),d.appendChild(u),r.appendChild(d),a.appendChild(r),e.appendChild(a)})),Ut(this,"createUserChatHeader",(function(e){console.log("this is not being used?");var t=localStorage.getItem("tezkit_app_data");if(t)return JSON.parse(t),n.createChatUserHeader()})),Ut(this,"attachCommonSocks",(function(e,t){console.log(t,"sdfsdidentifierssdfsddffsd",t,this);var n=this;console.log("hwere waht isself.state?loggedInUser",n.state.loggedInUser),this.state.socket.emit("join_room",{room:"global_for__"+n.state.loggedInUser[t.name_idn]}),this.state.socket.on("ON_MESSAGE_ARRIVAL_BOT",(function(t){console.log("tezkit_app_datasdfsadfsasdfsdd",e),n.incomingMsgHandler(t,JSON.stringify(e)),console.log("Alarm triggered!"),Ft&&(Pt||(Pt=new Audio(ae)),Pt.play().then((function(){console.log("ðŸ”Š Sound played successfully"),setTimeout((function(){Pt.pause(),Pt.currentTime=0,console.log("ðŸ”‡ Sound stopped after 5 seconds")}),5e3)})).catch((function(e){return console.error("Audio play error:",e)})))})),this.state.socket.on("TYPING_INDICATOR",(function(e){var t=e.frm_user.id;console.log(t,"here we recifed ls from adming",e,Dt(e)),console.log("whaetwerthis?",this),n.updateAdminTypingStatusAtClient(e.typing)})),this.state.socket.on("ON_REPLY_ARRIVAL",(function(t){n.incomingMsgHandler(t,JSON.stringify(e),"REPLY"),Ft&&(Pt||(Pt=new Audio(ae)),Pt.play().then((function(){console.log("ðŸ”Š Sound played successfully"),setTimeout((function(){Pt.pause(),Pt.currentTime=0,console.log("ðŸ”‡ Sound stopped after 5 seconds")}),5e3)})).catch((function(e){return console.error("Audio play error:",e)})))})),this.state.socket.on("ON_MESSAGE_STATUS_CHANGED",(function(e){console.log("any halchal??");var t=JSON.parse(e);t.message.action?("MSG_STATUS_CHANGE_EVENT"===t.message.action&&(console.log("dsafsadfasdfsadf",t.message.ret_id,t.message.status),console.log("here can we see bot_view??"),n.updateDeliveryStatus(t.message.ret_id,t.message.status)),"MSG_UPDATED_EVENT"===t.message.action?n.handleMsgUpdatedEvent(t):"MSG_REACTION_EVENT"===t.message.action?n.handleMsgReactionEvent(t):console.error("Action Not Yet Handled:",t.message.action)):console.error("No action provided!")})),this.state.socket.on("ON_MESSAGE_BULK_STATUS_UPDATE",(function(e){var t=JSON.parse(e);console.log("do we have the msg_ids there???",t,this),t.message.app_name;var o=t.message.status,a=t.message.ret_ids;n.updateMultipleChatStatus({msg_id:a},o)})),this.state.socket.on("ON_FILE_UPLOAD",(function(t){n.incomingMsgHandler(JSON.stringify(t),e,"NEW_FILE_MIXED_V1"),Ft&&(Pt||(Pt=new Audio(ae)),Pt.play().then((function(){console.log("ðŸ”Š Sound played successfully"),setTimeout((function(){Pt.pause(),Pt.currentTime=0,console.log("ðŸ”‡ Sound stopped after 5 seconds")}),5e3)})).catch((function(e){return console.error("Audio play error:",e)})))})),this.state.socket.on("REQUEST_FOR_AGENT_AVAILIBILTY",function(){var e=Ot(At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("this is waht came back",t),t.hasOwnProperty("frm_user_id")&&("JR_ACCEPTED"==t.status?(n.postConnAcceptanceHandler(n,{user_id:t.frm_user_id,user_type:t.user_type,full_name:t.full_name}),console.log("here can we grab the input message and send it to the connection",n,t.frm_user_id),document.getElementById("input-act-wrap").classList.remove(w.$b),console.log("arewr wehereself")):"JR_DISCONNECTED"==t.status&&n.postConnDisconnectionHandler(n,{user_id:t.frm_user_id,user_type:t.user_type,full_name:t.full_name}),Ft&&(Pt||(Pt=new Audio(ae)),Pt.play().then((function(){console.log("ðŸ”Š Sound played successfully"),setTimeout((function(){Pt.pause(),Pt.currentTime=0,console.log("ðŸ”‡ Sound stopped after 5 seconds")}),5e3)})).catch((function(e){return console.error("Audio play error:",e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Ut(this,"sendMsgToAIHandler",(function(e,t,o,a){var r=JSON.parse(localStorage.getItem("tezkit_bot_data")),s=JSON.parse(localStorage.getItem("tezkit_app_data")),i="dev"==(null==="prod"?void 0:"prod".toLowerCase())?"https://magicchat-aiag.hf.space/api/qa":"https://djangoboy-magicchat-pr.hf.space/api/qa",l={question:e,kb_id:r.kb_id};a&&(l.by_pass_human_intent=!0,o&&(o.style.display="block"),t&&(t.style.display="none")),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return console.log("ðŸ“¥ Received response object:",e),e.json()})).then((function(e){console.log("ðŸ“¦ Response JSON data:",e);var a=e.SIGNAL||null;if(console.log("ðŸ”Ž Extracted signal:",a),t&&(t.style.display="block"),a){console.log("âš¡ Signal detected:",a);var r=document.querySelector(".".concat(w.av));if(o&&(o.style.display="none"),2==a||4==a){if(2==a){console.log("ðŸš« Signal 2 â†’ Out of scope message");var i={type:"BOT",message:{message:"I'm sorry. I couldn't find any resource to answer you. Can you please try rephrasing your question?",status:"SENT",timestamp:Date.now()}};self.botAIMsgsHandler(JSON.stringify(i),s,"INCOMING")}if(4==a){console.log("ðŸš« Signal 4 â†’ Inappropriate language");var l={type:"BOT",message:{message:"Inappropriate language detected. Kindly ask question only releted to product.",status:"SENT",timestamp:Date.now()}};self.botAIMsgsHandler(JSON.stringify(l),s,"INCOMING")}}else console.log("ðŸ“Œ Passing signal to addAIPopUp:",a),console.log("dosdhfsfyou avhe2",e),n.addAIPopUp(r,a,e.question)}else n.handleAiAnswer(e,s)})).catch((function(e){console.error("âŒ Error during fetch:",e),t&&(t.style.display="block")}))})),Ut(this,"setupUserInfo",function(){var e=Ot(At().mark((function e(t){var o,a,r,s,i,l,c,d,p,u,h,g,f,m,_,y,v,b,x,E,C,k;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k=function(e){try{var t=localStorage.getItem("theme");if(!t)return;var n=JSON.parse(t).chat_box_theme;null!=n&&n.textColor&&(e.style.color=n.textColor),null!=n&&n.backgroundColor&&(e.style.backgroundColor=n.backgroundColor)}catch(e){console.error("Invalid theme in localStorage",e)}},C=function(){s.textContent="Error Loading User",i.textContent="";var e=document.createElement("div");e.textContent="Invalid User",e.style.color="red",i.appendChild(e);var t=document.createElement("button");t.textContent="ðŸ”„ Reset Settings",t.style.cssText="\n        padding: 10px 20px;\n        background-color: #007BFF;\n        color: white;\n        border: none;\n        border-radius: 5px;\n        font-size: 16px;\n        cursor: pointer;\n        transition: background-color 0.3s ease, transform 0.2s ease;\n    ",t.addEventListener("mouseover",(function(){t.style.backgroundColor="#0056b3"})),t.addEventListener("mouseout",(function(){t.style.backgroundColor="#007BFF"})),t.addEventListener("mousedown",(function(){t.style.transform="scale(0.95)"})),t.addEventListener("mouseup",(function(){t.style.transform="scale(1)"})),t.addEventListener("click",(function(){window.magicchat_io.resetSettingFunc()})),window.magicchat_io.renderErrorPopup(["Kindly Click on Reload Settings to see if it can be fixed"],[t],"error");var n=document.querySelector(".chat_modal__j7hD9nXt3QpLvFz1uY6j7m2"),o=null==n?void 0:n.querySelector("#sendButton");o&&(o.disabled=!0,o.setAttribute("title","âœ– disabled"))},console.log("do you run again on toggle switch?"),o=document.querySelector(".chat_modal__".concat(Z))){e.next=6;break}return e.abrupt("return");case 6:if(a=n.state.loggedInUser,console.log("loggedInUsersdfsdf",a),a){e.next=10;break}return e.abrupt("return");case 10:if(r=o.querySelector(".".concat(w.us)),s=r.querySelector("h3"),i=o.querySelector(".".concat(w.W8)),l=r.querySelector('[class^="profile_logo__"]'),k(r),null!=(c=null==t?void 0:t.settings)&&c.version){e.next=18;break}return e.abrupt("return");case 18:if(d=JSON.parse(localStorage.getItem("tezkit_me")||"{}"),p=null,u=null,h=JSON.parse(localStorage.getItem("global_settings")),g=h.multi_admin.enable,"P2A"==c.app_type?g?(p=(null==d||null===(f=d.tenant_info)||void 0===f?void 0:f.tenant)||(null==d?void 0:d.tenant)||"Searching Agents...",u=null==d||null===(m=d.tenant_info)||void 0===m?void 0:m.image):(p=null!==(_=null==d||null===(y=d.tenant_info)||void 0===y?void 0:y.full_name)&&void 0!==_?_:"Admin",u=null==d||null===(v=d.tenant_info)||void 0===v?void 0:v.image):(p=n.state.activeWindowObj.user_name,u=null==d||null===(b=d.tenant_info)||void 0===b?void 0:b.image),x=function(){var e=Ot(At().mark((function e(){var o,r,i,c,h,f,m,_,y,v,b,x,E,k,S;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sjhdfsdfs",n),o=t.auth_key,r=t.app_name,i=t.tenant_id,c=a.uid,e.next=5,Q(o,r,c,i);case 5:if(e.sent.success){e.next=10;break}return C(),e.abrupt("return");case 10:if(console.log("âœ… User valid, updating UI..."),s.textContent=p,u&&(h=l.querySelector("img"))&&(h.src=u,h.classList.add("profile_img__".concat(null==d||null===(f=d.tenant_info)||void 0===f?void 0:f.id))),!g){e.next=34;break}return e.prev=14,_={method:"GET",redirect:"follow"},console.log("sdfshdfsdfstezkitMef",d),y="https://auth.".concat("magicchat.io","/").concat("prod","/get_support_users_of_tenant?tenant_name=").concat((null==d||null===(m=d.tenant_info)||void 0===m?void 0:m.tenant)||(null==d?void 0:d.tenant)),e.next=20,fetch(y,_);case 20:return v=e.sent,e.next=23,v.json();case 23:b=e.sent,console.log("ðŸ‘¥ Multi-admin result:",b),Array.isArray(b)&&b.length&&(n.state.support_admin_users=b,b.forEach((function(e){console.log("useruseruserdf",e),console.log("asfsfsfdfgfG?2");var t=document.createElement("div");console.log("asfsfsfdfgfG?5"),t.classList=w.$A,console.log("asfsfsfdfgfG?6");var n=document.createElement("img");console.log("asfsfsfdfgfG?3"),n.src=e.image?e.image:"https://cdn-icons-png.flaticon.com/512/847/847969.png",n.alt=e.full_name||"Support User",n.className="profile_img__".concat(e.id),console.log("asfsfsfdfgfG?3"),t.appendChild(n),console.log("asfsfsfdfgfG?4"),l.appendChild(t)}))),(x=l.querySelectorAll(".".concat(w.$A))).length>3&&(x.forEach((function(e,t){e.style.display=t<3?"flex":"none"})),E=l.querySelector(".more_users_badge"),k=x.length-3,E?E.textContent="+".concat(k):((S=document.createElement("div")).className="more_users_badge",S.textContent="+".concat(k),l.appendChild(S))),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(14),console.error("âŒ Error fetching multi-admin users:",e.t0);case 34:case"end":return e.stop()}}),e,null,[[14,31]])})));return function(){return e.apply(this,arguments)}}(),E=function(){if(console.log("asdflfaaaaaaa"),"P2A"===c.app_type){s.textContent=p;var e,t=l.firstChild;if(u&&t){console.log("werewrj even here?d");var o,a=t.querySelector("img");a&&(a.src=u,a.classList.add("profile_img__".concat(null==d||null===(o=d.tenant_info)||void 0===o?void 0:o.id)))}g&&fetch("https://auth.".concat("magicchat.io","/").concat("prod","/get_support_users_of_tenant?tenant_name=").concat(null==d||null===(e=d.tenant_info)||void 0===e?void 0:e.tenant),{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("resultsdfsdfsdf",e),Array.isArray(e)&&e.length&&(n.state.support_admin_users=e,e.forEach((function(e){console.log("useruseruserdf",e),console.log("asfsfsfdfgfG?2");var t=document.createElement("div");console.log("asfsfsfdfgfG?5"),t.classList=w.$A,console.log("asfsfsfdfgfG?6");var n=document.createElement("img");console.log("asfsfsfdfgfG?3"),n.src=e.image?e.image:"https://cdn-icons-png.flaticon.com/512/847/847969.png",n.alt=e.full_name||"Support User",n.className="profile_img__".concat(e.id),console.log("asfsfsfdfgfG?3"),t.appendChild(n),console.log("asfsfsfdfgfG?4"),l.appendChild(t)})));var t=l.querySelectorAll(".".concat(w.$A));if(t.length>3){t.forEach((function(e,t){e.style.display=t<3?"flex":"none"}));var o=l.querySelector(".more_users_badge"),a=t.length-3;if(o)o.textContent="+".concat(a);else{var r=document.createElement("div");r.className="more_users_badge",r.textContent="+".concat(a),l.appendChild(r)}}})).catch((function(e){return console.error(e)})),console.log("wehrloiwerthis",n)}else s.textContent=n.state.activeWindowObj.user_name},"V1"===c.version){e.next=31;break}return e.next=29,x();case 29:e.next=32;break;case 31:E();case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ut(this,"createChatUserHeader",(function(){console.log("[ðŸ§  createChatUserHeader] â–¶ï¸ Creating chat user header...");var e=document.createElement("div");e.className=w.us;var t=document.createElement("div");t.style.display="flex",t.style.alignItems="center";var n=document.createElement("button");n.id="backButton",n.className=w.l3,n.textContent="â† Back";var o=document.createElement("div");o.classList.add(w.wz);var a=document.createElement("div");a.className=w.$A;var r=document.createElement("img");r.src="https://www.shutterstock.com/image-vector/user-profile-icon-vector-avatar-600nw-2247726673.jpg",a.appendChild(r),o.appendChild(a);var s=document.createElement("h3");s.id="userName";var i=document.createElement("span");i.id="statusElement",i.style.marginLeft="10px";var l=document.createElement("div");l.className="user_status_cir",l.style.width="15px",l.style.height="15px",l.style.borderRadius="50%";var c=document.createElement("div");c.className="user_status_text",i.appendChild(l),i.appendChild(c);var d=document.createElement("span");return d.id="typingStatusElm",t.appendChild(n),t.appendChild(o),t.appendChild(s),t.appendChild(i),t.appendChild(d),e.appendChild(t),console.log("[ðŸ§  createChatUserHeader] âœ… Header created successfully"),e})),Ut(this,"createMiddleCBWrappers",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading recent messages";console.log("here is the middle wrapper?");var t=localStorage.getItem("tezkit_app_data");if(console.log(status,"initialized1111111",t),t){var o=JSON.parse(t);if(console.log("tezkit_app_pdatasdf  do we have na app_type",o.settings.app_type),"P2A"==o.settings.app_type){console.log("arewrwerwer?",n.state);var a=document.createElement("div");a.className=w.av;var s=document.createElement("div");s.className=w.AL;var i=document.createElement("div"),l=document.createElement("div");l.setAttribute("id","bot_thinking"),l.className=w.UI,l.innerHTML='Thinking<span class="'.concat(r.dot," ").concat(r.dot1,'">.</span>\n  <span class="').concat(r.dot," ").concat(r.dot2,'">.</span>\n  <span class="').concat(r.dot," ").concat(r.dot3,'">.</span>'),l.style.display="none",i.className=w._3,s.appendChild(i),a.appendChild(s);var c=document.createElement("div");c.className=w.u9,console.log("dssdarewhere here?");var d=document.createElement("div");d.classList=w.GH;var p=document.createElement("div");p.classList.add(w.V5);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading",t=document.createElement("div");return t.classList.add(S.iE),t.innerHTML='\n    <div class="'.concat(S.M1,'"></div>\n    <div class="').concat(S.Bs,'">\n      <b class="').concat(S._U,'">').concat(e,'</b><span class="').concat(S.Om,'">.</span><span class="').concat(S.Om,'">.</span><span class="').concat(S.Om,'">.</span>\n    </div>\n  '),t}(e);u.style.transform="scale(1)",p.setAttribute("id","init_content_loader"),p.appendChild(u),d.appendChild(p),c.appendChild(d);var h=document.createElement("div");h.className=w.ZX,h.id="chat_announcement",h.style.display="none",d.appendChild(h);var g=document.createElement("div");g.className=w.W8,g.id="chatBody",d.appendChild(g);var f=document.createElement("button");f.id="scrollWrap",f.innerHTML='<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">Add commentMore actions\n<path d="M8.31373 13.799L13.9706 8.14215C14.1709 7.9418 14.4066 7.84187 14.6777 7.84234C14.9487 7.84281 15.1845 7.94275 15.3848 8.14215C15.5851 8.34155 15.6851 8.57726 15.6846 8.84926C15.6841 9.12126 15.5842 9.35696 15.3848 9.55636L9.02084 15.9203C8.82049 16.1207 8.58455 16.2208 8.31302 16.2208C8.0415 16.2208 7.80603 16.1207 7.60662 15.9203L1.24266 9.55636C1.04232 9.35602 0.942144 9.12008 0.942144 8.84855C0.942144 8.57702 1.04232 8.34155 1.24266 8.14215C1.44301 7.94275 1.67871 7.84281 1.94977 7.84234C2.22083 7.84187 2.45653 7.9418 2.65688 8.14215L8.31373 13.799ZM8.31373 6.72794L13.9706 1.07108C14.1709 0.870736 14.4066 0.770798 14.6777 0.77127C14.9487 0.771741 15.1845 0.871679 15.3848 1.07108C15.5851 1.27049 15.6851 1.50619 15.6846 1.77819C15.6841 2.05019 15.5842 2.28589 15.3848 2.4853L9.02084 8.84926C8.82049 9.0496 8.58455 9.14978 8.31302 9.14978C8.04149 9.14978 7.80603 9.0496 7.60662 8.84926L1.24266 2.4853C1.04232 2.28495 0.942144 2.04901 0.942144 1.77748C0.942144 1.50595 1.04232 1.27049 1.24266 1.07108C1.44301 0.871679 1.67871 0.771741 1.94977 0.77127C2.22083 0.770799 2.45653 0.870736 2.65688 1.07108L8.31373 6.72794Z" fill="white"/>\n</svg>\n',c.append(f);var m=document.createElement("div");m.className=w.tz,m.id="typingStatusWrapper",m.style.display="none";var _=document.createElement("div");_.className=w.AP;var y=document.createElement("span");y.id="typingStatusText",y.className=w.Lm,_.appendChild(y),m.appendChild(_),c.appendChild(m);var v=document.createElement("div");v.className=w.bw;var b=document.createElement("button");b.className="togglerBtn",b.textContent="Toggler";var x=document.createElement("div");x.className=w.XB;var E=document.createElement("div");return E.className=w.lj,x.appendChild(E),console.log("botHistoryfdsfsf",x),x.appendChild(l),s.appendChild(x),{chatBodyUserWrapper:c,chatBodyBotWrapper:a,chatFooter1:v}}if("P2P"==o.settings.app_type){console.log("arewrwerwer?",n.state);var C=document.createElement("div");C.className=w.u9;var k=document.createElement("div");k.className=w.W8,k.id="chatBody",C.appendChild(k);var T=document.createElement("div");return T.className=w.bw,{chatBodyUserWrapper:C,undefined:void 0,chatFooter1:T}}}})),Ut(this,"initializeMessageLoading",function(){var e=Ot(At().mark((function e(t,o){var a,r,s,i,l,c,d,p,u,h,g,f,m,_,y,v,b,x,E,C,k,S,T,I,L,A,N,O,D,B,U,j,M,P,R,F,q,z,G,H,J,W,V,K,Z,Y,X,Q,$,ee,te;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee=function(){console.log("did rewrnre?handleShowButton"),X()||Q()},a=n,r=!1,s=1,i=0,l=!1,c=1,console.log("TEZKIT_DEBUG_".concat(c++,": Do we have this?"),n.state.activeWindowObj.id),d="V1"!=t.settings.version?n.state.activeWindowObj.uid:n.state.activeWindowObj.id,p=JSON.parse(localStorage.getItem("global_settings")),u=p.multi_admin.enable,h=1==u?1:0,g=t.tenant_id,f=document.querySelector('[class^="chat-body-userwrap-content__"]'),m=f.getBoundingClientRect().height,console.log("Exact height:",m/50,m/50*1),_=m/50*1,y=Math.floor(_),v=y||10,b="P2A"===t.settings.app_type?"https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(a.state.loggedInUser.app_name,"&app_type=P2A&user_type=CLIENT&multi_admin=").concat(h,"&limit=").concat(v,"&tenant_name=").concat(g,"&page="):"https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(a.state.loggedInUser.app_name,"&app_type=P2P&other_user_id=").concat(d,"&user_type=CLIENT&multi_admin=").concat(h,"&tenant_name=").concat(g,"&page="),x=document.getElementById("chatBody"),E=x.parentElement,C=window.getComputedStyle(E),k=C.overflowY,S=("auto"===k||"scroll"===k)&&E.scrollHeight>E.clientHeight,console.log("Can scroll?",S),console.log("Is isScrollable1?",E.scrollHeight,E.clientHeight),console.log("TEZKIT_DEBUG_".concat(c++,": Scrollable container:"),E),console.log("TEZKIT_DEBUG_".concat(c++,": Scrollable container class:"),null==E?void 0:E.className),T=function(){var e=Ot(At().mark((function e(n){var o,r;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("TEZKIT_DEBUG_".concat(c++,": Fetching messages from API"),n),(o=localStorage.getItem("tezkit_token"))||"V1"!==t.settings.version){e.next=5;break}throw new Error("Token is missing");case 5:if(r=null,"V1"!==t.settings.version){e.next=12;break}return e.next=9,fetch(n,{method:"GET",headers:{Authorization:o,Accept:"application/json"}});case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,fetch("".concat(n,"&uid=").concat(a.state.loggedInUser.uid,"&other_user_id=").concat(a.state.activeWindowObj.uid),{method:"GET",headers:{Accept:"application/json","x-api-key":t.auth_key}});case 14:r=e.sent;case 15:if(r.ok){e.next=17;break}throw new Error("Failed to fetch data");case 17:return e.next=19,r.json();case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(0),console.error("TEZKIT_DEBUG_".concat(c++,": Error fetching messages:"),e.t0),e.t0;case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),(I=document.getElementById("loading-message"))||(console.log("TEZKIT_DEBUG_".concat(c++,": Creating loading element")),(I=document.createElement("div")).id="loading-message",I.textContent="Loading more..",I.style.display="none",I.style.padding="10px",I.style.textAlign="center",I.style.color="#666",x.prepend(I)),L=null,A=function(){var e=Ot(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("TEZKIT_DEBUG_".concat(c++,": Load more messages triggered")),l){e.next=4;break}return console.log("TEZKIT_DEBUG_".concat(c++,": Initial load not completed, skipping")),e.abrupt("return");case 4:if(!(r||i>0&&s>=i)){e.next=8;break}return console.log("TEZKIT_DEBUG_".concat(c++,": Loading skipped - isLoading: ").concat(r,", currentPage: ").concat(s,", totalPages: ").concat(i)),I&&(I.style.display="none",N.unobserve(I)),e.abrupt("return");case 8:L&&clearTimeout(L),L=setTimeout(Ot(At().mark((function e(){var n,l,p,u,h,g,f,m,_,y,v,x,w,C,k,S;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,I.style.display="block",I.classList.add("active"),console.log("TEZKIT_DEBUG_".concat(c++,": Starting to load more messages")),e.prev=4,n="".concat(b).concat(s+1),console.log("TEZKIT_DEBUG_".concat(c++,": Loading page ").concat(s+1," from"),n),e.next=9,T(n);case 9:if(!(l=e.sent)){e.next=42;break}if(i=l.pagination.total_pages||i,s=l.pagination.current_page||s+1,console.log("TEZKIT_DEBUG_".concat(c++,": Pagination updated - currentPage: ").concat(s,", totalPages: ").concat(i)),p=[],u=JSON.parse(localStorage.getItem("global_settings")),h=u.multi_admin.enable,console.log("aseowritn4h4erew?"),!h){e.next=23;break}console.log("TEZKIT_DEBUG_".concat(c++,": Multi-admin mode processing")),null!==(g=l.chats)&&void 0!==g&&g[t.app_name]&&(f=l.chats[t.app_name],m=[],Object.keys(f).forEach((function(e){var t,n=(null===(t=f[e])||void 0===t?void 0:t.msgs)||[];m=m.concat(n)})),m.sort((function(e,t){return e.message.timestamp-t.message.timestamp})),console.log("combinedMsgssdf",m),_=p=m,y=E.scrollHeight,v=E.scrollTop,console.log("TEZKIT_DEBUG_".concat(c++,": Multi-admin messages to insert: ").concat(_.length,", prevScrollHeight: ").concat(y,", prevScrollTop: ").concat(v)),console.log("reversedMsgssdf",_),a.insertBulkChatsAfterElement(_,I),a.informPeerSysAboutBULKMsgsStatus(o,_,"READ",a.state.loggedInUser.app_name,a.state.loggedInUser.tenant_info.id),setTimeout((function(){var e=E.scrollHeight-y,t=v+e;console.log("TEZKIT_DEBUG_".concat(c++,": Setting scrollTop to ").concat(t," (prev: ").concat(v,", diff: ").concat(e,")")),E.scrollTop=t,setTimeout((function(){Math.abs(E.scrollTop-t)>5&&(console.log("TEZKIT_DEBUG_".concat(c++,": Scroll position not set correctly, forcing...")),E.scrollTop=t)}),50)}),100)),e.next=42;break;case 23:if(console.log("TEZKIT_DEBUG_".concat(c++,": P2P mode processing")),null===(x=l.chats)||void 0===x||!x[t.app_name]){e.next=42;break}if(p=l.chats[t.app_name]["user__".concat(d)],console.log("TEZKIT_DEBUG_".concat(c++,": Messages found:"),p),null===(w=p)||void 0===w||!w.msgs){e.next=38;break}C=p.msgs,k=E.scrollHeight,S=E.scrollTop,console.log("TEZKIT_DEBUG_".concat(c++,": P2P messages to insert: ").concat(C.length,", prevScrollHeight: ").concat(k,", prevScrollTop: ").concat(S)),a.insertBulkChatsAfterElement(C,I),console.log("sfsdfddddddddddd?"),a.informPeerSysAboutBULKMsgsStatus(o,C,"READ",a.state.loggedInUser.app_name,a.state.loggedInUser.tenant_info.id),setTimeout((function(){var e=E.scrollHeight-k,t=S+e;console.log("TEZKIT_DEBUG_".concat(c++,": Setting P2P scrollTop to ").concat(t," (prev: ").concat(S,", diff: ").concat(e,")")),E.scrollTop=t,setTimeout((function(){Math.abs(E.scrollTop-t)>5&&(console.log("TEZKIT_DEBUG_".concat(c++,": P2P scroll position not set correctly, forcing...")),E.scrollTop=t)}),50)}),100),e.next=42;break;case 38:return console.log("TEZKIT_DEBUG_".concat(c++,": No messages in P2P mode")),I.style.display="none",N.unobserve(I),e.abrupt("return");case 42:return e.prev=42,r=!1,I.classList.remove("active"),console.log("TEZKIT_DEBUG_".concat(c++,": Load more completed, isLoading: ").concat(r)),s<i?(console.log("TEZKIT_DEBUG_".concat(c++,": More pages available, re-observing loading element")),setTimeout((function(){N.observe(I)}),100)):(console.log("TEZKIT_DEBUG_".concat(c++,": No more pages, hiding loading element")),I.style.display="none",N.unobserve(I)),e.finish(42);case 48:case"end":return e.stop()}}),e,null,[[4,,42,48]])}))),150);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=new IntersectionObserver((function(e){console.log("TEZKIT_DEBUG_".concat(c++,": IntersectionObserver triggered"),e[0].isIntersecting),e[0].isIntersecting&&!r&&l&&(console.log("TEZKIT_DEBUG_".concat(c++,": Loading element is visible, loading more messages...")),A())}),{root:E,threshold:.1}),e.prev=35,O="".concat(b).concat(s),console.log("TEZKIT_DEBUG_".concat(c++,": Loading initial messages from"),O),e.next=40,T(O);case 40:if(D=e.sent,B=[],console.log("TEZKIT_DEBUG_".concat(c++,": Total messages:"),D.pagination.total_count),U=D.pagination,i=U.total_pages||1,s=U.current_page||1,console.log("TEZKIT_DEBUG_".concat(c++,": Pagination set - currentPage: ").concat(s,", totalPages: ").concat(i)),0==D.pagination.total_count)console.log("TEZKIT_DEBUG_".concat(c++,": No messages found")),I.style.display="none",x.querySelector("#no-messages-placeholder")||((j=document.createElement("div")).id="no-messages-placeholder",j.textContent="No messages yet. Start a conversation!",j.classList=w.tK,document.getElementById("init_content_loader").style.display="none",x.appendChild(j)),l=!0,console.log("TEZKIT_DEBUG_".concat(c++,": No messages flow completed"));else if(console.log("apiUrlBasesfgherfghfgh"),M=JSON.parse(localStorage.getItem("global_settings")),P=M.multi_admin.enable,console.log("TEZKIT_DEBUG_".concat(c++,": Multi-admin mode:"),P),P?(console.log("TEZKIT_DEBUG_".concat(c++,": Processing multi-admin messages")),null!=D&&null!==(R=D.chats)&&void 0!==R&&R[t.app_name]&&(F=D.chats[t.app_name],q=[],Object.keys(F).forEach((function(e){var t,n=(null===(t=F[e])||void 0===t?void 0:t.msgs)||[];q=q.concat(n)})),console.log("combinedMessagesesfsf",JSON.stringify(q)),q.sort((function(e,t){return e.message.timestamp-t.message.timestamp})),console.log("combinedMessages sorted",q),B=q,console.log("TEZKIT_DEBUG_".concat(c++,": Multi-admin messages loaded:"),B.length))):(console.log("TEZKIT_DEBUG_".concat(c++,": Processing P2P messages")),null!=D&&null!==(z=D.chats)&&void 0!==z&&z[t.app_name]&&(B=(null===(G=D.chats[t.app_name]["user__".concat(d)])||void 0===G?void 0:G.msgs)||[],console.log("TEZKIT_DEBUG_".concat(c++,": P2P messages loaded:"),B.length))),B.length){for(console.log("TEZKIT_DEBUG_".concat(c++,": Processing ").concat(B.length," messages")),H="V1"===t.settings.version?"id":"uid",J=B.filter((function(e){var t=e.message,o=t.status,a=t.to_user,r=t.frm_user;return"READ"!==o&&(null==a?void 0:a.id)===n.state.loggedInUser[H]&&(null==r?void 0:r.id)===String(d)})),a.state.unread_messages=J,console.log("TEZKIT_DEBUG_".concat(c++,": Unread messages filtered:"),J.length),"user_chat"===a.state.viewType&&(console.log("TEZKIT_DEBUG_".concat(c++,": Informing peer about bulk messages status"),B),a.informPeerSysAboutBULKMsgsStatus(o,B,"READ",a.state.loggedInUser.app_name,a.state.loggedInUser.tenant_info.id)),W=Array.from(x.children),V=0,K=W;V<K.length;V++)"loading-message"!==(Z=K[V]).id&&x.removeChild(Z);console.log("TEZKIT_DEBUG_".concat(c++,": Chat body cleared except loading element")),console.log("TEZKIT_DEBUG_".concat(c++,": Inserting initial messages into chat")),a.insertBulkChatsAfterElement(B,I),document.getElementById("init_content_loader").style.display="none",setTimeout((function(){var e=E.scrollHeight,t=E.clientHeight;console.log("TEZKIT_DEBUG_".concat(c++,": Scroll check - scrollHeight: ").concat(e,", clientHeight: ").concat(t,", isScrollable: ").concat(e>t)),e>t?(E.scrollTop=e,console.log("TEZKIT_DEBUG_".concat(c++,": Scrolled to bottom - scrollTop: ").concat(E.scrollTop))):console.log("TEZKIT_DEBUG_".concat(c++,": Container not scrollable or no need to scroll"))}),100),setTimeout((function(){l=!0,console.log("TEZKIT_DEBUG_".concat(c++,": Initial load completed, hasInitialLoadCompleted: ").concat(l));var e=E.scrollHeight>E.clientHeight+50;i>1&&s<i&&e?(I.style.display="block",N.observe(I),console.log("TEZKIT_DEBUG_".concat(c++,": Loader enabled - user can scroll up to load more (currentPage: ").concat(s,", totalPages: ").concat(i,")"))):(I.style.display="none",e?console.log("TEZKIT_DEBUG_".concat(c++,": Loader hidden - no more pages")):console.log("TEZKIT_DEBUG_".concat(c++,": Loader hidden - container not scrollable or not enough content")))}),200)}else console.log("TEZKIT_DEBUG_".concat(c++,": No messages to display")),l=!0;e.next=55;break;case 50:e.prev=50,e.t0=e.catch(35),console.error("TEZKIT_DEBUG_".concat(c++,": Initial message load failed:"),e.t0),I.style.display="none",l=!0;case 55:Y=document.getElementById("scrollWrap"),console.log("TEZKIT_DEBUG_".concat(c++,": Scroll up page element:"),Y),Y.classList.add(w.di,w.R),console.log("TEZKIT_DEBUG_".concat(c++,": Scroll up page classes added")),X=function(){return E.scrollHeight-E.scrollTop-E.clientHeight<10},Q=function(){return Y.classList.remove(w.R)},$=function(){return Y.classList.add(w.R)},new MutationObserver((function(e){if(console.log("TEZKIT_DEBUG_".concat(c++,": MutationObserver triggered")),e.some((function(e){return e.addedNodes.length>0}))){console.log("TEZKIT_DEBUG_".concat(c++,": New nodes added and user not at bottom"));var t=kt(e).reverse().find((function(e){return e.addedNodes.length>0})),n=t.addedNodes[t.addedNodes.length-1];if(console.log("TEZKIT_DEBUG_".concat(c++,": Last message node:"),n),n.className.includes("other-right")){var o=kt(n.querySelectorAll("div")).find((function(e){return e.className.includes("msgDiv")}));console.log("TEZKIT_DEBUG_".concat(c++,": Message div found:"),o),o&&(o.classList.add(w.bs),console.log("TEZKIT_DEBUG_".concat(c++,": Slide fade animation addedfdfg")))}if(/mine_message__/.test(n.className)||/me-left__/.test(n.className)){var a=kt(n.querySelectorAll("div")).find((function(e){return e.className.includes("msgDiv")}));console.log("TEZKIT_DEBUG_".concat(c++,": FOUND my message msgDiv:"),a),a&&(a.classList.add(w.Vd),console.log("TEZKIT_DEBUG_".concat(c++,": My message RIGHT slide animation added")))}var r=window.getComputedStyle(Y).opacity;console.log("TEZKIT_DEBUG_".concat(c++,": Scroll button opacity:"),r),0==r&&(E.scrollTo({top:E.scrollHeight,behavior:"smooth"}),console.log("TEZKIT_DEBUG_".concat(c++,": Auto-scrolled to bottom")))}})).observe(x,{childList:!0,subtree:!0}),Y.addEventListener("click",(function(){console.log("TEZKIT_DEBUG_".concat(c++,": Scroll up button clicked")),E.scrollTo({top:E.scrollHeight,behavior:"smooth"});var e=function(){X()&&($(),E.removeEventListener("scroll",e),console.log("TEZKIT_DEBUG_".concat(c++,": Scroll check completed, button hidden")))};E.addEventListener("scroll",e)})),te=E.scrollTop,E.addEventListener("scroll",(function(){var e=E.scrollTop;console.log("TEZKIT_DEBUG_".concat(c++,": Scroll event - current: ").concat(e,", lastScrollTop: ").concat(te)),te-e>=10&&(console.log("TEZKIT_DEBUG_".concat(c++,": Scrolled up â‰¥10px â†’ show button")),ee()),X()&&(console.log("TEZKIT_DEBUG_".concat(c++,": User at bottom â†’ hide button")),$()),te=e})),console.log("TEZKIT_DEBUG_".concat(c++,": Chat body initialization complete:"),x);case 68:case"end":return e.stop()}}),e,null,[[35,50]])})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"initiateConnectAgentReq",(function(e){var t=new Headers;t.append("Content-Type","application/json"),console.log("terwhitowersdfewr",n.state.loggedInUser.tenant_info.tenant);var o={method:"POST",headers:t,body:JSON.stringify({tenant_name:n.state.loggedInUser.tenant_info.tenant||n.state.loggedInUser.tenant,client_id:n.state.loggedInUser.hasOwnProperty("uid")?n.state.loggedInUser.uid:n.state.loggedInUser.id}),redirect:"follow"};fetch("https://auth.".concat("magicchat.io","/").concat("prod","/fetch_connected_support_id_info_or_null"),o).then((function(e){return e.json()})).then((function(t){if(console.log("resulthere",t.is_connected,n.state),t.is_connected)console.log(n,"theire here",t.support_info.full_name,t.support_info.full_name,t.support_info.id),n.postConnAcceptanceHandler(n,{user_id:t.support_info.id,user_type:t.support_info.type,full_name:t.support_info.full_name}),n.showMAannouncementMessages("You are already connected with Agent",{duration:5e3,type:"success"}),document.querySelector("#chat_announcement").style.display="block";else{var o;o="V1"==e.settings.version?{room:"global_for__"+n.state.loggedInUser.tenant_info.id,tenant_id:n.state.loggedInUser.tenant_info.id,frm_id:n.state.loggedInUser.id,version:e.settings.version,tenant_name:n.state.loggedInUser.tenant_info.tenant,status:"PENDING",app_name:e.app_name,message:"something2"}:{room:"global_for__"+n.state.loggedInUser.tenant_info.id,tenant_id:n.state.loggedInUser.tenant_info.id,frm_id:n.state.loggedInUser.uid,version:e.settings.version,tenant_name:n.state.loggedInUser.tenant_info.tenant||n.state.loggedInUser.tenant,status:"PENDING",app_name:e.app_name,message:"something2"},n.state.socket.emit("REQUEST_FOR_AGENT_AVAILIBILTY",o),n.showMAannouncementMessages("Waiting for Next available Agent to join, will connect you shortly",{persistent:!0,type:"connecting"}),document.querySelector("#chat_announcement")}})).catch((function(e){return console.error(e)}))})),Ut(this,"updateAdminLSStatusAtClient",(function(e){var t=document.querySelector("#statusElement > .user_status_cir");console.log("gota trigger ls",t,e,Dt(e));var n=JSON.parse(localStorage.getItem("tezkit_app_data"));if(t&&n.feature.live_status.enable)if(t.style.width="16px",t.style.height="16px",t.style.borderRadius="50%","ONLINE"===e&&(t.textContent="",t.style.background="green"),"AWAY"===e)t.textContent="",t.style.background="yellow";else if("OFFLINE"===e){t.textContent="",t.style.background="#a99bbe";var o="chatModal__"+Z;document.getElementById(o).querySelector(".chat_notice").textContent=""}})),Ut(this,"renderChatModal",function(){var e=Ot(At().mark((function e(t,o,a,r,s){var i,l,c,d,p,u,h,g,f,m,_,y,v=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=v.length>5&&void 0!==v[5]&&v[5],c=JSON.parse(localStorage.getItem("global_settings")),d=c.multi_admin.enable,console.log(l,"ast it breaks is logout_modesbreandh homwha7syfsdf?? multi_admin",n.state.loggedInUser,d),console.log("whatewtirdgdviewType",n.state.viewType),p=document.querySelector(".chat_screen_top_wrapper"),console.log("cstwsdwsf",p),(u=document.createElement("div")).textContent="loading chat window ......",p&&p.appendChild(u),null===(i=t.feature)||void 0===i||null===(i=i.live_status)||void 0===i||i.enable,h=n.createChatContainer(t),g=n.createChatElements(s,l),f=g.chatWrapper,m=g.chatBodyUserWrapper,_=g.chatBodyBotWrapper,y=g.chatFooter1,u.remove(),n.assembleChatUI(h,r,f,m,_,y,l),console.log("did you fire?2"),e.next=18,n.loadInputBox(t,m,_,o,l);case 18:return console.log("weuiyroiwertewr",l),l||"P2P"==t.settings.app_type&&n.openChatModal(),console.log("wqehjroisadfnoerheref?"),n.openChatModal(),console.log("FINDME",d,"P2A"==t.settings.app_type,!l,n.state.viewType),e.next=25,n.multiAdminConnHandler(d,t);case 25:case"end":return e.stop()}}),e)})));return function(t,n,o,a,r){return e.apply(this,arguments)}}()),Ut(this,"showAdminOnlineStatusBanner",(function(e){var t=document.querySelector("#chat_announcement");if(t){t._hideTimer&&(clearTimeout(t._hideTimer),t._hideTimer=null),t.ontransitionend=null;var n=JSON.parse(localStorage.getItem("tezkit_bot_data")),o={ONLINE:{bg:"#e8f5e9",color:"#1b5e20",border:"1px solid #a5d6a7",text:n.WELCOME_MSG},OFFLINE:{bg:"#ffebee",color:"#b71c1c",border:"1px solid #ef9a9a",text:n.OFFLINE_MSG}},a=o[e]||o.OFFLINE;t.innerHTML='\n    <span style="font-weight:600;">'.concat(a.text,"</span>\n  "),Object.assign(t.style,{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",backgroundColor:a.bg,border:a.border,color:a.color,borderRadius:"6px",position:"sticky",top:"0px",left:"0px",right:"0px",opacity:"0",transform:"translateY(-10px)",transition:"all 0.3s ease",zIndex:99}),requestAnimationFrame((function(){requestAnimationFrame((function(){t.style.opacity="1",t.style.transform="translateY(0)"}))})),t._hideTimer=setTimeout((function(){t.style.opacity="0",t.style.transform="translateY(-10px)",t.ontransitionend=function(){t.style.display="none"}}),8e3)}})),Ut(this,"processAdminLiveStatus",function(){var e=Ot(At().mark((function e(t,o){var a,r,s,i,l;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.isFeatureEnabled(t.feature,"live_status","client_pull_admin"),r=JSON.parse(localStorage.getItem("global_settings")),s=r.multi_admin.enable,!a||s){e.next=15;break}if("P2A"!=t.settings.app_type){e.next=10;break}return i={tenantName:t.tenant_id,otherUserId:o,appName:t.app_name,version:t.settings.version,current_apptype:t.settings.app_type,user_type:"tenant_type",api_key:t.auth_key},e.next=8,n.setAdminLSData(i,(function(e){return console.log("oahweorwerresult1",e[0].live_status),n.handleAdminStatusUpdate(e,t),"ONLINE"===e[0].live_status?n.showAdminOnlineStatusBanner("ONLINE"):n.showAdminOnlineStatusBanner("OFFLINE"),e}));case 8:e.next=15;break;case 10:return console.log("HISUHFSDFSDFSD"),l={tenantName:t.tenant_id,otherUserId:o,appName:t.app_name,version:t.settings.version,current_apptype:t.settings.app_type,user_type:"user_type",api_key:t.auth_key},console.log("whenw wantwehti called!"),e.next=15,n.setAdminLSData(l,(function(e){console.log("oahweorwerresult",e),n.handleAdminStatusUpdate(e,t)}));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"handleAdminStatusUpdate",(function(e,t){console.log("did you fire?1");var o=e[0];console.log("ewrwerwerresultd",n.state.loggedInUser),null!=o&&o.hasOwnProperty("live_status")&&(n.updateAdminLSStatusAtClient(o.live_status),n.state.activeWindowObj.live_status=o.live_status)})),Ut(this,"shouldToggleViewType",(function(e){return"P2A"===e.settings.app_type&&n.isFeatureEnabled(e.feature,"live_status","client_pull_admin")})),Ut(this,"createChatContainer",(function(e){var t;return console.log("asdjrwop;ierje4wqrwer?"),"P2A"===e.settings.app_type?(t=document.createElement("div")).className="chat_screen_top_wrapper":t=document.querySelector(".chat_screen_top_wrapper"),t})),Ut(this,"createChatElements",(function(e,t){return t?(console.log("going through it?"),Lt({chatWrapper:n.createChatHeaderLogout(e)},n.createMiddleCBWrappers())):Lt({chatWrapper:n.createUserChatHeader(e)},n.createMiddleCBWrappers())})),Ut(this,"assembleChatUI",(function(e,t,o,a,s,i,l){console.log("this.state?app_type",n.state.loggedInUser),n.state.loggedInUser&&"P2P"==n.state.loggedInUser.apptyp&&(n.state.viewType="user_chat");var c=document.createElement("div");c.id="poweredBy",c.classList.add(w.UK,r.curve);var d=document.createElement("div");d.className=w.aJ;var p=document.createElement("div");p.className=w.u1,p.innerHTML='\n  <svg xmlns="http://www.w3.org/2000/svg" \n       width="16" height="16" \n       viewBox="0 0 24 24" \n       fill="currentColor">\n    <path d="M13 2L3 14h7v8l10-12h-7V2z"/>\n  </svg>\n';var u=document.createElement("div");u.className=w.bV;var h=document.createElement("p");h.textContent="Powered by ";var g=document.createElement("a");g.href="https://magicchat.io",g.textContent="Magic Chat",g.target="_blank",h.appendChild(g),u.appendChild(h),d.appendChild(p),d.appendChild(u);var f=document.createElement("button");f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">\n  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>\n</svg>',f.id="settingsButton",f.classList.add(w.Io),d.appendChild(f),f.addEventListener("click",(function(){console.log("Document clicked!");var e=document.querySelector("#full_cover_div");e.style.display="flex";var t=document.createElement("div");t.classList.add(w.C2);var o=document.createElement("div");o.classList.add(w.tc),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute-fill" viewBox="0 0 16 16">\n  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06m7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0"/>\n</svg>';var a=document.createElement("button");a.textContent="Disable Sound",a.classList.add(w.C),a.addEventListener("click",(function(){Ft=!1,Pt&&(Pt.pause(),Pt.currentTime=0),console.log("Notifications disabled")})),t.appendChild(o),t.appendChild(a),n.showCover(e,t,{showClose:!0})})),document.addEventListener("click",(function(){Rt||(Pt=new Audio(ae)).play().then((function(){console.log("Audio unlocked!"),Rt=!0,Pt.pause(),Pt.currentTime=0})).catch((function(e){return console.error(e)}))}),{once:!0}),c.appendChild(d);var m=document.createElement("div");m.className=w.fP;var _=document.createElement("div");_.className=w.DW;var y=JSON.parse(localStorage.getItem("tezkit_app_data")),v=n.createToggleOrCloseButton(y,Z,l);v&&e.appendChild(v);var b=n.createChatNotice();if(e.appendChild(b),l){e.appendChild(_),t.appendChild(e),console.log("werhowqjhtoehqrbit",n.state.viewType);var x=n.createChatBotHeader();_.appendChild(x),s&&_.appendChild(s)}else{e.appendChild(m),e.appendChild(_),t.appendChild(e),console.log("werhowqjhtoehqrbit",n.state.viewType,y.settings.app_type),"P2A"==y.settings.app_type?"user_chat"==n.state.viewType?(_.style.display="none",m.style.display="flex",console.log("hey its first click",n.state.viewType)):(m.style.display="none",_.style.display="flex",console.log("hey its first click",n.state.viewType),JSON.parse(localStorage.getItem("live_talk_seen"))):(m.style.display="flex",_.style.display="none"),m.append(o,a);var E=n.createChatBotHeader();_.appendChild(E),s&&_.appendChild(s),a.appendChild(i)}t.appendChild(c)})),Ut(this,"handleNewIncomingUser",(function(e){var t=JSON.parse(localStorage.getItem("tezkit_app_data"));console.log(n,"did it happensdfsdafsdf",t.tenant_info.id)})),Ut(this,"loadInputBox",function(){var e=Ot(At().mark((function e(t,o,a,r,s){var i;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.shouldHandleBotContent(t)){e.next=6;break}if(i=localStorage.getItem("tezkit_bot_data")){e.next=4;break}return e.abrupt("return");case 4:console.log(a.style.display,"arew wheresdfsdf",o.style.display),n.processBotData(i,o,a);case 6:"user_chat"==n.state.viewType?(console.log("arew never here?sdffgsadf"),n.attachInputAction("tenant_info",r,s)):n.attachInputAction("active_window",r,s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o,a,r){return e.apply(this,arguments)}}()),Ut(this,"shouldHandleBotContent",(function(e){return e.enabled_bot_content&&"P2A"===e.settings.app_type})),Ut(this,"processBotData",(function(e,t,n){var o=JSON.parse(e);console.log("parsedData.FAQ",JSON.stringify(o.FAQ)),null!=o&&o.FAQ&&G(o.FAQ)})),Ut(this,"attachInputAction",(function(e,t,o){if(o)console.log("can we load some input box there"),n.attachInputActionRowLogout(n.state.globalMsgsBucket,t,n);else{var a=String("tenant_info"===e?n.state.loggedInUser.tenant_info.id:n.state.activeWindowObj.id);n.attachInputActionRow(n.state.globalMsgsBucket,$,{id:a},n.state.loggedInUser,t,n)}})),Ut(this,"initializeChatComponents",function(){var e=Ot(At().mark((function e(t,o,a){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.initializeMessageLoading(t,o),n.setupUserInfo(t)]);case 2:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),Ut(this,"getMessageElementFromChatBox",(function(e){console.log("msg_idsdfsfsdfsdmsg_id",e);var t=document.getElementById(e);if(t)return t})),Ut(this,"updateDeliveryStatus",(function(e,t){var n=document.getElementById(e);if(n){var o=n.querySelector(".status");"DELIVERED"==t?(o.textContent="âœ“âœ“",console.log("DELIVERED mess",t)):"READ"===t&&(o.textContent="âœ“âœ“",o.style.color="#0074ff",console.log("READ mess",t))}})),Ut(this,"handleMsgUpdatedEvent",(function(e){var t=e.message,o=t.ret_id,a=t.message;console.log("whatis it now?",e.message);var r=document.getElementById("chatBody");console.log(n,"wwhat is ths msg_id when broken1",o);var s=n.getMessageElementFromChatBox(o,r);if(s){console.log("messageElementsdfsdf",s,a);var i=s.querySelector(".".concat(w.C$," > div"));console.log("whateriewrmessageText",i.textContent),i.textContent&&(i.textContent=a)}})),Ut(this,"initializeSocketConnection",(function(e,t,o){console.log("miinvoked?");var a=n;if(e){var r="https:"===window.location.protocol?"wss":"ws",s="".concat(r,"://").concat("admin.magicchat.io");console.log("ws_server_ip is sdfhsdfsfere",s,t,e);var i=e.hasOwnProperty("uid")?e.uid:e.id;console.log("wehrwerwerwert_tenat",e);var l={multi_admin:JSON.parse(localStorage.getItem("global_settings")).multi_admin.enable,user_id:i,x_api_key:t.auth_key,type:"CLIENT",tenant:e.uid?e.tenant:e.tenant_info.tenant,tenant_id:e.tenant_info.id,frm_user:{id:i},app_name:t.app_name,app_type:t.settings.app_type,version:t.settings.version};if(console.log(e,"auth_payloadsfsdfsd",l),n.state.socket=Ct(s,{transports:["websocket"],auth:l}),n.state.socket.on("reconnect_attempt",(function(){socket.auth={user_id:"dfsdfsdfsddumyhand"}})),n.state.socket.on("HARD_RESET_ALL_SETTINGS",Ot(At().mark((function e(){var o,a,r,s,i,l,c,d,p;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("objectsdfsdfsdfdwsf_this",n),n.state.is_chat_content_modal_open){for((o=document.querySelector("#full_cover_div")).style.display="flex",(a=document.createElement("div")).className=ne.bb,(r=document.createElement("div")).className=ne.KY,s=0;s<4;s++)r.appendChild(document.createElement("div"));for((i=document.createElement("div")).innerText="Admin has updated settings. Please click Reset Settings to apply the changes, or log out and log back in.",l=0;l<3;l++)(c=document.createElement("span")).className="dot",c.textContent=".",i.appendChild(c);a.appendChild(r),a.appendChild(i),n.showCover(o,a),(d=document.createElement("button")).textContent="ðŸ”„ Reset Settings",d.style.cssText="\n            padding: 10px 20px;\n            background-color: #007BFF;\n            color: white;\n            border: none;\n            border-radius: 5px;\n            font-size: 16px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n        ",d.addEventListener("mouseover",(function(){d.style.backgroundColor="#0056b3"})),d.addEventListener("mouseout",(function(){d.style.backgroundColor="#007BFF"})),d.addEventListener("mousedown",(function(){d.style.transform="scale(0.95)"})),d.addEventListener("mouseup",(function(){d.style.transform="scale(1)"})),d.addEventListener("click",Ot(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sfsjfpsadfsdf",t.app_name,t.auth_key),e.next=3,window.magicchat_io.updateLiveSettings(t.app_name,t.auth_key,["tezkit_app_data","tezkit_header_req"]);case 3:case"end":return e.stop()}}),e)})))),window.magicchat_io.renderErrorPopup(["Admin has made some changes, Kindly click `Reset Settings` to apply the latest chagnes."],[d],"error")}else(p=document.createElement("button")).textContent="ðŸ”„ Reset Settings",p.style.cssText="\n            padding: 10px 20px;\n            background-color: #007BFF;\n            color: white;\n            border: none;\n            border-radius: 5px;\n            font-size: 16px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n        ",p.addEventListener("mouseover",(function(){p.style.backgroundColor="#0056b3"})),p.addEventListener("mouseout",(function(){p.style.backgroundColor="#007BFF"})),p.addEventListener("mousedown",(function(){p.style.transform="scale(0.95)"})),p.addEventListener("mouseup",(function(){p.style.transform="scale(1)"})),p.addEventListener("click",Ot(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sfsjfpsadfsdf",t.app_name,t.auth_key),e.next=3,window.magicchat_io.updateLiveSettings(t.app_name,t.auth_key,["tezkit_app_data","tezkit_header_req"]);case 3:case"end":return e.stop()}}),e)})))),window.magicchat_io.renderErrorPopup(["Admin has made some changes, Kindly click `Reset Settings` to apply the latest chagnes."],[p],"error");case 2:case"end":return e.stop()}}),e)})))),o.hasOwnProperty("name_idn")){if(e.hasOwnProperty(o.name_idn)){console.log("asdfjlskafjsfasdfsdf?"),n.attachCommonSocks(t,o),console.log("whaweriwerwerwretezkit_app_data",t,Dt(t));var c=t;n.isFeatureEnabled(c.feature,"live_status","admin_push_client")&&(console.log("DFSDFSDFSDFRTYRTY"),n.state.socket.on("ON_USER_LIVE_STATUS_CLIENT_LISTNER",(function(e){var n=e;console.log("we are not getting any triggers?"),n.hasOwnProperty("live_status")?"P2P"==t.settings.app_type?(console.log("aewerhercurrent_apptypee?",t.settings.app_type),a.updateUserListLSStatusAtClientP2P(n),n.live_status?(console.log("diddi you happen3???SDFSDF"),document.querySelector(".".concat(w.av)),console.log("diddi you happen???")):document.querySelector(".".concat(w.u9))):"P2A"==t.settings.app_type&&(console.log("aewerhercurrent_apptypee?",t.settings.app_type),console.log("did you fire?3"),a.updateAdminLSStatusAtClient(n.live_status),n.status?(console.log("diddi you happen3???"),document.querySelector(".".concat(w.av)),console.log("diddi you happen???")):document.querySelector(".".concat(w.u9))):console.error("No status provided!")})))}}else console.error("`name_idn` does not exist")}})),Ut(this,"handleMsgReactionEvent",(function(e){var t=e.message,o=t.ret_id,a=t.message;console.log("ret_idsdfsadfsdf",e.message);var r=a,s=document.getElementById("chatBody");if(console.log("wwhat is ths msg_id when broken2chatBody",s),s){var i=n.getMessageElementFromChatBox(o,s);console.log("are we ever hitting it???",i),i&&n.addReaction(i.parentElement,r)}})),Ut(this,"getUnreadMsgsP2AV1",function(){var e=Ot(At().mark((function e(t,n,o){var a,r,s,i,l,c,d,p,u,h,g,f,m,_,y,v,b=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>3&&void 0!==b[3]?b[3]:"V1",console.log("getUnreadMsgsP2Asdf"),(r=new Headers).append("Authorization",t),s={method:"GET",headers:r,redirect:"follow"},i=null,l=JSON.parse(localStorage.getItem("global_settings")),c=l.multi_admin.enable,d=1==c?1:0,p=localStorage.getItem("tezkit_app_data"),u=JSON.parse(p),h=u.tenant_id,"V1"===a&&(i="https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(n,"&page=1&unread=True&app_type=").concat(o,"&user_type=CLIENT&multi_admin=").concat(d,"&tenant_name=").concat(h),console.log("sdlfosildfsdfsdf2")),i){e.next=16;break}return console.error("Invalid app version provided!"),e.abrupt("return",null);case 16:return e.prev=16,e.next=19,fetch(i,s);case 19:if((g=e.sent).ok){e.next=25;break}return e.next=23,g.text();case 23:throw f=e.sent,new Error("HTTP Error: ".concat(g.status," - ").concat(f));case 25:return e.next=27,g.json();case 27:if(m=e.sent,console.log("API Response:",m),m.chats&&0!==Object.keys(m.chats).length){e.next=32;break}return console.log("No unread messages found."),e.abrupt("return",0);case 32:return _=0,y=localStorage.getItem("tezkit_app_data"),console.log(status,"initialized111sdfsd1111",y),y&&(v=JSON.parse(y),m.chats.hasOwnProperty(v.app_name)&&m.chats[v.app_name].hasOwnProperty("user__"+v.tenant_info.id)&&(console.log("wehrowereteurto"),_=m.chats[v.app_name]["user__"+v.tenant_info.id].unread_msgs)),console.log("Total Unread Messages:",_),e.abrupt("return",_);case 40:return e.prev=40,e.t0=e.catch(16),console.error("Fetch error:",e.t0.message),e.abrupt("return",null);case 44:case"end":return e.stop()}}),e,null,[[16,40]])})));return function(t,n,o){return e.apply(this,arguments)}}()),Ut(this,"getUnreadMsgsP2ANONV1",function(){var e=Ot(At().mark((function e(t,n,o){var a,r,s,i,l,c,d,p,u,h,g,f,m,_,y,v,b;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getUnreadMsgsP2Asdf"),a=new Headers,r=localStorage.getItem("tezkit_app_data"),s=JSON.parse(localStorage.getItem("tezkit_me")).uid,i=JSON.parse(r),l=i.auth_key,c=i.tenant_id,a.append("x-api-key",l),d={method:"GET",headers:a,redirect:"follow"},p=JSON.parse(localStorage.getItem("global_settings")),u=p.multi_admin.enable,h=1==u?1:0,g="https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(t,"&page=1&unread=True&app_type=").concat(n,"&user_type=CLIENT&multi_admin=").concat(h,"&tenant_name=").concat(c,"&other_user_id=").concat(o,"&uid=").concat(s),e.prev=13,e.next=16,fetch(g,d);case 16:if((f=e.sent).ok){e.next=22;break}return e.next=20,f.text();case 20:throw m=e.sent,new Error("HTTP Error: ".concat(f.status," - ").concat(m));case 22:return e.next=24,f.json();case 24:if(_=e.sent,console.log("API Response:",_),_.chats&&0!==Object.keys(_.chats).length){e.next=29;break}return console.log("No unread messages found."),e.abrupt("return",0);case 29:return y=0,v=localStorage.getItem("tezkit_app_data"),console.log(status,"initialized111sdfsd1111",v),v&&(b=JSON.parse(v),_.chats.hasOwnProperty(b.app_name)&&_.chats[b.app_name].hasOwnProperty("user__"+b.tenant_info.id)&&(console.log("wehrowereteurto"),y=_.chats[b.app_name]["user__"+b.tenant_info.id].unread_msgs)),console.log("Total Unread Messages:",y),e.abrupt("return",y);case 37:return e.prev=37,e.t0=e.catch(13),console.error("Fetch error:",e.t0.message),e.abrupt("return",null);case 41:case"end":return e.stop()}}),e,null,[[13,37]])})));return function(t,n,o){return e.apply(this,arguments)}}()),Ut(this,"getUnreadMsgsP2P",function(){var e=Ot(At().mark((function e(t,n){var o,a,r,s,i,l,c,d,p,u,h,g,f,m=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=m.length>2&&void 0!==m[2]?m[2]:"V1",a=m.length>3&&void 0!==m[3]&&m[3],console.log("what is ths appfvwef"),(r=new Headers).append("Authorization",t),s={method:"GET",headers:r,redirect:"follow"},i=null,l=JSON.parse(localStorage.getItem("global_settings")),c=l.multi_admin.enable,d=1==c?1:0,p=localStorage.getItem("tezkit_app_data"),JSON.parse(p),"V1"===o&&(i="https://chats.".concat("magicchat.io","/").concat("prod","/all_chats?app_name=").concat(n,"&page=1&unread=True&app_type=P2P&user_type=CLIENT&multi_admin=").concat(d,"&tenant_name=").concat(tenant_name),console.log("sdlfosildfsdfsdf3")),i){e.next=16;break}return console.error("Invalid app version provided!"),e.abrupt("return",null);case 16:return e.prev=16,e.next=19,fetch(i,s);case 19:if((u=e.sent).ok){e.next=25;break}return e.next=23,u.text();case 23:throw h=e.sent,new Error("HTTP Error: ".concat(u.status," - ").concat(h));case 25:return e.next=27,u.json();case 27:if(g=e.sent,console.log("API Response:",g),!a){e.next=33;break}return e.abrupt("return",g.chats[n]);case 33:return f=Object.values(g.chats).flatMap((function(e){return Object.values(e)})).reduce((function(e,t){return e+(t.unread_msgs||0)}),0),e.abrupt("return",f);case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(16),console.error("Fetch error:",e.t0.message),e.abrupt("return",null);case 41:case"end":return e.stop()}}),e,null,[[16,37]])})));return function(t,n){return e.apply(this,arguments)}}()),Ut(this,"updateNotificationBell",(function(e){console.log("tezkit_app_datasdafsdfsd",Dt(e),e),e&&("string"==typeof e&&JSON.parse(e),this.incrementNotificationsCount())})),Ut(this,"incomingMsgHandler",(function(e,t){var o,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"REGULAR";console.log("Here can we play sound file kept right in this code's file root",e);var s="string"==typeof t?JSON.parse(t):t,i="P2A"===(null==s||null===(o=s.settings)||void 0===o?void 0:o.app_type),l="P2P"===(null==s||null===(a=s.settings)||void 0===a?void 0:a.app_type);(i||l)&&console.log("ðŸ”¥ Early app_type check:",s.settings.app_type),console.log("this happens when the msg comes | goes or both?",s,e);var c=JSON.parse(e);if(console.log("messagep_data",c),console.log(n.state.is_chat_content_modal_open,"arenthewehere?",r,n.state.viewType),"BOT"!==r&&(console.log("arent weh ere???",n.state.loggedInUser),n.informPeerSysAboutMsgStatus(n.state.socket,c.message.ret_id,"DELIVERED",s.app_name,c.message.to_user.id,c.message.frm_user.id)),console.log("this.statesdfsdf",n.state.viewType),n.updateNotificationBell(t),i)n.state.is_chat_content_modal_open?(console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(Dt(t),"tezkit_app_datasdfsdf",t),console.log("here is p_datasdfsdf",c),"REGULAR"===r||"REPLY"===r||"NEW_FILE_MIXED_V1"===r?n.addMessageToUserChatBox(c,c.type,void 0,"INCOMING"):"BOT"===r&&(console.log("arew wehere here for logout bot case?"),n.addMessageToBotChatBox(c,void 0,"OUTGOING")),"user_chat"===n.state.viewType?(console.log("ehre can wer seechat_",n.state.loggedInUser,c),n.informPeerSysAboutMsgStatus(n.state.socket,c.message.ret_id,"READ",n.state.loggedInUser.app_name,c.message.to_user.id,c.message.frm_user.id)):(console.log("heorjowerwerwer?",e),n.state.unread_messages=[].concat(kt(n.state.unread_messages),[JSON.parse(e)]))):console.log("if we going this way may be we can load things in unread_messages?");else if(console.log("sdfsdfsdfsdfsdfsdfrghth",n.state),n.state.is_chat_content_modal_open){console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(Dt(t),"tezkit_app_datasdfsdf",t),console.log(n.state.activeWindowObj,"datasdsdfytjytjytjfsadfsd",c);var d="V1"===s.settings.version?"id":"uid";if(n.state.activeWindowObj[d]===c.message.frm_user.id)console.log("here is p_datassdfdfsdf",c),"REGULAR"!==r&&"REPLY"!==r&&"NEW_FILE_MIXED_V1"!==r||n.addMessageToUserChatBox(c,c.type,void 0,"INCOMING"),"BOT"!==r&&n.informPeerSysAboutMsgStatus(n.state.socket,c.message.ret_id,"READ",n.state.loggedInUser.app_name,c.message.to_user.id,c.message.frm_user.id);else{console.log("when the another window but not right window is not opened but msg arrvies",e);var p="unread__"+c.message.frm_user.id,u=document.getElementById(p);u&&(u.textContent=String(Number(u.textContent)+1))}}else{console.log("if we going this way may be we can load things in unread_messages?");var h="unread__"+c.message.frm_user.id,g=document.getElementById(h);g&&(g.textContent=String(Number(g.textContent)+1))}})),Ut(this,"botAIMsgsHandler",(function(e,t){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OUTGOING";console.log(e,"is my direction right for all 4 cases?",a);var r="string"==typeof t?JSON.parse(t):t,s="P2A"===(null==r||null===(o=r.settings)||void 0===o?void 0:o.app_type);console.log("this happens when the msg comes | goes or both?",r);var i=JSON.parse(e);console.log("messagep_data",i),console.log(n.state.is_chat_content_modal_open,"arenthewehere?",n.state.viewType),console.log("this.statesdfsdf",n.state.viewType),s&&(n.state.is_chat_content_modal_open?(console.log("sdfasdfsdfthis.state.is_chat_content_modal_open",n.state.is_chat_content_modal_open),console.log(Dt(t),"tezkit_app_datasdfsdf",t),console.log("here is p_datasdfsdf",i),n.addMessageToBotChatBox(i,!1,a)):console.log("if we going this way may be we can load things in unread_messages?"))})),Ut(this,"updateUserName",(function(e){console.log("ðŸŸ¦ [updateUserName] START"),console.log('ðŸŸ¢ Requested new username: "'.concat(e,'"'));var t=document.querySelector('[class^="chat_header_user_chat"]');if(!t)return console.warn("âš ï¸ [updateUserName] chat_header_user_chat container not found!"),void console.log("ðŸŸ¥ [updateUserName] END (failed at container)");console.log("âœ… [updateUserName] Found chat_header_user_chat container",t);var n=t.querySelector('h3[id^="userName"]');if(!n)return console.warn("âš ï¸ [updateUserName] userName element not found inside chat_header_user_chat!"),void console.log("ðŸŸ¥ [updateUserName] END (failed at userNameEl)");console.log("âœ… [updateUserName] Found userName element",n),n.textContent=e,console.log('ðŸŸ© [updateUserName] Updated username to: "'.concat(e,'"')),console.log("ðŸ [updateUserName] END (success)")})),Ut(this,"updateMessageReaction",(function(e,t){console.log("arewenoteven calling th?what is the diff",e);var n=e.querySelector(".reaction");n||((n=document.createElement("div")).classList.add(w.mJ),n.style.visibility="visible",e.appendChild(n)),n.textContent=t})),Ut(this,"beforeUnloadHandler",(function(e){try{var t;null!==(t=n.state)&&void 0!==t&&t.p2a_connection_with?(e.preventDefault(),e.returnValue=""):delete e.returnValue}catch(e){console.error("Error handling disconnect before unload:",e)}})),Ut(this,"postConnAcceptanceHandler",(function(e,t){var o;console.log("Connected with:",t),e.state.p2a_connection_with=t,"V1"!=e.state.loggedInUser.version?e.state.activeWindowObj.uid=e.state.p2a_connection_with.user_id:e.state.activeWindowObj.id=e.state.p2a_connection_with.user_id,e.moveHighlightedProfileToFront("profile_img__".concat(e.state.p2a_connection_with.user_id)),e.showMAannouncementMessages("You are now successfully connected with \n   <strong>".concat(e.state.p2a_connection_with.full_name,"</strong>. You can now feel free to ask anything!"),{type:"connected",persistent:!1}),e.updateUserName(t.full_name),(null===(o=JSON.parse(localStorage.getItem("tezkit_app_data")).feature)||void 0===o||null===(o=o.live_status)||void 0===o?void 0:o.enable)&&e.updateAdminLSStatusAtClient("ONLINE"),window.addEventListener("beforeunload",n.beforeUnloadHandler)})),Ut(this,"postConnDisconnectionHandler",(function(e,t){console.log("ðŸ”» postConnDisconnectionHandler called"),document.getElementById("chat_announcement"),e.showMAannouncementMessages("Disconnected for now but sending any message will trigger a new Agent Search",{persistent:!1,showCloseButton:!0,type:"error"}),e.resetAllProfileHighlights(),e.updateAdminLSStatusAtClient("OFFLINE"),console.log("did you see this happening?self.state",e.state),e.state.p2a_connection_with=null,window.removeEventListener("beforeunload",n.beforeUnloadHandler)})),console.log("aswerwerenwrer?"),this.state={activeWindowObj:null,globalMsgsBucket:{},prv_inp:null,prv_send_btn:null,loggedInUser:null,socket:t,is_chat_content_modal_open:!1,viewType:"bot_chat",unread_messages:[],p2a_connection_with:null,support_admin_users:[]}},t=[{key:"addSystemMsg",value:function(e,t){var n=document.getElementById("chatBody"),o=document.createElement("div");t&&o.setAttribute("id",t),o.className=w.og;var a=document.createElement("div");a.className=w.H4,a.textContent=e||"system message",o.appendChild(a),n.appendChild(o)}},{key:"openChatModal",value:(a=Ot(At().mark((function e(){var t;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("sdfhjlksfsafsd"),t=document.querySelector(".chat_modal__"+Z),this.state.is_chat_content_modal_open||(this.state.is_chat_content_modal_open=!0,window.innerWidth<this.MOBILE_WIDTH&&(t.style.display="flex")),console.log("safasdfsdfsadfthis.is_chat_content_modal_open",this.state.is_chat_content_modal_open);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"isFeatureEnabled",value:function(e,t){var n,o=e;console.log("parentsdf",o);var a=null==o||null===(n=o.live_status)||void 0===n?void 0:n.enable;return console.log("live_status_enabledsf",a),a}},{key:"awayHandler",value:function(e,t,n,o,a){console.log("[AwayHandler] Init with:",{apptyp:t,version:n,loggedInUser:e});var r=null,s=(localStorage.getItem("tezkit_token"),function(t){try{var o,r,s,i=localStorage.getItem("tezkit_app_data");if(!i)return console.warn("[AwayHandler] No app data found.");var l=JSON.parse(i),c=l.auth_key,d=null===(o=l.settings)||void 0===o?void 0:o.app_type,p=null===(r=l.settings)||void 0===r?void 0:r.version,u=l.app_name,h=null==e||null===(s=e.tenant_info)||void 0===s?void 0:s.id,g=e.uid||e.id,f={Accept:"*/*","User-Agent":"Tezkit Client","x-api-key":c,"Content-Type":"application/json"},m="V1"===n?{live_status:t,tenant:e.tenant,frm_user:{id:g}}:Lt(Lt({},e),{},{live_status:t,frm_user:{uid:g}}),_={app_type:d,app_name:u,version:p,user_id:g};"P2A"===d&&(_.tenant_id=h),console.log("[AwayHandler] Sending ".concat(t," â†’"),{bodyContent:m,ls_payload:_}),a.updateLiveStatus(JSON.stringify(m),f,_)}catch(e){console.error("[AwayHandler] emitLiveStatus failed",e)}}),i=function(){return s("AWAY")},l=function(){return s("ONLINE")},c=function(){clearTimeout(r),r=null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.hidden,n=document.hasFocus();console.log("[AwayHandler:".concat(e,"] hidden=").concat(t," focused=").concat(n));var o=localStorage.getItem("tezkit_app_data");if(o){var s=JSON.parse(o).feature;a.isFeatureEnabled(s,"live_status","client_push_admin")?t?(c(),r=setTimeout(i,1e3)):n?(c(),l()):(c(),setTimeout((function(){document.hasFocus()&&l()}),500)):console.log("[AwayHandler] Live status push disabled.")}};return document.addEventListener("visibilitychange",(function(){return d("visibilitychange")})),window.addEventListener("focus",(function(){return d("focus")})),window.addEventListener("blur",(function(){return d("blur")})),window.addEventListener("pageshow",(function(){return d("pageshow")})),window.addEventListener("pagehide",(function(){return d("pagehide")})),d("init"),function(){c(),document.removeEventListener("visibilitychange",d),window.removeEventListener("focus",d),window.removeEventListener("blur",d),window.removeEventListener("pageshow",d),window.removeEventListener("pagehide",d)}}},{key:"minimizeChatModal",value:(o=Ot(At().mark((function e(){var t;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("werwqerin hdsf?"),console.log("close just the open window"),t=document.querySelector(".chat_modal__"+Z),console.log(this.state.is_chat_content_modal_open,"chat_screensdfdsddsf"),this.state.is_chat_content_modal_open=!1,t.style.display="None";case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"createLogoutChatHeader",value:function(e){var t=this,n=localStorage.getItem("tezkit_app_data");if(n){var o=JSON.parse(n),a=document.createElement("div");a.className=w.py;var r=document.createElement("div");r.className=w.us;var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center";var i=document.createElement("h3");i.id="userName",i.textContent="Magentic AI Bot",document.createElement("span").id="typingStatusElm",s.appendChild(i),r.appendChild(s),a.appendChild(r);var l=null;if("P2A"===o.settings.app_type){console.log("Initial viewType:",this.state.viewType),(l=document.createElement("button")).id="close-btn__".concat(e),l.className=w.Iv;var c=document.createElement("div");c.setAttribute("id","bi_wrapper"),c.innerHTML="bot svg";var d=document.createElement("div");d.setAttribute("id","ui_wrapper"),d.innerHTML="user svg";var p=document.createElement("div");p.className=w.YL;var u=function(e){var t="bot_chat"===e;c.style.display=t?"block":"none",d.style.display=t?"none":"block",p.innerText=t?"Talk to live user":"Talk to bot"};u(this.state.viewType),l.appendChild(c),l.appendChild(d),l.appendChild(p),l.addEventListener("click",(function(){var e="bot_chat"===t.state.viewType?"user_chat":"bot_chat";t.toggleChatView(e,Z),u(e)}))}l&&a.appendChild(l);var h=document.createElement("div");return h.className="chat_notice",h.id="chatNotice",h.style.display="none",a.appendChild(h),a}}},{key:"setChatInputLogoutUI",value:function(e){var t=this;console.log("notwitsmbe surroer");var n=this,o=(this.state,'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ');console.log("weranteh enve here?");var a=function(){console.log("thissfsdfdfgviewType whichone2",t.state.viewType);var a=document.createElement("div");a.id="input-act-bot-wrap",a.className=w.JW;var s=document.createElement("div");s.className=w.Vj;var i=document.createElement("input");i.type="text",i.className=w.So,i.placeholder="Type a message here for bot...";var l=document.createElement("button");if(l.className=w.dQ,l.innerHTML=o,!document.getElementById("sendbtn-disabled-style")){var c=document.createElement("style");c.id="sendbtn-disabled-style",c.innerHTML="\n      .sendbtn:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n        pointer-events: none;\n      }\n    ",document.head.appendChild(c)}return l.addEventListener("click",(function(){var o=document.querySelector(".".concat(w.lj));o&&(o.style.display="none");var a=document.getElementById("bot_thinking");a.style.display="block",l.disabled=!0;var s=document.querySelector(".".concat(w.jP));!s&&o?((s=document.createElement("button")).textContent="Show More",s.classList.add(w.jP),s.style.display="none",o.parentNode.insertBefore(s,o.nextSibling),s.addEventListener("click",(function(){o.style.display="flex";var e=document.querySelector(".".concat(w.lj," .").concat(r.choice_wrap));e?(o.innerHTML="",o.appendChild(e),e.style.display="flex"):console.warn("âš ï¸ choice_wrap not found!"),s.style.display="none"}))):s&&(s.style.display="none");var c={type:"BOT",message:{msg_id:"msg_id__uniqu1",message:i.value,timestamp:Date.now()}},d=i.value;i.value="",n.botAIMsgsHandler(JSON.stringify(c),e);var p=JSON.parse(localStorage.getItem("tezkit_bot_data"));console.log("MARKERDSLKJFSODF1 tezkit_app_data",p);var u="dev"==(null==="prod"?void 0:"prod".toLowerCase())?"https://magicchat-aiag.hf.space/api/qa":"https://djangoboy-magicchat-pr.hf.space/api/qa";fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:d,kb_id:p.kb_id})}).then((function(e){return e.json()})).then((function(o){s&&(s.style.display="block");var r=o.SIGNAL||null;if(r){var i=document.querySelector(".".concat(w.av));console.log("dosdhfsfyou avhe",o),t.addAIPopUp(i,r,o.question)}else{var l={type:"BOT",message:{msg_id:"msg_id__95265433",message:o.answer,status:"SENT",timestamp:Date.now()}};a.style.display="none",console.log("are you the one ??"),n.botAIMsgsHandler(JSON.stringify(l),e,"INCOMING")}})).catch(console.error).finally((function(){l.disabled=!1,s&&(s.style.display="block")}))})),s.appendChild(i),s.appendChild(l),a.appendChild(s),i.setAttribute("tabindex","0"),setTimeout((function(){i.focus();var e=i.value.length;i.setSelectionRange(e,e)}),0),i.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l.disabled||l.click())})),{wrapper:a,inputBox:i}}(),s=a.wrapper,i=(document.querySelector(".".concat(w.u9," .").concat(w.bw)),document.querySelector(".".concat(w.av)));i&&i.appendChild(s)}},{key:"attachInputActionRow",value:function(e,t,n,o,a,r){console.log("ditiransdf?");var s=JSON.parse(localStorage.getItem("tezkit_app_data")),i=this.createInputWrapper((function(){return console.log("is it even running?")})),l=this.createInputBox(e,n,s);l.addEventListener("focus",(function(){return l.style.border="1px solid rgb(74, 122, 255)"})),i.appendChild(l),console.log("arewyou able aeworu reiach this?"),this.setChatInputUI(s)}},{key:"handleAiAnswer",value:function(e,t){var n=document.getElementById("bot_thinking");n&&(n.style.display="none");var o={type:"BOT",message:{message:e.answer,status:"SENT",timestamp:Date.now()}};console.log("ðŸ“¤ handleAiAnswer â†’ Final botSendObj:",o),this.botAIMsgsHandler(JSON.stringify(o),t,"INCOMING")}},{key:"setChatInputUI",value:function(e){var t=this,n=JSON.parse(localStorage.getItem("global_settings")).multi_admin.enable;console.log("notwitsmbe surproer");var o,a=this,s=this.state,i=s.activeWindowObj,l=s.loggedInUser,c=s.socket,d=s.globalMsgsBucket,p=function(){return console.log("activeWindowObjsdafsdfsd",i),"V1"==l.version?i.id:i.uid},u=!1,h=function(){console.log("whichone sdfhi2");var e=localStorage.getItem("global_settings"),t=e?JSON.parse(e):{},n=(a.state||{}).p2a_connection_with,r=t.multi_admin.enable&&"support_type"===(null==n?void 0:n.user_type)?"support_for__":"global_for__",s=JSON.parse(localStorage.getItem("tezkit_app_data"));console.log("tezkit_app_datadatra",s.settings.version);var i=s.settings.version||l.version;if(!u){u=!0,console.log("asdflsdfsdf","V1"!=i);var d="V1"!=i?"uid":"id";c.emit("TYPING_INDICATOR",{typing:!0,room:r+p(),frm_user:Ut({},d,l[d])})}clearTimeout(o),o=setTimeout((function(){u=!1,console.log("sdfhsdafloggedInUsersdfsd",l);var e="V1"!=i?"uid":"id";c.emit("TYPING_INDICATOR",{typing:!1,room:r+p(),frm_user:Ut({},e,l[e])})}),5e3)},g='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ';console.log("weranteh enve here?");var f=function(){var e;console.log("aeroiwerngsdf?");var o=document.createElement("div");o.id="input-act-wrap",o.className=w.Ht;var r=document.createElement("div");r.id="input-box-div-wrapper",r.className=w.hD,r.addEventListener("input",h);var s,i,u=document.createElement("input");u.type="text",u.className=w.Xs,u.placeholder="Type here...",u.value=(i=p(),(null==d||null===(s=d["user__".concat(i)])||void 0===s?void 0:s.input)||"");var f=t.createAttachmentButton(u),m=f.button,_=f.fileInput;r.appendChild(m),_.addEventListener("change",(function(){console.log("wedoi9snsgfdfs?"),t.handleFileInputChange(_,r,t.state.activeWindowObj,t,$,l)})),document.body.appendChild(_);var y=document.createElement("button");y.className=w.dQ,y.innerHTML=g,y.addEventListener("click",Ot(At().mark((function o(){var r,s,i,d,h,g,f,m,_,y,v,b,x,E,C,k,S;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log("jsdhfsdfsdf?"),e&&(clearTimeout(e),e=null,console.log("ðŸ§¹ Cleared idleTypingTimeout on send click")),zt=!0,(i=document.getElementById("no-messages-placeholder"))&&(i.textContent=""),(d=document.getElementById("idle-msg"))&&d.remove(),console.log("[SendBtn] Proceeding to send message..."),(h=localStorage.getItem("global_settings"))&&JSON.parse(h),g=a.state||{},f=g.p2a_connection_with,m=p(),u.value){o.next=14;break}return o.abrupt("return");case 14:if(_=JSON.parse(localStorage.getItem("tezkit_app_data")),y=null!==(r=l.id)&&void 0!==r?r:l.uid,console.log("[SendBtn] Connection status:",f),v="P2A"===(null==_||null===(s=_.settings)||void 0===s?void 0:s.app_type),!(b=!0===n||"true"===n)||!v||f){o.next=25;break}return console.log("[SendBtn] Initiating agent connection request..."),document.getElementById("input-act-wrap").classList.add(w.$b),t.initiateConnectAgentReq(_),o.abrupt("return");case 25:return x=b&&"support_type"===(null==f?void 0:f.user_type),E=$(),C=x?"support_for__":"global_for__",k={app_name:l.app_name,room:"".concat(C).concat(m),type:"REGULAR",message:{msg_id:E,ret_id:E,message:u.value,status:"SENT",timestamp:Date.now(),frm_user:{id:y},to_user:{id:m}}},console.log("[SendBtn] Base msgObj:",k),a.addMessageToUserChatBox(k),u.value="",o.next=34,Y(k,l);case 34:b&&v&&x&&(k.message.to_user.id=f.user_id,k.room.startsWith("global_")&&(k.room=k.room.replace("global_","support_"),console.log("[SendBtn] Updated room key:",k.room))),S=t.transformMsgObject(k,t),console.log("[SendBtn] Final message object:",S),c.emit("ON_MESSAGE_ARRIVAL_BOT",S),console.log("sdfsddddddddddddddddd");case 39:case"end":return o.stop()}}),o)})))),u.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y.click())})),r.appendChild(u),r.appendChild(y),o.appendChild(r);var v=document.querySelector('[class^="chat_body__"]'),b=function(){var e=v.closest("[class^='chat_box_top_user_wrapper__']");if(console.log("chatBodyEl.parentElement.parentElement",v.parentElement.parentElement),"none"===e.style.display)return console.log("ðŸš« Idle skipped â€” chat body not visible, rescheduling..."),qt=!1,void x();qt||(qt=!0,console.log("ðŸ’¤ User inactive inside chat body for 10s (no activity)"),t.addSystemMsg("Youâ€™ve been quiet â€” Please Feel free to message us!, We are happy to help!","idle-msg"),Ft&&(Pt||(Pt=new Audio(ae)),Pt.play().then((function(){console.log("ðŸ”Š Sound played successfully"),setTimeout((function(){Pt.pause(),Pt.currentTime=0,console.log("ðŸ”‡ Sound stopped after 5 seconds")}),5e3)})).catch((function(e){return console.error("Audio play error:",e)}))))},x=function(){qt||(zt?clearTimeout(e):(clearTimeout(e),e=setTimeout(b,9e4)))};x();var E=["input"];return[u].forEach((function(e){e&&E.forEach((function(t){return e.addEventListener(t,x,{passive:!0})}))})),u.addEventListener("input",x),o}(),m=document.querySelector(".".concat(w.u9," .").concat(w.bw)),_=document.querySelector(".".concat(w.av));if(console.log("chatBotFooterfsdfsdf",_),console.log("tezdsfsdfsdftezkit_app_data",e.ai_agent_bot_enabled),e.ai_agent_bot_enabled&&_){var y=function(){console.log("ðŸ”¹ Entered createBotInputWrapper"),console.log("whichone1",t.state.viewType);var n=document.createElement("div");n.id="input-act-bot-wrap",n.className=w.JW,console.log("âœ… Created wrapper div with id:",n.id);var o=document.createElement("div");o.className=w.Vj,console.log("âœ… Created inner wrapper div");var s=document.createElement("input");s.type="text",s.className=w.So,s.placeholder="Type a message here for bot...",console.log("âœ… Created input box with placeholder:",s.placeholder);var i=document.createElement("button");return i.className=w.dQ,i.innerHTML=g,console.log("âœ… Created send button"),i.addEventListener("click",(function(){var t=document.querySelector(".".concat(w.lj));if(console.log("getChatBodygetChatBody",t),t&&(t.style.display="none",console.log("ðŸš€ Send button clicked!"),0!=s.value.length)){var n=s.value,o=document.querySelector(".".concat(w.jP));o?o.style.display="none":((o=document.createElement("button")).textContent="Show More",o.classList.add(w.jP),o.style.display="none",t.parentNode.insertBefore(o,t.nextSibling),o.addEventListener("click",(function(){t.style.display="flex";var e=document.querySelector(".".concat(w.lj," .").concat(r.choice_wrap));e?(t.innerHTML="",t.appendChild(e),e.style.display="flex"):console.warn("âš ï¸ choice_wrap not found!"),o.style.display="none"})));var i={type:"BOT",message:{message:n,status:"SENT",timestamp:Date.now()}};s.value="",console.log("arntwegoing?"),a.botAIMsgsHandler(JSON.stringify(i),e);var l=document.getElementById("bot_thinking");l?(l.style.display="block",console.log("ðŸ¤– Bot thinking indicator shown")):console.warn("âš ï¸ bot_thinking element not found!"),a.sendMsgToAIHandler(n,o,l)}})),o.appendChild(s),o.appendChild(i),console.log("sdhfsjdfsdfsdfsdftewrzdre",e.ai_agent_bot_enabled),n.appendChild(o),console.log("ðŸŽ¯ Finished building input wrapper",n),s.setAttribute("tabindex","0"),setTimeout((function(){s.focus();var e=s.value.length;s.setSelectionRange(e,e)}),0),s.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i.disabled||i.click())})),{wrapper:n,inputBox:s}}().wrapper;_.appendChild(y)}m&&m.appendChild(f)}},{key:"createInputWrapper",value:function(e){var t=document.createElement("div");return t.id="input-box-div-wrapper",t.classList.add("input-box-div-wrapper"),t.addEventListener("input",e),t}},{key:"createInputBox",value:function(e,t,n){var o,a=document.createElement("input");a.type="text",a.placeholder="Type here...",a.classList.add(w.Xs);var r=t.uid||t.id,s="user__".concat(r),i=(null==e||null===(o=e[s])||void 0===o?void 0:o.input)||"";return a.value=i,a}},{key:"insertElmToInpWrapper",value:function(e){var t=document.getElementById("input-box-div-wrapper");if(t.style.background="orange",t){var n=e.cloneNode(!0);n.style.maxHeight="70px",n.style.overflow="hidden";var o=t.firstChild;t.insertBefore(n,o)}}},{key:"addMessageToUserChatBox",value:function(e){var t,n,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"REGULAR",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("addchatmessage useru",e,Dt(e)),console.log("is it fired both times?",e),console.log("hey new msg came",e);var s=JSON.parse(localStorage.getItem("global_settings")),i=null!==(t=null==s||null===(n=s.multi_admin)||void 0===n?void 0:n.enable)&&void 0!==t&&t,l=e,c=this.state.loggedInUser.hasOwnProperty("uid")?this.state.loggedInUser.uid:this.state.loggedInUser.id,d=document.getElementById("chatBody"),p=l.message.frm_user.id===c?"You":"Other";console.log("here1",c);var u,h,g,f=this.createMessageDivWrapper(p),m=this.outerMsgRowDiv();console.log("here2"),console.log("right_u_idsdfsdfsdf",c);var _=function(e){u=o.innerMsgDivWrap(l,e),h=o.createEmojiContentDiv(),i&&(g=o.createFrmUserContentDiv(l.message.frm_user.id,p)),console.log("here3")};if(console.log("what erewrsisdf",a),"BOT"!==a&&"REPLY"!==a&&"REGULAR"!==a&&l.message.frm_user.id!==c||"NEW_FILE_MIXED_V1"===a)"NEW_FILE_MIXED_V1"===a&&_(this.createDocumentMsgDiv(l));else{var y=document.createElement("div");if(y.textContent=l.message.message,_(y),"REPLY"===a){var v=document.createElement("div");v.classList.add(w.ZT);var b=document.createElement("div");b.textContent=l.message.to_msg.by_who,b.style.color="#969696",b.style.fontWeight="600";var x=document.createElement("div");x.textContent=this.getRightReplyToContent(l.message.to_msg.msg_id),x.style.paddingTop="5px",v.append(b,x),v.addEventListener("click",(function(){var e=document.getElementById(l.message.to_msg.msg_id);e?(e.scrollIntoView({behavior:"smooth",block:"center"}),e.style.transition="background-color 0.3s ease",e.style.backgroundColor="#ffffa0",setTimeout((function(){return e.style.backgroundColor=""}),800)):console.warn("Target message not found: ".concat(l.message.to_msg.msg_id))})),u.insertBefore(v,u.firstChild)}}if(console.log("whoesdf",p),"You"===p?(f.appendChild(m),g&&f.appendChild(g)):(g&&f.appendChild(g),f.appendChild(m)),m.append(h,u),l.message.frm_user.id===c){var E=u.querySelector(".status"),C=u.querySelector(".".concat(w.vE));console.log(C,"messageContentDivmessageContentDivmessageContentDiv",u),E.innerHTML="DELIVERED"===l.message.status||"READ"===l.message.status?"&#10003;&#10003;":"&#10003;",E.style.color="READ"===l.message.status?"#0074ff":"#0000006e",C.appendChild(E)}var k=this.createDownIcon();m.addEventListener("mouseover",(function(){return o.handleMouseOver(!1,h,k)})),m.addEventListener("mouseout",(function(){return o.handleMouseOut(!1,h,k)})),u.insertBefore(k,u.firstChild),l.message.reaction&&this.addReaction(u.parentElement,l.message.reaction);var S=document.querySelector(".".concat(w.u9));console.log("chatBoxchatBox",S),S.addEventListener("click",(function(e){return o.handleChatBoxClick(e)})),h.addEventListener("click",(function(e){e.stopPropagation(),o.toggleEmojiReactions(e)})),k.addEventListener("click",(function(e){e.stopPropagation(),o.handleDownIconClick(e,u,h,k)})),console.log("sdfsdkfjsdfoiasgsdf",f),r?(console.log("?arnetwhere?"),d.prepend(f)):(console.log("arnetwhere?"),d.appendChild(f)),console.log("hereattheend",d.childElementCount)}},{key:"insertBulkChatsAfterElement",value:function(e,t){var n,o,a=this,r=JSON.parse(localStorage.getItem("global_settings")),s=null!==(n=null==r||null===(o=r.multi_admin)||void 0===o?void 0:o.enable)&&void 0!==n&&n;console.log("multi_adminsdf",s);var i=1,l="DATE_SEPARATOR_DEBUG";console.log("".concat(l,"_").concat(i++,": Processing ").concat(e.length," messages"));var c=this.addDateSeparators(e);console.log("".concat(l,"_").concat(i++,": Added ").concat(c.length-e.length," date separators"));var d=document.getElementById("chatBody"),p=d.querySelectorAll(".".concat(w.YD)),u=new Map;p.forEach((function(e){var t=e.getAttribute("data-date");t&&u.set(t,e)})),console.log("".concat(l,"_").concat(i++,": Found ").concat(u.size," existing date separators:"),Array.from(u.keys()));var h=kt(c).reverse();h.forEach((function(e,n){if(console.log("".concat(l,"_").concat(i++,": Inserting item ").concat(n+1,"/").concat(h.length,", type: ").concat(e.type||"REGULAR")),e.isDateSeparator){var o=u.get(e.separatorDate);if(o)console.log("".concat(l,"_").concat(i++,": Moving existing date separator for ").concat(e.displayDate," above new messages")),o.remove(),t&&t.nextSibling?d.insertBefore(o,t.nextSibling):d.insertBefore(o,d.firstChild),u.set(e.separatorDate,o);else{console.log("".concat(l,"_").concat(i++,": Inserting new date separator for ").concat(e.displayDate));var r=a.createDateSeparatorElement(e);u.set(e.separatorDate,r),t&&t.nextSibling?d.insertBefore(r,t.nextSibling):d.appendChild(r)}}else a.insertSingleChatAfterElement(e,t,s)})),console.log("".concat(l,"_").concat(i++,": Finished processing all messages and separators"))}},{key:"insertSingleChatAfterElement",value:function(e,t,n){var o=this;if(console.log(n,"Inserting chat after element:",e),!e.message.msg_id){var a=$();e.message.msg_id=a}var r,s,i,l=document.getElementById("chatBody"),c=this.state.loggedInUser.hasOwnProperty("uid")?this.state.loggedInUser.uid:this.state.loggedInUser.id,d=e.message.frm_user.id===c?"You":"Other",p=this.createMessageDivWrapper(d),u=this.outerMsgRowDiv(),h=function(t){r=o.innerMsgDivWrap(e,t),s=o.createEmojiContentDiv(),n&&(i=o.createFrmUserContentDiv(e.message.frm_user.id,d))};if("BOT"!==e.type&&"REPLY"!==e.type&&"REGULAR"!==e.type&&e.message.frm_user.id!==c||"NEW_FILE_MIXED_V1"===e.type)"NEW_FILE_MIXED_V1"===e.type&&h(this.createDocumentMsgDiv(e));else{var g=document.createElement("div");if(g.textContent=e.message.message,h(g),"REPLY"===e.type){var f=document.createElement("div");f.classList.add(w.ZT);var m=document.createElement("div");m.textContent=e.message.to_msg.by_who,m.style.color="#969696",m.style.fontWeight="600";var _=document.createElement("div");_.textContent=this.getRightReplyToContent(e.message.to_msg.msg_id),_.style.paddingTop="5px",f.append(m,_),f.addEventListener("click",(function(){var t=document.getElementById(e.message.to_msg.msg_id);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.transition="background-color 0.3s ease",t.style.backgroundColor="#ffffa0",setTimeout((function(){return t.style.backgroundColor=""}),800))})),r.insertBefore(f,r.firstChild)}}if("You"===d?(p.appendChild(u),i&&p.appendChild(i)):(i&&p.appendChild(i),p.appendChild(u)),u.append(s,r),e.message.frm_user.id===c){var y=r.querySelector(".status"),v=r.querySelector(".".concat(w.vE));y.innerHTML="DELIVERED"===e.message.status||"READ"===e.message.status?"&#10003;&#10003;":"&#10003;",y.style.color="READ"===e.message.status?"#0074ff":"#0000006e",v.appendChild(y)}var b=this.createDownIcon();u.addEventListener("mouseover",(function(){return o.handleMouseOver(!1,s,b)})),u.addEventListener("mouseout",(function(){return o.handleMouseOut(!1,s,b)})),r.insertBefore(b,r.firstChild),e.message.reaction&&this.addReaction(r.parentElement,e.message.reaction),document.querySelector(".".concat(w.u9)).addEventListener("click",(function(e){return o.handleChatBoxClick(e)})),s.addEventListener("click",(function(e){e.stopPropagation(),o.toggleEmojiReactions(e)})),b.addEventListener("click",(function(e){e.stopPropagation(),o.handleDownIconClick(e,r,s,b)})),t&&t.nextSibling?l.insertBefore(p,t.nextSibling):l.appendChild(p)}},{key:"insertSingleChat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log(n,"New chat message:",e);var o="DATE_SEPARATOR_DEBUG";if(console.log("".concat(o,"_NEW_MESSAGE: Processing new single message")),!e.message.msg_id){var a=$();e.message.msg_id=a}var r=document.getElementById("chatBody"),s=r.querySelectorAll(".message-wrapper, .other-right, .you-right"),i=s[s.length-1],l=null;if(i){var c=i.querySelector(".time_status");if(c){var d=c.getAttribute("data-timestamp");d&&(l=parseInt(d))}}var p=e.message.timestamp;if(l){var u=new Date(l).toDateString(),h=new Date(p).toDateString();if(console.log("".concat(o,"_NEW_MESSAGE: Last date: ").concat(u,", New date: ").concat(h)),u!==h){console.log("".concat(o,"_NEW_MESSAGE: Date changed, adding separator for ").concat(h));var g={separatorDate:h,displayDate:this.formatDateForDisplay(new Date(p)),timestamp:p,isDateSeparator:!0},f=this.createDateSeparatorElement(g);r.appendChild(f)}}else{console.log("".concat(o,"_NEW_MESSAGE: First message, adding date separator"));var m={separatorDate:new Date(e.message.timestamp).toDateString(),displayDate:this.formatDateForDisplay(new Date(e.message.timestamp)),timestamp:e.message.timestamp,isDateSeparator:!0},_=this.createDateSeparatorElement(m);r.appendChild(_)}this.addMessageToUserChatBox(e,e.type,n)}},{key:"insertBulkChats",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;e.forEach((function(e){t.insertSingleChat(e,n,o)}))}},{key:"moveHighlightedProfileToFront",value:function(e){console.log("moveHighlightedProfileToFront called for",e);var t=document.querySelector('[class^="profile_logo__"]');if(t){var n=Array.from(t.querySelectorAll("img")).find((function(t){return Array.from(t.classList).some((function(t){return t.includes(e)}))}));if(n){var o=n.closest('div[class^="adminImg__"]');o?(t.querySelectorAll('div[class^="adminImg__"]').forEach((function(e){e.style.border="",e.style.borderRadius="",e.style.padding="",e.style.boxSizing=""})),t.prepend(o),o.style.border="2px solid green",o.style.borderRadius="50%",o.style.padding="2px",o.style.boxSizing="border-box",t.querySelectorAll('div[class^="adminImg__"]').forEach((function(e,t){e.style.zIndex=t+1,e.style.marginLeft=0===t?"0px":"-15px",e.style.transition="all 0.25s ease"})),console.log("âœ… Moved + highlighted profile:",e)):console.warn("âŒ No adminImg__* wrapper found for",e)}else console.warn("âŒ No target image found matching partial:",e)}else console.warn("âŒ No profile_logo__* container found")}},{key:"resetAllProfileHighlights",value:function(){console.log("resetAllProfileHighlights called");var e=document.querySelector('[class^="profile_logo__"]');if(e){var t=Array.from(e.querySelectorAll('div[class^="adminImg__"]'));t.forEach((function(e){e.style.border="",e.style.borderRadius="",e.style.padding="",e.style.boxSizing="",e.style.transition="all 0.25s ease"})),t.forEach((function(e,t){e.style.zIndex=t+1,e.style.marginLeft=0===t?"0px":"-15px"})),console.log("âœ… Reset all highlights and restored order")}}},{key:"uploadMFiles",value:(n=Ot(At().mark((function e(t){var n,o;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mmmanager.".concat("magicchat.io","/").concat("prod","/put_object"),t);case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,console.log("adsfasdfresult",o),e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.error("Error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(e){return n.apply(this,arguments)})},{key:"prepareFUpayload",value:function(e,t){return e.map((function(e){return e.map((function(e){if("img"===e.type){var n=decodeURIComponent(e.value),o=t.files.find((function(e){var t;return((t=e.match(/\/([^/]+)$/))?decodeURIComponent(t[1]):null)===n}));if(o)return Lt(Lt({},e),{},{value:o})}return e}))}))}},{key:"transformMsgObject",value:function(e,t){var n,o;console.log(JSON.stringify(e),"beforeupdate1",t);var a=JSON.parse(localStorage.getItem("tezkit_app_data")),r=null===(n=t.state)||void 0===n?void 0:n.p2a_connection_with;console.log(r,"p2aConnappDatasdfsdf",a,c);var s,i,l=Lt({},e),c=JSON.parse(localStorage.getItem("global_settings")).multi_admin.enable;return"true"===c&&"P2A"===(null==a||null===(o=a.settings)||void 0===o?void 0:o.app_type)&&"support_type"===(null==r?void 0:r.user_type)&&(console.log("beforecrisis?sfsd",JSON.stringify(l),r),l.message=Lt(Lt({},l.message),{},{to_user:Lt(Lt({},null===(s=l.message)||void 0===s?void 0:s.to_user),{},{id:r.user_id})}),console.log("aftercrisis?why the object is not updated",JSON.stringify(l)),null!==(i=l.room)&&void 0!==i&&i.startsWith("global_for__")&&(l.room="support_for__".concat(r.user_id))),console.log(JSON.stringify(e),"afterupdate1"),l}},{key:"attachInputActionRowLogout",value:function(e,t,n){var o=JSON.parse(localStorage.getItem("tezkit_app_data")),a=this.createInputWrapperLogout(),r=this.createInputBoxLogout(e,"logout_user",o);r.addEventListener("focus",(function(){return r.style.border="1px solid rgb(74, 122, 255)"})),a.appendChild(r),this.setChatInputLogoutUI(o)}},{key:"greet",value:function(){console.log("here updated")}},{key:"anotherFunc",value:function(){console.log("shouuldnot be mocked!")}},{key:"updateChatToDB",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log(e,"Here is the payload11");var o=localStorage.getItem("tezkit_token");e.msg_ids.length>0&&fetch("https://chats.".concat("magicchat.io","/").concat("prod","/update_chat"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(o)},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){console.log("Reaction updated successfully:",e)})).catch((function(o){console.error("Error updating reaction:",o),n<3?(console.log("Retrying in 7 seconds..."),setTimeout((function(){t.updateChatToDB(e,n+1)}),7e3)):console.error("Max retries reached, operation failed.")}))}},{key:"informPeerSysAboutMsgStatus",value:function(e,t){var n,o,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DELIVERED",s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c="[MsgStatus]";console.log("".concat(c," ðŸš€ [START] informPeerSysAboutMsgStatus called")),console.log("".concat(c," ðŸŸ¢ Input Params:"),{socket:e,ret_id:t,status:r,app_name:s,to_user_id:i,frm_user_id:l});var d=localStorage.getItem("tezkit_app_data");if(d){var p=JSON.parse(d),u=localStorage.getItem("global_settings"),h=u?JSON.parse(u):{},g=null===(n=this.state)||void 0===n?void 0:n.loggedInUser,f=null==p||null===(o=p.settings)||void 0===o?void 0:o.app_type,m=(null==h||null===(a=h.multi_admin)||void 0===a?void 0:a.enable)||!1;console.log("".concat(c," âš™ï¸ Context:"),{appType:f,multi_admin:m,loggedInUser:g});var _=null;if("P2A"===f){var y,v=null==g||null===(y=g.tenant_info)||void 0===y?void 0:y.id;if(!v)return void console.warn("".concat(c," âš ï¸ Missing tenant_info.id for P2A app"));if(!l)return void console.warn("".concat(c," âš ï¸ Missing frm_user_id â†’ cannot determine correct room"));_=l===v?"".concat("global_for__").concat(v):"".concat("support_for__").concat(l),console.log("".concat(c," ðŸ§  P2A resolved â†’ right_global_id ="),_)}else"P2P"===f&&(_="".concat("global_for__").concat(i),console.log("".concat(c," ðŸ‘¥ P2P resolved â†’ right_global_id ="),_));if(_){var b={action:"MSG_STATUS_CHANGE_EVENT",ret_id:t,room:_,status:r,timestamp:Date.now(),app_name:s,to_user_id:i};console.log("".concat(c," ðŸš€ Emitting socket event: ON_MESSAGE_STATUS_CHANGED"),b,_),e.emit("ON_MESSAGE_STATUS_CHANGED",b);var x={type:"status",msg_ids:[t],status:r};console.log("".concat(c," ðŸ’¾ Updating chat DB with:"),x),this.updateChatToDB(x),console.log("".concat(c," âœ… Chat DB updated successfully"))}else console.warn("".concat(c," âš ï¸ right_global_id missing â†’ skipping emit & DB update"));console.log("".concat(c," ðŸ [END] informPeerSysAboutMsgStatus complete"))}else console.warn("".concat(c," âš ï¸ tezkit_app_data missing â†’ aborting operation"))}},{key:"informPeerSysAboutBULKMsgsStatus",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DELIVERED",a=arguments.length>3?arguments[3]:void 0,r="[BULK_STATUS_".concat(Date.now(),"_").concat(Math.floor(9999*Math.random()),"]");console.log("".concat(r," ðŸ”¥ informPeerSysAboutBULKMsgsStatus triggered"));var s=localStorage.getItem("tezkit_app_data");if(console.log("".concat(r," ").concat(o," initialized..."),s),s){var i=JSON.parse(s),l=null===(n=this.state)||void 0===n?void 0:n.loggedInUser;if(l){console.log("".concat(r," ðŸ§© messagesNotRead received:"),t);var c="V1"===i.settings.version?"id":"uid",d=t.filter((function(e){var t,n;return"READ"!==(null==e||null===(t=e.message)||void 0===t?void 0:t.status)&&l[c]!==(null==e||null===(n=e.message)||void 0===n||null===(n=n.frm_user)||void 0===n?void 0:n.id)}));if(d.length){var p={type:"status",msg_ids:d.map((function(e){return e.message.msg_id})),status:o};console.log("".concat(r," ðŸ’¾ Updating chat DB with payload:"),p),this.updateChatToDB(p);var u=i.settings.app_type;if(console.log("".concat(r," ðŸ§  App Type:"),u),"P2A"===u){var h,g=null==l||null===(h=l.tenant_info)||void 0===h?void 0:h.id;if(!g)return void console.warn("".concat(r," âš ï¸ Missing tenant_info.id for P2A app"));var f,m={},_=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=St(e))){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==t.return||t.return()}finally{if(s)throw a}}}}(d);try{for(_.s();!(f=_.n()).done;){var y,v=f.value,b=null==v||null===(y=v.message)||void 0===y||null===(y=y.frm_user)||void 0===y?void 0:y.id;b&&(m[b]||(m[b]=[]),m[b].push(v.message.msg_id))}}catch(e){_.e(e)}finally{_.f()}console.log("".concat(r," ðŸ“¦ Grouped messages by sender:"),m),Object.entries(m).forEach((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,s,i=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),s=n[0],i=n[1],l=s===g?"global_for__".concat(g):"support_for__".concat(s);console.log("".concat(r," ðŸš€ [P2A] Emitting bulk update â†’"),{room:l,msg_count:i.length,senderId:s}),e.emit("ON_MESSAGE_BULK_STATUS_UPDATE",{ret_ids:i,room:l,status:o,timestamp:Date.now(),app_name:a})}))}else if("P2P"===u){var x=this.state.activeWindowObj||{},w=x.hasOwnProperty("uid")?x.uid:x.id;if(!w)return void console.warn("".concat(r," âš ï¸ Missing correct_id for P2P app"));var E="global_for__".concat(w),C=d.map((function(e){return e.message.msg_id}));console.log("".concat(r," ðŸ‘¥ [P2P] Emitting bulk update â†’"),{room:E,msg_count:C.length,correct_id:w}),e.emit("ON_MESSAGE_BULK_STATUS_UPDATE",{ret_ids:C,room:E,status:o,timestamp:Date.now(),app_name:a})}console.log("".concat(r," âœ… Completed execution."))}else console.log("".concat(r," âœ… No unread messages to update."))}else console.warn("".concat(r," âš ï¸ loggedInUser not available in state"))}else console.warn("".concat(r," âš ï¸ No tezkit_app_data found in localStorage"))}},{key:"setGlobalSeletedWindowKey",value:function(e){console.log("setGlobalSeletedWindowKey iddf",e),this.state.activeWindowObj=e}},{key:"createInputWrapperLogout",value:function(){var e=document.createElement("div");return e.id="input-box-div-wrapper",e.classList.add("input-box-div-wrapper"),e}},{key:"createInputBoxLogout",value:function(e,t,n){var o,a=document.createElement("input");a.type="text",a.placeholder="Type here...",a.classList.add(w.Xs);var r=(null==e||null===(o=e[t])||void 0===o?void 0:o.input)||"";return a.value=r,a}},{key:"createAttachmentButton",value:function(e){var t=document.createElement("button");t.className=w.QQ,t.innerHTML='<svg width="44" height="50" viewBox="0 0 44 50" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M4 11H39V43H4V11Z" fill="#B5B0BC"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M26.8438 0C29.6562 0 32.4688 1.25 34.1875 3.59375L41.8438 13.125C43.0938 14.8437 43.875 16.875 43.875 18.9062V40.625C43.875 45.7812 39.6562 50 34.5 50H9.5C4.34375 50 0.125 45.7812 0.125 40.625V9.375C0.125 4.21875 4.34375 0 9.5 0H26.8438ZM31.6875 17.6562C28.875 14.8438 24.5 14.5312 21.375 17.0312C20.75 17.5 20.5938 18.5938 21.0625 19.2188C21.5312 19.8438 22.625 20 23.25 19.5312C25.125 18.125 27.7813 18.2812 29.3438 20C31.2188 21.875 31.2188 24.8438 29.3438 26.5625L23.875 32.0312L21.2188 34.6875L21.0625 34.8438C19.1875 36.5625 16.375 36.4062 14.6562 34.6875C12.9375 32.9688 12.7812 30.1562 14.5 28.2812L14.6562 28.125L18.25 24.5312L18.4062 24.375C19.0312 23.9062 19.9688 23.9062 20.4375 24.5312C21.0625 25.1562 21.0625 26.0938 20.4375 26.7188L16.8438 30.3125L16.6875 30.4688C16.2188 31.0938 16.2188 32.0312 16.8438 32.5C17.4688 33.125 18.4062 33.125 19.0312 32.5L22.625 28.9062L22.7812 28.75C24.3438 26.875 24.3438 24.0625 22.625 22.3438C20.75 20.4688 17.7812 20.4688 16.0625 22.3438L14.6562 23.75L14.5 23.9062L13.5625 24.8438L12.4687 25.9375C9.34375 29.0625 9.34375 33.9062 12.4687 37.0312C15.5937 40.1562 20.4375 40.1562 23.5625 37.0312L27.1562 33.4375L27.3125 33.2812L31.8437 28.75L32.1562 28.4375C34.6562 25.4688 34.6562 20.625 31.6875 17.6562Z" fill="white"/>\n    </svg>\n    ';var n=document.createElement("input");return n.type="file",n.style.display="none",n.multiple=!0,n.accept="image/*,.pdf",t.addEventListener("click",(function(){n.click(),document.getElementById("scrollWrap").style.display="none"})),{button:t,fileInput:n}}},{key:"handleFileInputChange",value:function(e,t,n,o,a,r){var s=this;if(console.log("sdfaaaaaaaaaaaa"),0!==e.files.length){var i=this.replaceInputWithEditableDiv(e,t,o),l=t.querySelector(".".concat(w.dQ)),c=t.querySelector(".".concat(w.QQ));c&&(c.style.display="none");var d=this.createUploadButton();l&&t.contains(l)?t.replaceChild(d,l):t.appendChild(d),d.addEventListener("click",Ot(At().mark((function p(){var u,h,g,f,m,_,y,v,b,x,w,E,C,k,S,T,I,L,A,N,O;return At().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("thissdtewr","P2P"==s.state.loggedInUser.apptyp),"P2A"==s.state.loggedInUser.apptyp&&((u=document.getElementById("scrollWrap")).style.display="flex",console.log("getScrlloupBtngetScrlloupBtn",u)),h=s.collectTextAndFilesFromEditable(i),g=h.textData,f=new FormData,Array.from(e.files).forEach((function(e){return f.append("file",e,e.name)})),f.append("filename","upload Multi"),f.append("sometext_data",JSON.stringify(g)),f.append("channel_id","".concat(o.state.loggedInUser.id,"__to__").concat(n.id)),m=a("chat_box_inner_wrapper"),p.next=11,s.uploadMFiles({method:"POST",body:f});case 11:if(_=p.sent,y={},_.files&&Array.from(e.files)&&Array.from(e.files).forEach((function(e,t){y[e.name]=_.files[t]})),v=s.replaceFilenamesWithUrls(g,y),b=o.state.activeWindowObj.uid||o.state.activeWindowObj.id,x=r.uid||r.id,w=s.state||{},E=w.p2a_connection_with,C=JSON.parse(localStorage.getItem("global_settings")),k=C.multi_admin.enable,console.log("p2a_connection_withdsffsdfsdf",E),S=(!0===k||"true"===k)&&"support_type"===(null==E?void 0:E.user_type),T=S?"support_for__":"global_for__",!(I=localStorage.getItem("tezkit_app_data"))){p.next=42;break}return L=JSON.parse(I),(A={room:"".concat(T).concat(b),type:"NEW_FILE_MIXED_V1",message:{msg_id:m,ret_id:m,timestamp:Date.now(),result:v,frm_user:{id:x,user:r.full_name||x},to_user:{id:b}}}).app_name=L.app_name,N=s.transformMsgObject(A,s),s.state.socket.emit("ON_FILE_UPLOAD",N),i.textContent="",s.addMessageToUserChatBox(A,"NEW_FILE_MIXED_V1"),p.next=35,Y(A,r);case 35:console.log("asejfsjfsdfsdfs"),(O=o.state.prv_inp)&&t.contains(i)&&(console.log("editableDivsdfsdfsdf",i),t.replaceChild(O,i)),t.contains(d)&&t.replaceChild(l,d),c&&(c.style.display="",c.disabled=!1,c.classList.remove("attachBtns")),O&&(O.value=""),e.value="";case 42:case"end":return p.stop()}}),p)}))))}}},{key:"replaceInputWithEditableDiv",value:function(e,t,n){var o=t.querySelector("input.".concat(w.Xs));if(o){var a=document.createElement("div");return a.classList=w.rH,a.contentEditable="true",Array.from(e.files).forEach((function(e){var t=document.createElement("p");if(t.style.marginBottom="5px",e.type.startsWith("image/")){var n=new FileReader;n.onload=function(n){var o=document.createElement("img");o.src=n.target.result,o.setAttribute("data-filename",e.name),o.setAttribute("data-filetype","img"),o.style.width="100px",o.style.height="100px",o.style.objectFit="cover",o.style.flexShrink="0",o.style.display="inline-block",o.style.verticalAlign="middle",o.style.marginRight="10px",o.contentEditable="false",t.appendChild(o),a.appendChild(t)},n.readAsDataURL(e)}else if("application/pdf"===e.type){var o=document.createElement("span");o.setAttribute("data-filename",e.name),o.setAttribute("data-filetype","pdf"),o.contentEditable="false",o.style.cssText="\n          display: inline-flex;\n          align-items: center;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background: #f9f9f9;\n          margin-right: 10px;\n          vertical-align: middle;\n          max-width: 250px;\n        ";var r=document.createElement("span");r.innerHTML='\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M20 2H8c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zM8 16V4h12l.002 12H8z" fill="#FF0000"/>\n            <path d="M4 8H2v12c0 1.103.897 2 2 2h12v-2H4V8z" fill="#FF0000"/>\n            <path d="M12 12H8v2h4v-2zM16 8H8v2h8V8z" fill="#FF0000"/>\n          </svg>\n        ';var s=document.createElement("span");s.style.cssText="\n          margin-left: 8px;\n          flex: 1;\n          min-width: 0; /* Allow text truncation */\n        ";var i=document.createElement("div");i.textContent=e.name,i.style.cssText="\n          font-weight: bold;\n          color: #333;\n          font-size: 12px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          max-width: 150px;\n        ";var l=document.createElement("div");l.textContent="PDF",l.style.cssText="\n          font-size: 10px;\n          color: #666;\n        ",s.appendChild(i),s.appendChild(l),o.appendChild(r),o.appendChild(s),t.appendChild(o);var c=document.createTextNode("â€‹");t.appendChild(c),a.appendChild(t)}})),a.addEventListener("click",(function(e){if(e.target.closest('[data-filetype="pdf"]')){var t=e.target.closest('[data-filetype="pdf"]'),n=document.createRange(),o=window.getSelection();n.setStartAfter(t),n.collapse(!0),o.removeAllRanges(),o.addRange(n),e.preventDefault()}})),a.addEventListener("keydown",(function(e){if("Enter"===e.key&&!e.shiftKey){e.preventDefault();var n=t.querySelector(".".concat(w.dQ));n&&n.click()}})),n.state.prv_inp=o,t.replaceChild(a,o),a}console.error("No input found to replace!")}},{key:"createUploadButton",value:function(){var e=document.createElement("button");return e.className=w.dQ,e.style.bottom="0%",e.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n    </svg>\n    ',e}},{key:"collectTextAndFilesFromEditable",value:function(e){var t=[];return e.childNodes.forEach((function(e){var n=[];if("P"===e.nodeName){var o=!1;e.childNodes.forEach((function(e){if(e.nodeType===Node.TEXT_NODE&&""!==e.textContent.trim()){var t=e.textContent.replace(/\u200B/g,"");""!==t.trim()&&n.push({value:t,type:"text"})}else if("IMG"===e.nodeName){var a=e.getAttribute("data-filename"),r=e.getAttribute("data-filetype")||"img";n.push({value:a,type:r}),o=!0}else if("SPAN"===e.nodeName){var s=e.getAttribute("data-filename");"pdf"===e.getAttribute("data-filetype")&&(n.push({value:s,type:"pdf"}),o=!0)}})),(o&&1===n.length||n.length>0)&&t.push(n)}})),{textData:t}}},{key:"replaceFilenamesWithUrls",value:function(e,t){return e.map((function(e){return e.map((function(e){return"img"!==e.type&&"pdf"!==e.type||!t[e.value]?e:{value:t[e.value],type:e.type}}))}))}},{key:"addReactionToDB",value:function(e){if(console.log("sdfsdfreactPayloadsadf",e),e.msg_id.length>0){console.log(e,"Here is the payloadsdf");var t=localStorage.getItem("token");fetch("https://chats.".concat("magicchat.io","/").concat("prod","/update_chat"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){console.log("Reaction updated successfully:",e)})).catch((function(e){console.error("Error updating reaction:",e)}))}}},{key:"addReaction",value:function(e,t){console.log("arewnoterwehereparentElement",e);var n=e.querySelector('[id^="msg_id__"]');console.log("parentElementsdf",n),n.querySelector(".".concat(w.C$," > div"));var o=e.querySelector(".msgReactions");o||((o=document.createElement("div")).className="msgReactions",o.classList.add(w.cw),e.style.position="relative",e.appendChild(o));var a=document.createElement("div");a.textContent=t,1===o.children.length?o.replaceChild(a,o.children[0]):(o.innerHTML="",o.appendChild(a))}},{key:"getRightReplyToContent",value:function(e){var t="#".concat(e,' [class^="mine_message"]'),n=document.querySelector(t);if(!n)return"(message not found)";var o=n.querySelector("div");if(!o)return"(empty message)";if(null!==o.querySelector("div")){console.log("ðŸ“„ This is a document/media message");var a=o.querySelector("p");if(a){var r=a.textContent.trim();return(r.length>100?r.slice(0,100)+"â€¦":r)||"[Media Attachment]"}return"[Media Attachment]"}return console.log("ðŸ“ This is a text-only message"),n.textContent.trim()||"(empty message)"}},{key:"addMessageToBotChatBox",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INCOMING";console.log("is it called in qna?"),console.log("direction:",o),console.log("should be true when data from api comes???frm_toptype"),console.log("is it missing the messageObj1 msg_id in REPLY case",e),console.log("directionwhatisgoingon in there?type",e);var a=e,r=document.querySelector(".".concat(w._3)),s="OUTGOING"===o?"display: flex; justify-content: flex-end; ":"display: flex; justify-content: flex-start;";console.log("here1");var i=this.createMessageDivWrapper("You");i.setAttribute("style",s);var l,c=this.outerMsgRowDiv();console.log("here2");var d=document.createElement("div");d.textContent=a.message.message,function(e){l=t.innerMsgDivWrap(a,e),"INCOMING"===o&&(l.style.backgroundColor="#edf2fb",l.style.color="#121723",l.style.borderRadius="18px 18px 18px 0px"),console.log("here3")}(d),i.appendChild(c),c.append(l),n?r.prepend(i):r.appendChild(i),console.log("hereattheend",r.childElementCount)}},{key:"createMessageDivWrapper",value:function(e){console.log("dowe have a whoe",e);var t=document.createElement("div");t.style.justifyContent="You"==e?"right":"left";var n="You"===e?w.vI:w.W1;return t.classList.add(n),t}},{key:"createDocumentMsgDiv",value:function(e){var t=this,n=document.createElement("div");n.style.display="flex",n.style.flexDirection="column",n.style.gap="10px",console.log("wht is this text data",e);var o=document.createElement("div");return e.message.result.forEach((function(e){var n=document.createElement("p");e.forEach((function(e){if("text"===e.type){var o=document.createTextNode(e.value);n.appendChild(o)}else if("img"===e.type){var a=document.createElement("a");a.href=e.value,a.target="_blank",a.rel="noopener noreferrer",a.title="Click to view image in new tab";var r=document.createElement("img");r.src=e.value,r.alt="Image",r.style.maxWidth="100%",r.style.borderRadius="8px",r.style.cursor="pointer",r.style.transition="transform 0.2s ease, opacity 0.2s ease",r.addEventListener("mouseenter",(function(){r.style.opacity="0.9"})),r.addEventListener("mouseleave",(function(){r.style.opacity="1"})),a.appendChild(r),n.appendChild(a)}else if("pdf"===e.type){var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.padding="10px",s.style.backgroundColor="#1b61f0",s.style.borderRadius="8px",s.style.margin="5px 0",s.style.gap="12px";var i=document.createElement("div");i.textContent="ðŸ“„",i.style.fontSize="24px";var l=document.createElement("div");l.style.flex="1";var c=t.extractFileNameFromUrl(e.value)||"document.pdf",d=document.createElement("div");d.textContent=c,d.style.fontWeight="bold",d.style.fontSize="14px",d.style.marginBottom="4px";var p=document.createElement("div");p.textContent="PDF Document",p.style.fontSize="12px",p.style.color="white",l.appendChild(d),l.appendChild(p);var u=document.createElement("a");u.href=e.value,u.target="_blank",u.rel="noopener noreferrer",u.setAttribute("download",c),u.innerHTML="â¬‡ï¸",u.style.padding="8px",u.style.borderRadius="4px",u.style.backgroundColor="#007bff",u.style.color="white",u.style.textDecoration="none",u.style.cursor="pointer",u.title="Download ".concat(c),s.appendChild(i),s.appendChild(l),s.appendChild(u),n.appendChild(s)}})),o.appendChild(n)})),n.appendChild(o),n}},{key:"extractFileNameFromUrl",value:function(e){try{var t=new URL(e).pathname;return t.substring(t.lastIndexOf("/")+1)}catch(e){return console.error("Error parsing URL:",e),null}}},{key:"outerMsgRowDiv",value:function(){var e=document.createElement("div");return e.className=w.CX,e}},{key:"innerMsgDivWrap",value:function(e,t){var n,o;console.log("messageObjsadfsadf","NEW_FILE_MIXED_V1"==e.type),console.log("fgndfnbmessageObjsadfsadf",e);var a=document.createElement("div");console.log("arewehere2",e);var r=e.message.msg_id;function s(e,t){return new Date(e).toLocaleString("en-IN",{timeZone:t,hour12:!0,hour:"2-digit",minute:"2-digit"})}return a.setAttribute("id","".concat(r)),a.className=w.d6,"NEW_FILE_MIXED_V1"==e.type&&(a.className=w.$Q),null!=e&&null!==(n=e.message)&&void 0!==n&&null!==(n=n.frm_user)&&void 0!==n&&n.id&&a.setAttribute("data-frm-id",e.message.frm_user.id),null!=e&&null!==(o=e.message)&&void 0!==o&&null!==(o=o.to_user)&&void 0!==o&&o.id&&a.setAttribute("data-to-id",e.message.to_user.id),console.log(s(1750766734356)),a.innerHTML="\n            <div class=".concat(w.r1," >\n                <div class=").concat(w.C$,">\n                </div>\n                <div class= ").concat(w.vE,">\n                    <div>").concat(s(e.message.timestamp),'</div>\n                    <div class="status"></div>\n                </div>\n            </div>\n        '),a.querySelector(".".concat(w.C$)).appendChild(t),a}},{key:"createEmojiContentDiv",value:function(){var e=document.createElement("div");return e.className=w.Zg,e.innerHTML="&#9786",e}},{key:"createFrmUserContentDiv",value:function(e,t){console.log("whosdfsdf",t,this.state.support_admin_users);var n="https://cdn-icons-png.flaticon.com/512/9187/9187604.png",o=document.createElement("div");o.className=w.qZ;var a=document.createElement("img"),r="https://cdn-icons-png.flaticon.com/512/13434/13434972.png";try{var s=JSON.parse(localStorage.getItem("tezkit_me"));if("You"===t)r=null!=s&&s.image?s.image:n;else if("Other"===t){var i,l;if(e===(null==s||null===(i=s.tenant_info)||void 0===i?void 0:i.id))r=(null==s||null===(l=s.tenant_info)||void 0===l?void 0:l.image)||n;else if(Array.isArray(this.state.support_admin_users)){var c=this.state.support_admin_users.find((function(t){return t.id===e}));c&&(r=c.image||n)}}}catch(e){console.error("Error reading tezkit_me from localStorage",e)}return a.src=r,a.onerror=function(){a.src=n},a.alt=e,a.className=w.qd,o.appendChild(a),o}},{key:"createDownIcon",value:function(){var e=document.createElement("div");return e.innerHTML="&#709",e.classList.add(w.FW),e}},{key:"handleMouseOver",value:function(e,t,n){e||(t.style.visibility="visible",n.style.visibility="visible")}},{key:"handleMouseOut",value:function(e,t,n){e||(t.style.visibility="hidden",n.style.visibility="hidden")}},{key:"toggleEmojiReactions",value:function(e){var t=e.target.parentElement;console.log("target parentElement",t);var n=t.querySelector("#open-emoji-wrap");console.log("existingWrapper parentElement",n),n?n.remove():this.createEmojiReactions(t)}},{key:"createEmojiReactions",value:function(e){var t=this;console.log("whatiesthignparentElement",e);var n=document.createElement("div");n.setAttribute("id","open-emoji-wrap"),n.classList.add(w.Yw),["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ‘"].forEach((function(o){var a=document.createElement("div");a.textContent=o,a.style.marginRight="8px",a.onclick=function(){return t.handleEmojiClick(e,o)},n.appendChild(a)})),e.appendChild(n)}},{key:"handleEmojiClick",value:function(e,t){console.log("ðŸŸ¢ handleEmojiClick called. State snapshot:",this.state);var n=e.querySelector('[id^="msg_id__"]');if(n){var o=n.querySelector(".".concat(w.C$," > div")),a=localStorage.getItem("tezkit_app_data");if(console.log("ðŸ“¦ LocalStorage â†’ tezkit_app_data:",a),a){var r=JSON.parse(a).settings,s=r.app_type,i=r.version;console.log("ðŸ”§ app_type=".concat(s,", version=").concat(i));var l={msg_id:n.id,reaction:t,app_name:this.state.loggedInUser.app_name},c=function(){var n=document.createElement("div");n.textContent=t,n.classList.add(w.cw),e.style.position="relative",e.appendChild(n)};if("P2P"===s){var d="V1"===i?this.state.activeWindowObj.id:this.state.activeWindowObj.uid;return console.log("ðŸŽ¯ [P2P] Active window ID:",d),this.state.socket.emit("ON_MESSAGE_STATUS_CHANGED",{action:"MSG_REACTION_EVENT",ret_id:n.id,room:"global_for__".concat(d),message:t,to_msg:{msg:o.textContent},timestamp:Date.now()}),this.addReactionToDB(l),void c()}console.log("ðŸ“¨ [P2A] Message container:",n,"LoggedInUserID:",this.state.loggedInUser.id);var p=n.dataset.frmId,u=n.dataset.toId,h=("V1"!=this.state.loggedInUser.version?this.state.loggedInUser.uid:this.state.loggedInUser.id)===p?u:p;console.log("ðŸŽ¯ target_id (peer user):",h);var g=(h.startsWith("TEN-")?"global_for__":"support_for__")+h;console.log("ðŸ  [P2A] Emitting to room: ".concat(g)),this.state.socket.emit("ON_MESSAGE_STATUS_CHANGED",{action:"MSG_REACTION_EVENT",ret_id:n.id,room:g,message:t,to_msg:{msg:o.textContent},timestamp:Date.now(),to_user_id:h}),this.addReactionToDB(l),c()}else console.warn("âš ï¸ No tezkit_app_data found â†’ aborting emoji handling.")}else console.warn("âš ï¸ No message container found for emoji click.")}},{key:"handleDownIconClick",value:function(e,t){var n=this,o=e.target,a=o,r=!1,s=document.createElement("div");s.setAttribute("id","dropdown-popup"),s.style.position="absolute",s.style.top="49px",s.style.right="-5px",s.style.width="150px",s.style.height="auto",s.style.backgroundColor="#fff",s.style.color="#000",s.style.borderRadius="5px",s.style.zIndex=103,s.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",s.style.cursor="pointer",s.style.overflow="hidden",t.appendChild(s);var i=document.createElement("div");function l(e,t,n,o){e.addEventListener("mouseenter",(function(){e.style.backgroundColor=t,e.style.borderRadius=o})),e.addEventListener("mouseleave",(function(){e.style.backgroundColor=n}))}i.style.textAlign="left",i.style.borderRadius="10px",s.appendChild(i);var c=document.createElement("div");c.textContent="Info",c.style.padding="10px 20px 10px 15px",i.appendChild(c);var d=document.createElement("div");d.textContent="Reply",d.style.padding="10px 20px 10px 15px",d.addEventListener("click",(function(e){console.log("Test click"),n.handleReplyButtonClick(e,s)})),i.appendChild(d);var p=document.createElement("div");p.textContent="Copy",p.style.padding="10px 20px 10px 15px",i.appendChild(p),console.log("wahteriwe istarget",o);var u=null,h=o.closest('[class*="me-left__"]');if(h){console.log(h,"target valuevcb",o);var g=h.querySelector('[id^="msg_id__"]');if(!g)return;console.log("msgElsdfsf",g),console.log("msgElsdfsf",g),(u=this.createEditButton(g.id,this,o))&&(u.style.padding="10px 20px 10px 15px",i.appendChild(u))}l(c,"#f0f0f0","","10px 10px 0 0"),l(p,"#f0f0f0","","0px"),l(d,"#f0f0f0","","0px"),r=!r,i.style.display=r?"block":"none";var f=a.parentElement.querySelector("#open-emoji-wrap");f&&(f.style.display="none"),i.addEventListener("click",(function(e){var t=e.target;t===c?console.log("Info button clicked"):t===d?console.log("Reply button clicked"):t===p?console.log("Copy button clicked"):t===u&&console.log("Edit button clicked"),s.style.display="none",s.style.border="1px solid red",r=!1})),document.addEventListener("click",(function e(t){s.contains(t.target)||a.contains(t.target)||document.removeEventListener("click",e)}))}},{key:"handleChatBoxClick",value:function(e){var t=e.target,n=document.querySelectorAll("#open-emoji-wrap, #dropdown-popup");t.closest('[id^="msg_id__"]')||n.forEach((function(e){return e.remove()}))}},{key:"handleReplyButtonClick",value:function(e,t){var n,o=this;console.log("Handle Reply Button Clicked"),console.log("Event:",e),console.log("Reply Mode Modal:",t);var a=this,r=document.getElementById("input-box-div-wrapper");console.log("this.state.loggedInUser.apptypsdf","P2P"==this.state.loggedInUser.apptyp),"P2A"==this.state.loggedInUser.apptyp&&(document.getElementById("scrollWrap").style.display="none"),r.classList.add(w.uD);var s=r.firstElementChild,i=s&&s.nextElementSibling!==r.lastElementChild?s.nextElementSibling:null,l=r.lastElementChild;i&&(i.style.display="none",a.state.prv_middle_child=i);var c=e.currentTarget.closest('[id^="msg_id__"]'),d=c.cloneNode(!0);d.removeChild(d.lastElementChild);var p=d.querySelector("div.".concat(w.C$," > div"));d.innerHTML="",d.appendChild(p),d.style.width="100%",d.style.maxWidth="100%",d.style.border="none",d.style.borderLeft="10px solid #C887FE",d.style.background="#f3f3f3",d.style.color="black",d.style.borderRadius="5px",d.style.padding="10px",d.style.maxHeight="120px",d.style.overflow="hidden";var u=document.createElement("div");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px";var h=document.createElement("div");h.innerHTML="&times;",h.style.fontSize="34px",h.style.textAlign="center",h.style.cursor="pointer";var g=document.createElement("div");g.innerText="me-left"==c.parentElement.parentElement.classList.value?"You":"Other",g.style.color="#C887FE",g.style.padding="3px 0",g.style.fontSize="16px",g.style.fontWeight="600";var f="IMG"===(null==d||null===(n=d.firstChild)||void 0===n||null===(n=n.firstChild)||void 0===n||null===(n=n.firstChild)||void 0===n||null===(n=n.firstChild)||void 0===n?void 0:n.tagName)?"DOC":"TEXT";if(console.log("canwe ewrewr ewaht ti siasclonedMsgDiv.firstChild"),d.insertBefore(g,d.firstChild),s){var m=document.createElement("div");m.style.background="white",m.style.width="100%",console.log("for document upload as wel?");var _=document.createElement("div");_.setAttribute("data-placeholder","Type your reply..."),_.setAttribute("contenteditable","true"),_.className=w.wt;var y=document.createElement("div");if(y.style.width="100%",y.style.borderRadius="0px",u.appendChild(d),u.appendChild(h),y.appendChild(u),m.appendChild(y),y.appendChild(_),setTimeout((function(){_.focus();var e=document.createRange(),t=window.getSelection();e.selectNodeContents(_),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}),0),_.addEventListener("keydown",(function(e){if("Enter"===e.key&&!e.shiftKey){e.preventDefault();var t=r.querySelector(".".concat(w.dQ));t&&t.click()}})),r.replaceChild(m,s),l){var v=document.createElement("button");v.className=w.dQ,v.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M20 0C8.95469 0 0 8.95469 0 20C0 31.0453 8.95469 40 20 40C31.0453 40 40 31.0453 40 20C40 8.95469 31.0453 0 20 0ZM29.3664 11.9031L23.0156 30.0203C22.9329 30.258 22.7911 30.4707 22.6036 30.6386C22.4161 30.8064 22.189 30.9238 21.9436 30.9797C21.6983 31.0356 21.4427 31.0283 21.201 30.9583C20.9592 30.8883 20.7393 30.758 20.5617 30.5797L17.0672 22.3078L8.79531 18.8133C8.61696 18.6357 8.48668 18.4158 8.4167 18.174C8.34673 17.9323 8.33936 17.6767 8.39529 17.4314C8.45122 17.186 8.56861 16.9589 8.73644 16.7714C8.90427 16.5839 9.11701 16.4421 9.35469 16.3594L27.4719 10.0086C27.7361 9.91508 28.0214 9.89831 28.2948 9.9602C28.5682 10.0221 28.8185 10.1601 29.0167 10.3583C29.2149 10.5565 29.3529 10.8068 29.4148 11.0802C29.4767 11.3536 29.4599 11.6389 29.3664 11.9031Z" fill="#4A7FEB"/>\n        </svg>',a.state.prv_send_btn=l,r.removeChild(l),r.appendChild(v);var b=function(){r.replaceChild(s,m),r.replaceChild(l,v),a.state.prv_middle_child&&(a.state.prv_middle_child.style.display="")};v.addEventListener("click",Ot(At().mark((function e(){var t,n,r,s,i,l,p,u,h,g,m,y,v,x,w,E,C,k,S,T;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.textContent){e.next=3;break}return e.abrupt("return");case 3:if(n=$(),r=o.state.loggedInUser,s=o.state.activeWindowObj,i=localStorage.getItem("tezkit_app_data")){e.next=10;break}return console.warn("âš ï¸ No tezkit_app_data found â†’ aborting reply send."),e.abrupt("return");case 10:l=JSON.parse(i),p=l.settings,u=p.app_type,p.version,h=r.hasOwnProperty("uid")?r.uid:r.id,g=s.hasOwnProperty("uid")?s.uid:s.id,"P2P"===u?(m=g,y="global_for__"):(E=null==(w=d)||null===(v=w.dataset)||void 0===v?void 0:v.frmId,C=null==w||null===(x=w.dataset)||void 0===x?void 0:x.toId,y=(m=h===E?C:E).startsWith("TEN-")?"global_for__":"support_for__"),k=y+m,console.log("ðŸ’¬ [Reply] Emitting to room:",k,"â†’ target_id:",m),S={room:k,type:"REPLY",message:{msg_id:n,timestamp:Date.now(),status:"SENT",frm_user:{user:r.full_name||h,id:h},to_user:{user:s.full_name||g,id:g},to_msg:{msg_type:f,msg_id:d.id,by_who:c.parentElement.parentElement.classList.contains("me-left")?"You":"Other"},message:t}},a.addMessageToUserChatBox(S,"REPLY"),S.message.ret_id=S.message.msg_id,S.app_name=l.app_name,T=o.transformMsgObject(S,o),console.log("ðŸ“¦ Transformed Reply Payload:",T),o.state.socket.emit("ON_REPLY_ARRIVAL",T),b(),Y(T,r);case 26:case"end":return e.stop()}}),e)})))),h.addEventListener("click",(function(){b(),"P2A"==o.state.loggedInUser.apptyp&&getScrlloupBtn&&(getScrlloupBtn.style.display="flex"===getScrlloupBtn.style.display?"none":"flex")}))}}}},{key:"sendAMsgToOtherClient",value:function(e,t,n){var o,a,r;console.log("[SEND_MSG] does it run we send usual msg?");var s=document.getElementById(e);console.log("[SEND_MSG] prv_msg_obj:",s);var i=s.querySelector(".".concat(w.C$)),l=i.children[0].textContent;console.log("[SEND_MSG] previous message text:",l),function(e,t){console.log("[SEND_MSG] updateAmsg() parentDiv:",e);var n=e.children[0];console.log("[SEND_MSG] oldMsgDiv:",n),n&&n.nodeType===Node.ELEMENT_NODE?(n.textContent=t,console.log("[SEND_MSG] Updated oldMsgDiv textContent to:",t)):console.log("[SEND_MSG] oldMsgDiv missing or not an element node")}(i,t);var c={action:"MSG_UPDATED_EVENT",ret_id:e,room:"global_for__"+n,message:t,to_msg:{msg:l},timestamp:Date.now()};console.log("[SEND_MSG] editPaylo prepared:",c);var d=JSON.parse(localStorage.getItem("tezkit_app_data")),p=null===(o=this.state)||void 0===o?void 0:o.p2a_connection_with,u=JSON.parse(localStorage.getItem("global_settings")).multi_admin.enable;console.log("[SEND_MSG] multi_admin:",u,Dt(u)),console.log("[SEND_MSG] app_type:",null==d||null===(a=d.settings)||void 0===a?void 0:a.app_type),console.log("[SEND_MSG] p2aConn:","tenant_type"==p.user_type),!0===u||"true"===u&&"P2A"===(null==d||null===(r=d.settings)||void 0===r?void 0:r.app_type)?(console.log("[SEND_MSG] Inside multi-admin + P2A support block"),"tenant_type"==p.user_type?(c.room="global_for__".concat(p.user_id),console.log("[SEND_MSG] Updated room to:",c.room)):(c.room="support_for__".concat(p.user_id),console.log("[SEND_MSG] Updated room to:",c.room)),console.log("[SEND_MSG] Emitting ON_MESSAGE_STATUS_CHANGED payload"),this.state.socket.emit("ON_MESSAGE_STATUS_CHANGED",c)):console.log("[SEND_MSG] Condition for multi-admin + P2A NOT met")}},{key:"createEditButton",value:function(e,t,n){var o=document.createElement("div");return o.textContent="Edit",o.addEventListener("click",(function(){var n,o=document.getElementById(e),a=(null==o||null===(n=o.querySelector(".".concat(w.C$," > div")))||void 0===n?void 0:n.textContent)||"",r=document.createElement("div");r.classList.add(w.HU);var s=document.createElement("div");s.classList.add(w._W),s.innerHTML='\n      <div class="'.concat(w.hT,'">\n        <button id="close-popup-btn" class="').concat(w.zt,'">\n          <i class="fa fa-close"></i>\n        </button>\n\n        <p style="font-size: 28px; font-weight:600;">Edit this content:</p>\n        \n        <div class="').concat(w.Jn,'">\n          <input type="text" id="edit-input" value="').concat(a,'" \n            class="').concat(w.Ow,'">\n          <button id="send-btn" class="').concat(w.tH,'">\n            <i class="fa fa-paper-plane"></i>\n          </button>\n        </div>\n      </div>\n    ');var i=document.getElementById("chatBody");i.appendChild(r),i.appendChild(s);var l=function(){r.remove(),s.remove()};document.getElementById("close-popup-btn").onclick=l,document.getElementById("send-btn").onclick=function(){var n=document.getElementById("edit-input").value;t.sendAMsgToOtherClient(e,n,t.state.activeWindowObj.id),t.addReactionToDB({msg_id:e,message:n,type:"message",app_name:t.state.activeWindowObj.app_name}),l()}})),o}},{key:"updateChat",value:function(e,t){console.log(e,"what is newstatus now",t);var n=document.getElementById(e.msg_id);if(console.log("let's grab it's first child",n),n){var o="DELIVERED"==t?'<span style="color: white;">&#10003;&#10003;</span>':"READ"==t?'<span style="color: #0074ff;">&#10003;&#10003;</span>':'<span style="color: white;">&#10003;</span>';console.log("wahtis itdsf",e.msg_id);var a=n.querySelector(".status");console.log("what is this messageContentDiv",a,n),a?a.innerHTML="<div>".concat(o,"</div>"):console.error("tick icon not found! Kindly Contact Admin!")}else console.log("Message with id "+e.msg_id+" not found.")}},{key:"updateMultipleChatStatus",value:function(e,t){console.log(t,"newStatusmessageObjssdafsdfsd",e),e.msg_id.forEach((function(e){console.log(e,"what is newstatus nowQQQ",t);var n=document.getElementById(e);if(console.log("let's grab it's first child",n),n){var o="DELIVERED"==t?'<span style="color: white;">&#10003;&#10003;</span>':"READ"==t?'<span style="color: rgb(0, 116, 255);">&#10003;&#10003;</span>':'<span style="color: white;">&#10003;</span>';console.log("wahtis itdsf",e);var a=n.querySelector(".status");console.log("what is this messageContentDiv",a,n),a?a.innerHTML="<div>".concat(o,"</div>"):console.error("tick icon not found! Kindly Contact Admin!")}else console.log("Message with id "+e+" not found.")}))}},{key:"updateMessageReactionInLS",value:function(e,t,n,o){var a,r=JSON.parse(localStorage.getItem("tezkit_msgs_data_read"));if(r&&r[e]&&r[e][t]){var s=r[e][t].msgs;console.log("egre rwearwer smessages",s);var i=s.find((function(e){return e.message&&e.message.msg_id===n}));i?(i.message.reaction=o,a=i,console.log('Message reaction updated to "'.concat(o,'"'))):console.log("Message ID not found.")}else console.log("App name or user ID not found in data.");return a}},{key:"updateMessageStatusInLS",value:function(e,t,n,o){var a=JSON.parse(localStorage.getItem("tezkit_msgs_data_read"));if(console.log(a,"xcg which one is wrong app_name, user_id, msg_id, update_to_status",e,t,n,o),a&&a[e]&&a[e][t]){var r=a[e][t].msgs.find((function(e){return e.message&&e.message.msg_id===n}));r?(r.message.status=o,console.log('Message status updated to "'.concat(o,'"'))):console.log("Message ID not found.")}else console.log("App name or user ID not found in data.")}}],t&&Bt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,a}();return o})()));